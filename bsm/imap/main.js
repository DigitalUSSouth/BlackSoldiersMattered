// ----------------------------------------------------------------------------
// Buzz, a Javascript HTML5 Audio library
// v 1.0.4 beta
// Licensed under the MIT license.
// http://buzz.jaysalvat.com/
// ----------------------------------------------------------------------------
// Copyright (C) 2011 Jay Salvat
// http://jaysalvat.com/
// ----------------------------------------------------------------------------
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files ( the "Software" ), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
// ----------------------------------------------------------------------------

/*
###############################################################################
# $Id$
#
# Project:  GDAL2Tiles, Google Summer of Code 2007 & 2008
#           Global Map Tiles Classes
# Purpose:  Convert a raster into TMS tiles, create KML SuperOverlay EPSG:4326,
#           generate a simple HTML viewers based on Google Maps and OpenLayers
# Author:   Klokan Petr Pridal, klokan at klokan dot cz
# Web:      http://www.klokan.cz/projects/gdal2tiles/
#
###############################################################################
# Copyright (c) 2008 Klokan Petr Pridal. All rights reserved.
#
# Permission is hereby granted, free of charge, to any person obtaining a
# copy of this software and associated documentation files (the "Software"),
# to deal in the Software without restriction, including without limitation
# the rights to use, copy, modify, merge, publish, distribute, sublicense,
# and/or sell copies of the Software, and to permit persons to whom the
# Software is furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included
# in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
# OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
# DEALINGS IN THE SOFTWARE.
###############################################################################


Global Map Tiles as defined in Tile Map Service (TMS) Profiles
==============================================================

Functions necessary for generation of global tiles used on the web.
It contains classes implementing coordinate conversions for:

	- GlobalMercator (based on EPSG:900913 = EPSG:3785)
			 for Google Maps, Yahoo Maps, Microsoft Maps compatible tiles
	- GlobalGeodetic (based on EPSG:4326)
			 for OpenLayers Base Map and Google Earth compatible tiles

More info at:

http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification
http://wiki.osgeo.org/wiki/WMS_Tiling_Client_Recommendation
http://msdn.microsoft.com/en-us/library/bb259689.aspx
http://code.google.com/apis/maps/documentation/overlays.html#Google_Maps_Coordinates

Created by Klokan Petr Pridal on 2008-07-03.
Google Summer of Code 2008, project GDAL2Tiles for OSGEO.

In case you use this class in your product, translate it to another language
or find it usefull for your project please let me know.
My email: klokan at klokan dot cz.
I would like to know where it was used.

Class is available under the open-source GDAL license (www.gdal.org).
 */

/**
	 * EventDispatcher
	 * 
	 * @author Horacio J. Peña
	 * @license MIT/X11
	 * @link https://bitbucket.org/horape/eventdispatcher
	 */

/*
		 * Yuichi Tateno. <hotchpotch@N0!spam@gmail.com>
		 * http://rails2u.com/
		 * 
		 * The MIT License
		 * --------
		 * Copyright (c) 2007 Yuichi Tateno.
		 * 
		 * Permission is hereby granted, free of charge, to any person obtaining a copy
		 * of this software and associated documentation files (the "Software"), to deal
		 * in the Software without restriction, including without limitation the rights
		 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
		 * copies of the Software, and to permit persons to whom the Software is
		 * furnished to do so, subject to the following conditions:
		 * 
		 * The above copyright notice and this permission notice shall be included in
		 * all copies or substantial portions of the Software.
		 * 
		 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
		 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
		 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
		 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
		 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
		 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
		 * THE SOFTWARE.
		 *
		 */

// ┌────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël 2.1.0 - JavaScript Vector Library                          │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\
// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\
// └────────────────────────────────────────────────────────────────────┘ \\

// ┌──────────────────────────────────────────────────────────────────────────────────────┐ \\
// │ Eve 0.3.4 - JavaScript Events Library                                                │ \\
// ├──────────────────────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)          │ \\
// │ Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license. │ \\
// └──────────────────────────────────────────────────────────────────────────────────────┘ \\

// ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ "Raphaël 2.1.0" - JavaScript Vector Library                         │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\

// ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël - JavaScript Vector Library                                 │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ SVG Module                                                          │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\

// ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël - JavaScript Vector Library                                 │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ VML Module                                                          │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\

/**
 * Small Cookies JavaScript Helper
 *
 * Source code available at http://github.com/tdd/cookies-js-helper
 *
 * Copyright (c) 2010 Christophe Porteneuve <tdd@tddsworld.com>
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

/*!
 * Socialite v2.0
 * http://socialitejs.com
 * Copyright (c) 2011 David Bushell
 * Dual-licensed under the BSD or MIT licenses: http://socialitejs.com/license.txt
 */

/*  Author:
	sk@hinderlingvolkart.com

	Copyright:
	all code is copyright 2012, hinderling volkart ag
*/

define("app/Config",["jquery"],function(e){var t={content_url:"text.html",dummy_image:{"default":"../img/photo/landscape.png",video:"../img/photo/video.png"},waypoints:[{name:"Italien",route:0,zoom:5,label:"up",id:"italy",country:!0},{name:"Venedig, Italien",lng:12.3367,lat:45.4369,zoom:13,id:"italy-1",stat:{temperature:27,altitude:3,distance:0}},{name:"Türkei",route:.45,zoom:5,label:"down",id:"turkey",country:!0},{name:"Istanbul, Türkei",lng:28.959858,lat:41.016174,zoom:7,id:"turkey-1",stat:{temperature:24,altitude:94,distance:1744}},{name:"Georgien",route:.7,zoom:5,label:"up",id:"georgia",country:!0},{name:"Wardzia, Georgien",lng:43.28,lat:41.38,zoom:9,id:"georgia-1",stat:{temperature:22,altitude:1317,distance:3205}},{name:"Chorvila, Georgien",lng:43.4286,lat:42.2782,zoom:8,id:"georgia-2",stat:{temperature:26,altitude:608,distance:3274}},{name:"Gori, Georgien",lng:44.1094,lat:41.9841,zoom:9,id:"georgia-3",stat:{temperature:27,altitude:597,distance:3357}},{name:"Aserbaidschan",route:1,zoom:5,label:"down",id:"azerbaijan",country:!0},{name:"Shaki, Aserbaidschan",lng:47.167397,lat:41.199066,zoom:7,id:"azerbaijan-1",stat:{temperature:22,altitude:595,distance:3707}},{name:"Baku, Aserbaidschan",lng:49.862083,lat:40.433884,zoom:7,id:"azerbaijan-2",stat:{temperature:28,altitude:29,distance:4003}},{name:"Kasachstan",route:.5,zoom:4,label:"up",id:"kazakhstan",country:!0},{name:"Aktau, Kasachstan",lng:51.146797,lat:43.659428,zoom:7,id:"kazakhstan-1",stat:{temperature:30,altitude:5,distance:4393}},{name:"Astana, Kasachstan",lng:71.457031,lat:51.167721,zoom:7,id:"kazakhstan-3",stat:{temperature:25,altitude:353,distance:6976}},{name:"Turkmenistan",lng:58.377,lat:37.954,zoom:7,label:"up",id:"turkmenistan",country:!0,stat:{temperature:35,altitude:137,distance:8482}},{name:"Usbekistan",lng:66.95372,lat:39.662537,zoom:5,label:"up",id:"uzbekistan",country:!0,stat:{temperature:35,altitude:244,distance:9451}},{name:"Tadschikistan",lng:70.993652,lat:39.078907,zoom:6,label:"down",id:"tajikistan",country:!0,stat:{temperature:30,altitude:3109,distance:10454}},{name:"Kirgistan",route:.3,zoom:5.5,label:"up",id:"kyrgyzstan",country:!0},{name:"Bishkek, Kirgistan",lng:74.59491,lat:42.871815,zoom:7,id:"kyrgistan-1",stat:{temperature:32,altitude:764,distance:11949}},{name:"China",route:4,zoom:3,label:"up",id:"china",country:!0},{name:"Kashgar, China",lng:76.166565,lat:39.512516,zoom:7,id:"china-1",stat:{temperature:31,altitude:1298,distance:12345}},{name:"Khotan, China",lng:80.007111,lat:37.147182,zoom:7,id:"china-2",stat:{temperature:30,altitude:1391,distance:12863}},{name:"Dunhuang, China",lng:94.338776,lat:40.283714,zoom:7,id:"china-3",stat:{temperature:29,altitude:1143,distance:14598}},{name:"Lanzhou, China",lng:103.8733,lat:36.0513,zoom:7,id:"china-5",stat:{temperature:20,altitude:1572,distance:15971}},{name:"Xi'an, China",lng:108.94239,lat:34.26516,zoom:7,id:"china-6",stat:{temperature:24,altitude:412,distance:16697}}],routePath:[{cmd:"M",numbers:[-218.18817470171427,-20.890409657637974]},{cmd:"C",numbers:[-210.80438560171427,-34.361112757637976,-194.17938560171427,-5.611112757637974,-142.66943176736493,6.690800167512066]},{cmd:"C",numbers:[-83.53661926736493,20.812870467512067,-77.05663876736493,14.057011067512065,-77.61325396520624,4.494120587028647]},{cmd:"C",numbers:[-77.80466016520624,1.2021283870286466,-78.46091016520624,-0.7978716129713534,-76.93816652393639,-0.9822079329187545]},{cmd:"C",numbers:[-76.20525632393638,-1.0705868329187544,-75.4127759239364,-0.03152433291875456,-73.84530293028558,.8194037822393057]},{cmd:"C",numbers:[-69.33553733028559,3.2647162822393057,-65.67928733028559,3.5772162822393057,-59.95287109892047,5.588075742951332]},{cmd:"C",numbers:[-54.39134769892047,7.540712442951333,-48.80638669892047,11.759462442951332,-47.710955373714114,10.1814178007686]},{cmd:"C",numbers:[-46.335955373714114,8.2019256007686,-53.26368977371411,-0.7472930992314009,-41.87452006399985,-9.558263466885819]},{cmd:"S",numbers:[43.554679136000146,-66.33951346688582,50.39455061333342,-60.0866299455281]},{cmd:"S",numbers:[-16.5656738,17.1374512,-9.02782260012691,24.72071931567484]},{cmd:"C",numbers:[-2.52293930012691,31.264664615674842,20.28614219987309,16.86866851567484,29.936080221460543,14.759165523594788]},{cmd:"S",numbers:[42.59184192146054,21.23670462359479,48.289427171555644,18.188984953666022]},{cmd:"S",numbers:[59.3952637,-4.723877,64.6498851027302,-4.644408164412198]},{cmd:"S",numbers:[69.97947490273019,6.491334035587801,71.78988882082558,15.643538091133792]},{cmd:"S",numbers:[75.32992792082558,32.936995091133795,89.23742833777783,29.344023744588526]},{cmd:"S",numbers:[128.45178383777784,10.044219044588527,154.34595494603172,11.076715269318811]},{cmd:"S",numbers:[188.98853304603173,28.55571916931881,197.66114613638115,35.54553942015127]},{cmd:"S",numbers:[214.02149773638115,44.65296132015127,220.68994154463508,45.471430560473436]}]},n=e.extend({},t,window.sf_seidenstrasse_config);return{get:function(e){return n[e]},set:function(e,t){n[e]=t}}}),define("util/HTMLLoader",["jquery"],function(e){var t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,n=/<body\b[^>]*>([\s\S]*?)<\/body>/gmi,r={ignoreInlineScript:!1},i=function(t){this.options=e.extend({},r,t),this.loading=!1};return i.prototype.load=function(t,n,r){var i=this;r=r||{},r.success=function(e){i.handleSuccess(e,n)},this.loading=!0,this.xhr=e.ajax(t,r)},i.prototype.isLoading=function(){return this.loading},i.prototype.handleSuccess=function(r,i){var s=e('<div id="#body">'),o=r;o.indexOf("<body")>=0&&(o=r.match(n)[0]),!this.options.ignoreInlineScript&&o.indexOf("<script")&&(o=o.replace(t,"")),i&&i(o,r),this.xhr=null,this.loading=!1},i.prototype.cancel=function(){this.xhr&&(this.xhr.abort(),this.xhr=null,this.loading=!1)},i.prototype.dispose=function(){this.cancel()},i}),define("hv/animation/AnimationFrame",[],function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];return window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),{request:function(){return requestAnimationFrame.apply(null,arguments)},cancel:function(){return cancelAnimationFrame.apply(null,arguments)}}}),define("util/Timer",["hv/animation/AnimationFrame"],function(e){function s(){return(new Date).getTime()}function o(){var e,n=s();for(var r in t)e=t[r],n>=e.time+e.delay&&(e.repeat?(e.repeat--,e.repeat===0?p.remove(r):e.time+=e.delay):a(r),e.callback&&e.callback())}function u(e,r,i){return n++,t[n]=new d(e,r,i||0),l(),n}function a(e){delete t[e],f()||c()}function f(){for(var e in t)return!0;return!1}function l(){r||(i=e.request(h),"ontouchstart"in window&&document.addEventListener("touchmove",o,!1),r=!0)}function c(){r&&(e.cancel(i),"ontouchstart"in window&&document.removeEventListener("touchmove",o,!1),r=!1)}function h(){o(),i=e.request(h)}function d(e,t,n){this.time=s(),this.delay=t,this.end=this.time+this.delay,this.callback=e,this.repeat=n}var t={},n=0,r=!1,i,p={add:u,interval:function(e,t,n){return u(e,t,n||-1)},remove:a,tick:o};return p}),define("util/PositionMeasure.class",["jquery","util/Timer"],function(e,t){function n(t){var n=[];return t&&t.each(function(t){var r=e(this),i=r.offset(),s=r.outerHeight();n[t]={top:i.top,bottom:i.top+s}}),n}function r(n){function i(){r.check()}function s(){clearTimeout(r.interval),r.interval=setTimeout(function(){r.check()},200)}n||(n={});var r=this;n.duration>=0&&(this.interval=t.interval(i,n.duration||1e3));if(n.duration<0||n.duration>=5e3)e(window).load(s),e(window).resize(s);this.elems={},this.pos={}}return r.prototype={add:function(t,n){this.elems[t]=e(n),this.pos[t]=[]},get:function(e){return this.pos[e]},elements:function(e){return this.elems[e]},check:function(){for(var e in this.elems)this.pos[e]=n(this.elems[e])}},r}),define("hv/graphic/Window",["jquery"],function(e){function o(){n=t.width(),r=t.height()}function u(){i=t.scrollTop(),s=t.scrollLeft()}var t=e(window),n,r,i,s;t.resize(o),t.scroll(u),o(),u();var a={width:function(){return n},height:function(){return r},scrollTop:function(){return i},scrollLeft:function(){return s},resize:function(){t.resize.apply(t,arguments)}};return a}),define("util/SFAnalytics",[],function(){function s(e){return $('meta[name="'+e+'"]').attr("content")}function o(e){function t(){var t="http://sftv.wemfbox.ch/cgi-bin/ivw/CP/";e.indexOf(t)>-1&&(t="");var n=new Image;n.src=t+[r,i,e].join("/")+"?d="+Math.random()*1e3}setTimeout(t,0)}var e="WT.sp",t="WT.cg_n",n="WT.cg_s",r=s(e),i=s(t),u={trackChapter:function(s){o(s),window.dcsMultiTrack&&dcsMultiTrack(e,r,t,i,n,s)}};return u}),define("app/Analytics",["util/SFAnalytics"],function(e){var t="srf_dok",n,r=!0,i={trackCountry:function(e){e!==n&&(n=e,r&&console.log("Analytics - changing country to "+n))},trackReport:function(e){},trackMedia:function(i){e.trackChapter([t,n,i].join("_")),r&&console.log("Analytics - tracking media "+[t,n,i].join("_"))}};return i}),define("app/StoryProgress",["jquery","util/Timer","util/PositionMeasure.class","hv/graphic/Window","app/Analytics"],function(e,t,n,r,i){function h(r){r&&r.onCountryChange&&(c.onCountryChange=r.onCountryChange),r&&r.onReportChange&&(c.onReportChange=r.onReportChange),f=e(".content-navigation > .selected").text(),o=new n({duration:s?5e3:2500}),o.add("reports",e(".report")),o.add("countries",e(".country")),o.check(),e(window).scroll(function(){v()});var i=0;e(document).on("touchmove",function(t){var n=e(t.target);if(n.parents(".lightbox").length===0){var r=(new Date).getTime();r-i>500&&(i=r,v())}}),l=e(".content-navigation"),s?l.children(".selected").on("touchstart",p):(l.children(".selected").on("mouseenter",function(){l.addClass("open")}),l.on("mouseleave",function(){e(this).removeClass("open")})),t.interval(v,s?2e3:1e3)}function p(t){t.preventDefault(),l.addClass("open"),e(document).on("touchstart.contentnavigation",d),l.find("a").on("click",d)}function d(t){var n=e(t.target);if(t.currentTarget!=document||!n.is(".content-navigation")&&!n.parents(".content-navigation").length)l.removeClass("open"),e(document).off("touchstart.contentnavigation",d),l.off("touchend.contentnavigation",d)}function v(){var e=y("countries");e!=u&&(m(e,a),u=e),e=y("reports"),e!=a&&(g(e,a),a=e)}function m(t,n){var r=Math.round(t),s=Math.round(n);if(r!=s){var o=e(".content-navigation").first(),u=o.find(".content > li"),a=r>=0?u.eq(r).children("a").text():f;i.trackCountry(a.toLowerCase()),u.removeClass("selected").eq(r).addClass("selected"),o.children(".selected").text(a)}c.onCountryChange&&c.onCountryChange(t,n)}function g(e,t){c.onReportChange&&c.onReportChange(e,t);var n=Math.round(e),r=Math.round(t);n!=r&&i.trackReport(n)}function y(e){var t=r.scrollTop(),n=t,i=t+r.height(),s=o.get(e),u=o.elements(e),a,f,l,c,h;for(var p=s.length-1;p>=0;p--){f=s[p].top,l=u[p];if(f<=n&&(!h||c>=i))return p;if(p===0)return t/f-1;if(f>n&&f<i)return p-(f-n)/(i-n)}return-1}var s="ontouchstart"in window,o,u=-2,a=-2,f,l,c={init:h,onCountryChange:null,onReportChange:null};return c});var buzz={defaults:{autoplay:!1,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),sound:function(e,t){function o(e){var t=[],n=e.length-1;for(var r=0;r<=n;r++)t.push({start:e.start(n),end:e.end(n)});return t}function u(e){return e.split(".").pop()}function a(e,t){var n=document.createElement("source");n.src=t,buzz.types[u(t)]&&(n.type=buzz.types[u(t)]),e.appendChild(n)}t=t||{};var n=0,r=[],i={},s=buzz.isSupported();this.load=function(){return s?(this.sound.load(),this):this},this.play=function(){return s?(this.sound.play(),this):this},this.togglePlay=function(){return s?(this.sound.paused?this.sound.play():this.sound.pause(),this):this},this.pause=function(){return s?(this.sound.pause(),this):this},this.isPaused=function(){return s?this.sound.paused:null},this.stop=function(){return s?(this.setTime(this.getDuration()),this.sound.pause(),this):this},this.isEnded=function(){return s?this.sound.ended:null},this.loop=function(){return s?(this.sound.loop="loop",this.bind("ended.buzzloop",function(){this.currentTime=0,this.play()}),this):this},this.unloop=function(){return s?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return s?(this.sound.muted=!0,this):this},this.unmute=function(){return s?(this.sound.muted=!1,this):this},this.toggleMute=function(){return s?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return s?this.sound.muted:null},this.setVolume=function(e){return s?(e<0&&(e=0),e>100&&(e=100),this.volume=e,this.sound.volume=e/100,this):this},this.getVolume=function(){return s?this.volume:this},this.increaseVolume=function(e){return this.setVolume(this.volume+(e||1))},this.decreaseVolume=function(e){return this.setVolume(this.volume-(e||1))},this.setTime=function(e){return s?(this.whenReady(function(){this.sound.currentTime=e}),this):this},this.getTime=function(){if(!s)return null;var e=Math.round(this.sound.currentTime*100)/100;return isNaN(e)?buzz.defaults.placeholder:e},this.setPercent=function(e){return s?this.setTime(buzz.fromPercent(e,this.sound.duration)):this},this.getPercent=function(){if(!s)return null;var e=Math.round(buzz.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(e)?buzz.defaults.placeholder:e},this.setSpeed=function(e){if(!s)return this;this.sound.playbackRate=e},this.getSpeed=function(){return s?this.sound.playbackRate:null},this.getDuration=function(){if(!s)return null;var e=Math.round(this.sound.duration*100)/100;return isNaN(e)?buzz.defaults.placeholder:e},this.getPlayed=function(){return s?o(this.sound.played):null},this.getBuffered=function(){return s?o(this.sound.buffered):null},this.getSeekable=function(){return s?o(this.sound.seekable):null},this.getErrorCode=function(){return s&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!s)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return s?this.sound.readyState:null},this.getStateMessage=function(){if(!s)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return s?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!s)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=function(e,t){return s?(this.sound[e]=t,this):this},this.get=function(e){return s?e?this.sound[e]:this.sound:null},this.bind=function(e,t){if(!s)return this;e=e.split(" ");var n=this,i=function(e){t.call(n,e)};for(var o=0;o<e.length;o++){var u=e[o],a=u;u=a.split(".")[0],r.push({idx:a,func:i}),this.sound.addEventListener(u,i,!0)}return this},this.unbind=function(e){if(!s)return this;e=e.split(" ");for(var t=0;t<e.length;t++){var n=e[t],i=n.split(".")[0];for(var o=0;o<r.length;o++){var u=r[o].idx.split(".");if(r[o].idx==n||u[1]&&u[1]==n.replace(".",""))this.sound.removeEventListener(i,r[o].func,!0),delete r[o]}}return this},this.bindOnce=function(e,t){if(!s)return this;var r=this;i[n++]=!1,this.bind(n+e,function(){i[n]||(i[n]=!0,t.call(r)),r.unbind(n+e)})},this.trigger=function(e){if(!s)return this;e=e.split(" ");for(var t=0;t<e.length;t++){var n=e[t];for(var i=0;i<r.length;i++){var o=r[i].idx.split(".");if(r[i].idx==n||o[0]&&o[0]==n.replace(".","")){var u=document.createEvent("HTMLEvents");u.initEvent(o[0],!1,!0),this.sound.dispatchEvent(u)}}}return this},this.fadeTo=function(e,t,n){function u(){o.fadeTimer=setTimeout(function(){r<e&&o.volume<e?(o.setVolume(o.volume+=1),u()):r>e&&o.volume>e?(o.setVolume(o.volume-=1),u()):(o.isFading=!1,n instanceof Function&&n.apply(o))},i)}if(!s)return this;this.stopFades(),this.isFading=!0,t instanceof Function?(n=t,t=buzz.defaults.duration):t=t||buzz.defaults.duration;var r=this.volume,i=t/Math.abs(r-e),o=this;return this.play(),this.whenReady(function(){o.isFading&&u()}),this},this.stopFades=function(){clearTimeout(this.fadeTimer),this.isFading&&(this.isFading=!1)},this.fadeIn=function(e,t){return s?this.setVolume(0).fadeTo(100,e,t):this},this.fadeOut=function(e,t){return s?this.fadeTo(0,e,t):this},this.fadeWith=function(e,t){return s?(this.fadeOut(t,function(){this.stop()}),e.play().fadeIn(t),this):this},this.whenReady=function(e){if(!s)return null;var t=this;this.sound.readyState===0?this.bind("canplay.buzzwhenready",function(){e.call(t)}):e.call(t)};if(s){for(var f in buzz.defaults)buzz.defaults.hasOwnProperty(f)&&(t[f]=t[f]||buzz.defaults[f]);this.sound=document.createElement("audio");if(e instanceof Array)for(var l in e)e.hasOwnProperty(l)&&a(this.sound,e[l]);else if(t.formats.length)for(var c in t.formats)t.formats.hasOwnProperty(c)&&a(this.sound,e+"."+t.formats[c]);else a(this.sound,e);t.loop&&this.loop(),t.autoplay&&(this.sound.autoplay="autoplay"),t.preload===!0?this.sound.preload="auto":t.preload===!1?this.sound.preload="none":this.sound.preload=t.preload,this.setVolume(t.volume),buzz.sounds.push(this)}},group:function(e){function t(){var t=n(null,arguments),r=t.shift();for(var i=0;i<e.length;i++)e[i][r].apply(e[i],t)}function n(e,t){return e instanceof Array?e:Array.prototype.slice.call(t)}e=n(e,arguments),this.getSounds=function(){return e},this.add=function(t){t=n(t,arguments);for(var r=0;r<t.length;r++)e.push(t[r])},this.remove=function(t){t=n(t,arguments);for(var r=0;r<t.length;r++)for(var i=0;i<e.length;i++)if(e[i]==t[r]){delete e[i];break}},this.load=function(){return t("load"),this},this.play=function(){return t("play"),this},this.togglePlay=function(){return t("togglePlay"),this},this.pause=function(e){return t("pause",e),this.stopFades(),this},this.stop=function(){return t("stop"),this.stopFades(),this},this.mute=function(){return t("mute"),this.stopFades(),this},this.unmute=function(){return t("unmute"),this},this.toggleMute=function(){return t("toggleMute"),this},this.setVolume=function(e){return t("setVolume",e),this},this.increaseVolume=function(e){return t("increaseVolume",e),this},this.decreaseVolume=function(e){return t("decreaseVolume",e),this},this.loop=function(){return t("loop"),this},this.unloop=function(){return t("unloop"),this},this.setTime=function(e){return t("setTime",e),this},this.setduration=function(e){return t("setduration",e),this},this.set=function(e,n){return t("set",e,n),this},this.bind=function(e,n){return t("bind",e,n),this},this.unbind=function(e){return t("unbind",e),this},this.bindOnce=function(e,n){return t("bindOnce",e,n),this},this.trigger=function(e){return t("trigger",e),this},this.fade=function(e,n,r,i){return t("fade",e,n,r,i),this},this.fadeIn=function(e,n){return t("fadeIn",e,n),this},this.fadeOut=function(e,n){return t("fadeOut",e,n),this}},all:function(){return new buzz.group(buzz.sounds)},isSupported:function(){return!!buzz.el.canPlayType},isOGGSupported:function(){return!!buzz.el.canPlayType&&buzz.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!buzz.el.canPlayType&&buzz.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!buzz.el.canPlayType&&buzz.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!buzz.el.canPlayType&&(buzz.el.canPlayType("audio/x-m4a;")||buzz.el.canPlayType("audio/aac;"))},toTimer:function(e,t){var n,r,i;return n=Math.floor(e/3600),n=isNaN(n)?"--":n>=10?n:"0"+n,r=t?Math.floor(e/60%60):Math.floor(e/60),r=isNaN(r)?"--":r>=10?r:"0"+r,i=Math.floor(e%60),i=isNaN(i)?"--":i>=10?i:"0"+i,t?n+":"+r+":"+i:r+":"+i},fromTimer:function(e){var t=e.toString().split(":");return t&&t.length==3&&(e=parseInt(t[0],10)*3600+parseInt(t[1],10)*60+parseInt(t[2],10)),t&&t.length==2&&(e=parseInt(t[0],10)*60+parseInt(t[1],10)),e},toPercent:function(e,t,n){var r=Math.pow(10,n||0);return Math.round(e*100/t*r)/r},fromPercent:function(e,t,n){var r=Math.pow(10,n||0);return Math.round(t/100*e*r)/r}};define("libs/buzz",function(e){return function(){return e.buzz}}(this)),define("app/BackgroundAudio",["jquery","libs/buzz"],function(e){function u(){e(document).on("click",".audio-button",function(t){t.preventDefault(),s=!s,s&&!r?p():v(null),s?e(".audio-button").removeClass("off"):e(".audio-button").addClass("off")}),t=[],e("section.country").each(function(n,r){var i=e(this),s=this.id,u=i.children(".background-audio").attr(o?"data-ogg":"href"),a;t.push({id:s,src:u,snd:a})})}function a(e){return t[e]}function f(){return a(n)}function l(){var e=a(n);return e&&!e.snd&&(e.snd=new buzz.sound(e.src,{preload:!1,autoplay:!1,loop:!0}),e.snd.load(),e.snd.setVolume(0)),e?e.snd:null}function c(e){e=Math.floor(e+.2),n!=e&&(n=e,!r&&s&&v(l()))}function h(){r=!0,v(null)}function p(){var e=l();r=!1,s&&v(e)}function d(){v(null)}function v(e){i!=e&&(m(i),i=e,g(i))}function m(e){if(!e||e.isPaused())return;e.fadeTo(0,3e3,function(){e.pause()})}function g(e){if(!e)return;e.fadeTo(100,3e3)}var t,n=-1,r=!1,i,s=!0,o=buzz.isOGGSupported()&&!e.browser.safari;return{init:u,setCountry:c,mute:h,unmute:p,stop:d}}),define("app/MediaReplacer",["jquery","app/BackgroundAudio","hv/graphic/Window","app/Analytics"],function(e,t,n,r){function i(){return!!document.createElement("video").canPlayType}function s(){var e=document.createElement("audio");return!!e.canPlayType&&!!e.canPlayType("audio/mpeg;").replace(/no/,"")}function o(){if(!i())return!1;var e=document.createElement("video");return e.canPlayType("video/mp4").replace(/no/,"")}function c(n){e(document).on("click",n,function(n){n.preventDefault();var i=e(n.currentTarget),s=i.attr("href"),o=i.find("img"),u=o.attr("src"),c,p,d,v;d=h(s,u,o.height()),c=e('<figure class="video large landscape"></figure>');if(a){var m=document.createElement("video"),g=c[0];g.appendChild(m),m.controls=!0,m.poster=u,m.src=s,m.play()}else p=e(d),v=i.find("img").height(),p.attr("height",v),c.append(p);i.css("display","none"),i.after(c),f.push(c),l.push(i),t.stop(),r.trackMedia("video")})}function h(e,t,n){var r;return a?r='<video src="'+e+'" poster="'+t+'" controls></video>':(r='<object type="application/x-shockwave-flash" data="http://flashfox.googlecode.com/svn/trunk/flashfox.swf" width="100%" height="100%">',r+='<param name="movie" value="http://flashfox.googlecode.com/svn/trunk/flashfox.swf">',r+='<param name="allowFullScreen" value="true">',r+='<param name="wmode" value="transparent">',r+='<param name="flashVars" value="controls=true&amp;autoplay=true&amp;poster='+t+"&amp;src="+e+'">',r+="</object>"),r}function p(e){var t=f[e],n=l[e];f.splice(e,1),l.splice(e,1),t.remove(),n.css("display","block")}function d(n){e(document).on("click",n,function(n){if(!u)return;n.preventDefault();var i=e(n.currentTarget),s=i.attr("href"),o=i.find("article"),a=e('<audio src="'+s+'" autoplay controls></audio>');o.append(a),o.addClass("country-intro"),o.unwrap(),t.stop(),r.trackMedia("audio")})}function v(){var e,t,r,i=2e3,s,o;f.length&&(o=(new Date).getTime(),e=n.scrollTop(),t=e-250,r=e+n.height()+250);for(var u=f.length-1;u>=0;u--){s=f[u];var a=s.offset().top,l=a+s.height(),c=s.data("outtime");l<t||a>r?c?(c=o-c,c>i&&p(u)):s.data("outtime",o):s.removeData("outtime")}}var u=s(),a=o(),f=[],l=[],m={init:function(){d(".audio-link"),c(".video-link"),e(window).scroll(v)},initVideo:c,initAudio:d,getVideoHTML:h};return m}),define("app/PeterGyslin",["jquery","app/BackgroundAudio","app/Analytics"],function(e,t,n){function p(){f=e("#petergyslin"),r=[],e("section.country").each(function(t,n){var i=e(this),s=this.id,o=i.children("h1").text(),u=i.find(".country-intro").attr(h?"data-ogg":"href");r.push({id:s,name:o,src:u})}),f.on("click",".interactive",function(e){s?(y(),l&&(l.currentTime=Math.max(0,l.currentTime-1))):i>=0?g():v(0)}),f.on("click",".start",function(t){var n=parseInt(e(this).attr("data-next"),10);n==i?(y(),g()):v(n)}),f.on("click",".close",function(){f.find(".message").fadeOut()})}function d(e){if(a)return;e=Math.round(e),i<0&&e>=0&&f.find(".intro").fadeOut(),i>=0&&e<0&&f.find(".intro").fadeIn(),i!=e&&(i=e,o=!1,s&&i!=u?w(i):s&&E())}function v(t){var n=r[t],i=e("#"+n.id).offset();y(),u=t,a=!0,e("html,body").animate({scrollTop:i.top},500,function(){d(t),a=!1,g()})}function m(){var e=r[i];l.src=e.src,o=!0}function g(){o||m(),u=i,t.mute(),l.play(),s=!0,f.addClass("playing"),E(),n.trackMedia("audio")}function y(e){e||(e={}),l.pause(),t.unmute(),s=!1,u=-1,f.removeClass("playing")}function b(){s=!1,t.unmute(),f.removeClass("playing"),w(i+1)}function w(e){if(e<0||e>=r.length)return;var t=f.find(".message"),n=r[e];t.find(".start").attr("data-next",e),t.children("p").text("Mit Peter Gysling weiter nach: "+n.name),t.fadeIn()}function E(){f.find(".message").hide()}var r,i=-1,s,o,u,a=!1,f,l=document.createElement("audio");l.autoplay=!0,l.preload=!0,l.addEventListener("ended",b,!1);var c=l.canPlayType("audio/mpeg"),h=l.canPlayType('audio/ogg; codecs="vorbis"')&&!e.browser.safari;return{init:p,setCountry:d}}),define("util/LazyImage.class",["jquery","util/Timer","util/PositionMeasure.class","hv/graphic/Window"],function(e,t,n,r){var i={IMGSRC:/(<img[^>]+)(src="[^"]+")/gim,VIDSRC:/(<video[^>]+)(poster="[^"]+")/gim,SRCREPLACE:"$1data-$2",selector:"img, video",image:{"default":"../img/photo/landscape.png",video:"../img/photo/video.png"}},s="ontouchstart"in window,o=function(t){this.options=e.extend({},i,t)};return o.prototype.addImageType=function(e,t){this.options.image[e]=t},o.prototype.prepareHTML=function(e){var t=e;return t=t.replace(this.options.IMGSRC,this.options.SRCREPLACE),t=t.replace(this.options.VIDSRC,this.options.SRCREPLACE),t},o.prototype.prepareDOM=function(t){var n=this.options,r=e(t).find(this.options.selector);r.each(function(t,r){var i=e(this),s=i.is("video"),o=s?"poster":"src",u=i.attr("data-dummy")||"default";i.attr(o,n.image[u])}),this.images=r},o.prototype.start=function(){var r=this;this._checkImages=function(){r.checkImages()},this.positions=new n({duration:s?1e4:5e3}),this.positions.add("images",this.images),this.positions.check(),e(window).scroll(this._checkImages);var i=0;e(document).on("touchmove",function(t){var n=e(t.target);if(n.parents(".lightbox").length===0){var s=(new Date).getTime();s-i>500&&(i=s,r.checkImages())}}),t.interval(this._checkImages,s?500:1e3)},o.prototype.checkImages=function(){var n=this,i=r.scrollTop(),s=r.height(),o=500,u=this.options,a=i-s*2,f=i+3*s,l=this.positions.get("images"),c=this.images;l&&l.length==c.length&&c.each(function(n){var r=this,i=e(this),s=l[n],c=s.bottom>=a&&s.top<f,h=i.data("viewtime"),p=e(r).data("dummy")=="video",d=e(r).is("video")?"poster":"src";if(c)h||(h=t.add(function(){r.src=i.attr("data-"+d)},o),i.data("viewtime",h));else{var v=u.image[p?"video":"default"];r.src!=v&&r.getAttribute("src")!=v&&(r.src=v),h&&(t.remove(h),i.removeData("viewtime"))}})},o}),define("map/GlobalMercator.class",[],function(){function e(e){this.init()}return e.prototype.init=function(e){this.tileSize=e||256,this.initialResolution=2*Math.PI*6378137/this.tileSize,this.originShift=2*Math.PI*6378137/2},e.prototype.LatLonToMeters=function(e,t){var n=t*this.originShift/180,r=Math.log(Math.tan((90+e)*Math.PI/360))/(Math.PI/180);return r=r*this.originShift/180,{x:n,y:r}},e.prototype.MetersToLatLon=function(e,t){var n=e/this.originShift*180,r=t/this.originShift*180;return r=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),{lat:r,lng:n}},e.prototype.PixelsToMeters=function(e,t,n){var r=this.Resolution(n),i=e*r-this.originShift,s=t*r-this.originShift;return{x:i,y:s}},e.prototype.MetersToPixels=function(e,t,n){var r=this.Resolution(n),i=(e+this.originShift)/r,s=(t+this.originShift)/r;return{x:i,y:s}},e.prototype.LatLonToPixels=function(e,t,n){var r=this.LatLonToMeters(e,t),i=this.MetersToPixels(r.x,r.y,n);return i},e.prototype.PixelsToLatLon=function(e,t,n){var r=this.PixelsToMeters(e,t,n),i=this.MetersToLatLon(r.x,r.y);return i},e.prototype.PixelsToTile=function(e,t){var n=int(Math.ceil(e/float(this.tileSize))-1),r=int(Math.ceil(t/float(this.tileSize))-1);return{x:n,y:r}},e.prototype.PixelsToRaster=function(e,t,n){var r=this.tileSize<<n;return{x:e,y:r-t}},e.prototype.MetersToTile=function(e,t,n){var r=this.MetersToPixels(e,t,n);return this.PixelsToTile(r.x,r.y)},e.prototype.TileBounds=function(e,t,n){var r=this.PixelsToMeters(e*this.tileSize,t*this.tileSize,n),i=this.PixelsToMeters((e+1)*this.tileSize,(t+1)*this.tileSize,n);return[r.x,r.y,i.x,i.y]},e.prototype.TileLatLonBounds=function(e,t,n){var r=this.TileBounds(e,t,n),i=this.MetersToLatLon(r[0],r[1]),s=this.MetersToLatLon(r[2],r[3]);return[i.lat,i.lng,s.lat,s.lng]},e.prototype.Resolution=function(e){return this.initialResolution/Math.pow(2,e)},e.prototype.ZoomForPixelSize=function(e){for(var t=0;t<30;t++)if(e>this.Resolution(t))return t!==0?t-1:0},e.prototype.GoogleTile=function(e,t,n){return{x:e,y:Math.pow(2,n-1)-t}},e.prototype.QuadTree=function(e,t,n){var r,i,s="";t=Math.pow(2,n-1)-t;for(var o=n;o>=0;o--)r=0,i=1<<o-1,(e&i)!==0&&(r+=1),(t&i)!==0&&(r+=2),s+=""+r;return s},e}),define("util/EventDispatcher",[],function(){function e(){this.eventListeners={}}return e.prototype.addEventListener=function(e,t,n){return typeof this.eventListeners[e]=="undefined"&&(this.eventListeners[e]=[]),typeof n=="undefined"?this.eventListeners[e].push(t):this.eventListeners[e][n]=t,this},e.prototype.removeEventListener=function(e,t){delete this.eventListeners[e][t]},e.prototype.removeAllEventListeners=function(e){this.eventListeners[e]=[]},e.prototype.trigger=function(e,t){for(var n in this.eventListeners[e])this.eventListeners[e][n](t)},e}),define("hv/animation/Tween",["./AnimationFrame"],function(e){var t={looping:!1,frameRate:60,objects:[],defaultOptions:{time:1,transition:"linear",delay:0,prefix:{},suffix:{},onStart:undefined,onStartParams:undefined,onUpdate:undefined,onUpdateParams:undefined,onComplete:undefined,onCompleteParams:undefined},inited:!1,easingFunctionsLowerCase:{},init:function(){this.inited=!0;for(var e in t.easingFunctions)this.easingFunctionsLowerCase[e.toLowerCase()]=t.easingFunctions[e]},toNumber:function(e,t,n){return n||(n="px"),e?e.toString().match(/[0-9]/)?Number(e.toString().replace(new RegExp(n+"$"),"").replace(new RegExp("^"+(t?t:"")),"")):0:0},addTween:function(e,t){function o(){r.startTime=new Date-0,r.endTime=r.time*1e3+r.startTime,typeof r.onStart=="function"&&(r.onStartParams?r.onStart.apply(r,r.onStartParams):r.onStart()),n.objects.push(r),n.looping||(n.looping=!0,n.eventLoop.call(n))}var n=this;this.inited||this.init();var r={};r.target=e,r.targetPropeties={};for(var i in this.defaultOptions)typeof t[i]!="undefined"?(r[i]=t[i],delete t[i]):r[i]=this.defaultOptions[i];typeof r.transition=="function"?r.easing=r.transition:r.easing=this.easingFunctionsLowerCase[r.transition.toLowerCase()];for(var i in t){r.prefix[i]||(r.prefix[i]=""),r.suffix[i]||(r.suffix[i]="");var s=this.toNumber(e[i],r.prefix[i],r.suffix[i]);r.targetPropeties[i]={b:s,c:t[i]-s}}r.delay?setTimeout(o,r.delay*1e3):o()},eventLoop:function(){var t=new Date-0;for(var n=0;n<this.objects.length;n++){var r=this.objects[n],i=t-r.startTime,s=r.endTime-r.startTime;if(i>=s){for(var o in r.targetPropeties){var u=r.targetPropeties[o];try{r.target[o]=r.prefix[o]+(u.b+u.c)+r.suffix[o]}catch(a){}}this.objects.splice(n,1),typeof r.onUpdate=="function"&&(r.onUpdateParams?r.onUpdate.apply(r,r.onUpdateParams):r.onUpdate()),typeof r.onComplete=="function"&&(r.onCompleteParams?r.onComplete.apply(r,r.onCompleteParams):r.onComplete())}else{for(var o in r.targetPropeties){var u=r.targetPropeties[o],f=r.easing(i,u.b,u.c,s);try{r.target[o]=r.prefix[o]+f+r.suffix[o]}catch(a){}}typeof r.onUpdate=="function"&&(r.onUpdateParams?r.onUpdate.apply(r,r.onUpdateParams):r.onUpdate())}}if(this.objects.length>0){var l=this;e.request(function(){l.eventLoop()})}else this.looping=!1}};return t.Utils={bezier2:function(e,t,n,r){return(1-e)*(1-e)*t+2*e*(1-e)*n+e*e*r},bezier3:function(e,t,n,r,i){return Math.pow(1-e,3)*t+3*e*Math.pow(1-e,2)*n+3*e*e*(1-e)*r+e*e*e*i},allSetStyleProperties:function(e){var t;document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,null):t=e.currentStyle;for(var n in t)if(!n.match(/^\d+$/))try{e.style[n]=t[n]}catch(r){}}},t.easingFunctions={easeNone:function(e,t,n,r){return n*e/r+t},easeInQuad:function(e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeOutInCubic:function(e,n,r,i){return e<i/2?t.easingFunctions.easeOutCubic(e*2,n,r/2,i):t.easingFunctions.easeInCubic(e*2-i,n+r/2,r/2,i)},easeInQuart:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeOutInQuart:function(e,n,r,i){return e<i/2?t.easingFunctions.easeOutQuart(e*2,n,r/2,i):t.easingFunctions.easeInQuart(e*2-i,n+r/2,r/2,i)},easeInQuint:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeOutInQuint:function(e,n,r,i){return e<i/2?t.easingFunctions.easeOutQuint(e*2,n,r/2,i):t.easingFunctions.easeInQuint(e*2-i,n+r/2,r/2,i)},easeInSine:function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeOutInSine:function(e,n,r,i){return e<i/2?t.easingFunctions.easeOutSine(e*2,n,r/2,i):t.easingFunctions.easeInSine(e*2-i,n+r/2,r/2,i)},easeInExpo:function(e,t,n,r){return e==0?t:n*Math.pow(2,10*(e/r-1))+t-n*.001},easeOutExpo:function(e,t,n,r){return e==r?t+n:n*1.001*(-Math.pow(2,-10*e/r)+1)+t},easeInOutExpo:function(e,t,n,r){return e==0?t:e==r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t-n*5e-4:n/2*1.0005*(-Math.pow(2,-10*--e)+2)+t},easeOutInExpo:function(e,n,r,i){return e<i/2?t.easingFunctions.easeOutExpo(e*2,n,r/2,i):t.easingFunctions.easeInExpo(e*2-i,n+r/2,r/2,i)},easeInCirc:function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeOutInCirc:function(e,n,r,i){return e<i/2?t.easingFunctions.easeOutCirc(e*2,n,r/2,i):t.easingFunctions.easeInCirc(e*2-i,n+r/2,r/2,i)},easeInElastic:function(e,t,n,r,i,s){var o;return e==0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},easeOutElastic:function(e,t,n,r,i,s){var o;return e==0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},easeInOutElastic:function(e,t,n,r,i,s){var o;return e==0?t:(e/=r/2)==2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},easeOutInElastic:function(e,n,r,i,s,o){return e<i/2?t.easingFunctions.easeOutElastic(e*2,n,r/2,i,s,o):t.easingFunctions.easeInElastic(e*2-i,n+r/2,r/2,i,s,o)},easeInBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){return i==undefined&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},easeOutInBack:function(e,n,r,i,s){return e<i/2?t.easingFunctions.easeOutBack(e*2,n,r/2,i,s):t.easingFunctions.easeInBack(e*2-i,n+r/2,r/2,i,s)},easeInBounce:function(e,n,r,i){return r-t.easingFunctions.easeOutBounce(i-e,0,r,i)+n},easeOutBounce:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,n,r,i){return e<i/2?t.easingFunctions.easeInBounce(e*2,0,r,i)*.5+n:t.easingFunctions.easeOutBounce(e*2-i,0,r,i)*.5+r*.5+n},easeOutInBounce:function(e,n,r,i){return e<i/2?t.easingFunctions.easeOutBounce(e*2,n,r/2,i):t.easingFunctions.easeInBounce(e*2-i,n+r/2,r/2,i)}},t.easingFunctions.linear=t.easingFunctions.easeNone,t}),window.Modernizr=function(e,t,n){function L(e){f.cssText=e}function A(e,t){return L(p.join(e+";")+(t||""))}function O(e,t){return typeof e===t}function M(e,t){return!!~(""+e).indexOf(t)}function _(e,t){for(var r in e){var i=e[r];if(!M(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function D(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:O(s,"function")?s.bind(r||t):s}return!1}function P(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return O(t,"string")||O(t,"undefined")?_(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),D(i,t,n))}function H(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)w[n[r]]=n[r]in l;return w.list&&(w.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),b[e[r]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.6.1",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={svg:"http://www.w3.org/2000/svg"},y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,a,f,l=t.createElement("div"),c=t.body,h=c?c:t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement("div"),f.id=i?i[r]:u+(r+1),l.appendChild(f);return s=["&#173;",'<style id="s',u,'">',e,"</style>"].join(""),l.id=u,(c?l:h).innerHTML+=s,h.appendChild(l),c||(h.style.background="",o.appendChild(h)),a=n(l,e),c?l.parentNode.removeChild(l):h.parentNode.removeChild(h),!!a},N=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=O(i[r],"function"),O(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),C={}.hasOwnProperty,k;!O(C,"undefined")&&!O(C.call,"undefined")?k=function(e,t){return C.call(e,t)}:k=function(e,t){return t in e&&O(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=S.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(S.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(S.call(arguments)))};return i}),y.flexbox=function(){return P("flexWrap")},y.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},y.canvastext=function(){return!!i.canvas&&!!O(t.createElement("canvas").getContext("2d").fillText,"function")},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",p.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=e.offsetTop===9}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!P("indexedDB",e)},y.hashchange=function(){return N("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!!e.history&&!!history.pushState},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return L("background-color:rgba(150,255,150,.5)"),M(f.backgroundColor,"rgba")},y.hsla=function(){return L("background-color:hsla(120,40%,100%,.5)"),M(f.backgroundColor,"rgba")||M(f.backgroundColor,"hsla")},y.multiplebgs=function(){return L("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(f.background)},y.backgroundsize=function(){return P("backgroundSize")},y.borderimage=function(){return P("borderImage")},y.borderradius=function(){return P("borderRadius")},y.boxshadow=function(){return P("boxShadow")},y.textshadow=function(){return t.createElement("div").style.textShadow===""},y.opacity=function(){return A("opacity:.55"),/^0.55$/.test(f.opacity)},y.cssanimations=function(){return P("animationName")},y.csscolumns=function(){return P("columnCount")},y.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return L((e+"-webkit- ".split(" ").join(t+e)+p.join(n+e)).slice(0,-e.length)),M(f.backgroundImage,"gradient")},y.cssreflections=function(){return P("boxReflect")},y.csstransforms=function(){return!!P("transform")},y.csstransforms3d=function(){var e=!!P("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},y.csstransitions=function(){return P("transition")},y.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},y.generatedcontent=function(){var e;return T(['#modernizr:after{content:"',c,'";visibility:hidden}'].join(""),function(t){e=t.offsetHeight>=1}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},y.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(h.call(t.createElementNS(g.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(h.call(t.createElementNS(g.svg,"clipPath")))};for(var B in y)k(y,B)&&(x=B.toLowerCase(),i[x]=y[B](),E.push((i[x]?"":"no-")+x));return i.input||H(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)k(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},L(""),a=l=null,function(e,t){function l(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function c(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function h(e){var t=a[e[o]];return t||(t={},u++,e[o]=u,a[u]=t),t}function p(e,n,s){n||(n=t);if(f)return n.createElement(e);s||(s=h(n));var o;return s.cache[e]?o=s.cache[e].cloneNode():i.test(e)?o=(s.cache[e]=s.createElem(e)).cloneNode():o=s.createElem(e),o.canHaveChildren&&!r.test(e)?s.frag.appendChild(o):o}function d(e,n){e||(e=t);if(f)return e.createDocumentFragment();n=n||h(e);var r=n.frag.cloneNode(),i=0,s=c(),o=s.length;for(;i<o;i++)r.createElement(s[i]);return r}function v(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?p(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function m(e){e||(e=t);var n=h(e);return g.shivCSS&&!s&&!n.hasCSS&&(n.hasCSS=!!l(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),f||v(e,n),e}var n=e.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,i=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,s,o="_html5shiv",u=0,a={},f;(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,f=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){s=!0,f=!0}})();var g={elements:n.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:n.shivCSS!==!1,supportsUnknownElements:f,shivMethods:n.shivMethods!==!1,type:"default",shivDocument:m,createElement:p,createDocumentFragment:d};e.html5=g,m(t)}(this,t),i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.hasEvent=N,i.testProp=function(e){return _([e])},i.testAllProps=P,i.testStyles=T,i.prefixed=function(e,t,n){return t?P(e,t,n):P(e,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+E.join(" "):""),i}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},define("libs/modernizr.custom",[],function(){}),define("map/GraphicsUtil",["jquery","hv/animation/Tween","libs/modernizr.custom"],function(e,t){function s(e){return typeof e=="number"?e.toFixed(20):e}function o(t,i,o,u,a){var f,l;!u&&u!==0&&(u=1),u=s(u),i=s(i),o=s(o),n?(f="translate3d("+i+"px,"+o+"px,"+(a?a-1e4:0)+"px) scale3d("+u+","+u+",1)",l={transform:f}):r?(f="translate("+i+"px,"+o+"px) scale("+u+")",l={transform:f},isNaN(a)||(l.zIndex=a)):l={position:"absolute",left:i,top:o,zoom:u},e(t).css(l)}function u(){return n?i:r?{"transform-origin":"0 0"}:{}}function a(n){var r=e(n);n=r[0],r.data("hidden")||(r.data("hidden",!0),e.browser.mozilla?r.stop().css("display","none"):e.browser.safari?(n.style.opacity===""&&(n.style.opacity=1),t.addTween(n.style,{opacity:.01,time:.5})):(n.style.opacity===""&&(n.style.opacity=1),t.addTween(n.style,{opacity:0,time:.5})))}function f(n){var r=e(n);n=r[0],r.data("hidden")&&(r.data("hidden",!1),e.browser.mozilla?r.stop().css("display","block"):e.browser.safari?t.addTween(n.style,{opacity:.99,time:.5}):t.addTween(n.style,{opacity:1,time:.5}))}function l(t){var n=e(t);t=n[0],n.data("hidden")||(n.data("hidden",!0),e.browser.mozilla?n.stop().css("display","none"):e.browser.safari?t.style.opacity=.01:t.style.opacity=0)}function c(t){var n=e(t);t=n[0],n.data("hidden")&&(n.data("hidden",!1),e.browser.mozilla?n.stop().css("display","block"):e.browser.safari?t.style.opacity=.99:t.style.opacity=1)}var n=Modernizr.csstransforms3d&&!e.browser.mozilla,r=Modernizr.csstransforms,i={"transform-style":"preserve-3d","backface-visibility":"hidden","transform-origin":"0 0"};return{transform:o,getDefaultTransform:u,fadeOut:a,fadeIn:f,hide:l,show:c}}),define("map/FluidMap.class",["map/GlobalMercator.class","util/EventDispatcher","map/GraphicsUtil","libs/modernizr.custom"],function(e,t,n){function l(e,t,n,r,i,s,o,u){return!(i>n||o<e||s>r||u<t)}function c(e,t,n,i){var s="http://maps.googleapis.com/maps/api/staticmap?key={key}&center={lat},{lng}&zoom={zoom}&size={w}x{h}&scale={scale}&sensor=false&maptype=satellite&format=jpg";return s=s.replace("{lat}",e.lat),s=s.replace("{lng}",e.lng),s=s.replace("{zoom}",t),s=s.replace("{scale}",r),s=s.replace("{w}",n),s=s.replace("{h}",i),s=s.replace("{key}",a),s}function h(e,t,n,r){var s=i.LatLonToPixels(e.lat,e.lng,t);s.x+=n,s.y-=r;var o=i.PixelsToLatLon(s.x,s.y,t);return o}function p(e,t){var n=$("<img>")[0];return loadStarted=!0,n.src=e,n.complete?t&&t.apply(n):$(n).load(t),n}var r=2,i=new e,s=n.getDefaultTransform(),o=n.transform,u=!1,a="AIzaSyC6akZWmox8QKHbzRZ5k-K0j4jQx3lM6D0",f=function(){this.viewx=0,this.viewy=0,this.viewscale=1.8,this.viewportWidth=800,this.viewportHeight=600,this.waypoints=[],this.currentWaypoint=null,this.length=0,this.level=0,this.slides={},this.slidesToLoad=[],this.$container=$('<div class="map"></div>').css("position","relative"),this.$container.css(s)};$.extend(f.prototype,new t),f.prototype.setViewport=function(e,t){this.viewportWidth=e,this.viewportHeight=t},f.prototype.moveTo=function(e){},f.prototype.setOverall=function(e,t,n){var r=new v(-1,e,t,n);return this.background=r,r},f.prototype.getOverall=function(){return this.background},f.prototype.addWaypoint=function(e,t,n,r,i){var s=new v(e,t,n,r);return s.ignore=i===!1,this.waypoints.push(s),e>this.length&&(this.length=e),s},f.prototype.getWaypoint=function(e){return this.waypoints[e]},f.prototype.addSlide=function(e){this.slidesToLoad.push(e)},f.prototype.preload=function(e){function n(e,n,r,i){return r||(r=t.viewportWidth),i||(i=t.viewportHeight),function(s){var o=new d(n.lat,n.lng,n.zoom,r*1.2,i*1.2);o.real=t.getRealWorldPixel(o.lat,o.lng,o.zoom),o.real.scale=t.getRealWorldScale(o.zoom),o.real.minx=o.real.x-o.width/2,o.real.miny=o.real.x-o.height/2,o.real.maxx=o.real.x+o.width/2,o.real.maxy=o.real.x+o.height/2,o.$container.attr("id","slide-"+e),o.load(function(){t.slides[e]=o,t.positionSlide(o),t.renderSlide(o),s()})}}function r(){s++;var n=s,o=i[n];if(!o){t._handlePreloadComplete(),e.complete&&e.complete();return}o(function(){e.progress&&e.progress(n),setTimeout(r,50)})}var t=this;e=e||{},this.slides={};var i=[],s=-1,o,a,f,l;a=this.background.clone(),a.zoom+=.5,i.push(n("main",a,this.viewportWidth*2.5,this.viewportHeight*1.2));if(!u){for(o=0;o<this.waypoints.length;o++){if(this.waypoints[o].ignore)continue;a=this.waypoints[o].clone(),a.zoom-=0,i.push(n(a.id,a))}for(o=0;o<this.waypoints.length;o++){if(this.waypoints[o].ignore)continue;a=this.waypoints[o],f=this.getIntermediateWaypoint(a,.2)}for(o=0;o<this.slidesToLoad.length;o++)a=this.slidesToLoad[o],i.push(n("slide"+o,a,a.width*this.viewportWidth,a.height*this.viewportHeight))}r()},f.prototype.getSlideById=function(e){return this.slides[e]},f.prototype.getClosestSlide=function(e){var t,n=Number.MAX_VALUE;for(var r in this.slides)!t||Maththis.slides[r].p},f.prototype._handlePreloadComplete=function(){this.trigger("loadcomplete")},f.prototype.getIntermediateWaypoint=function(e,t){return new v(e.position,e.lat,e.lng,e.zoom+(this.background.zoom-e.zoom)*t)},f.prototype.getCoveringWaypoint=function(e,t){var n,r,s,o;s=e.getMeterBounds(this.viewportWidth,this.viewportHeight),o=t.getMeterBounds(this.viewportWidth,this.viewportHeight),o.minx<s.minx&&(s.minx=o.minx),o.miny<s.miny&&(s.miny=o.miny),o.maxx>s.maxx&&(s.maxx=o.maxx),o.maxy>s.maxy&&(s.maxy=o.maxy);var u=Math.log((s.maxx-s.minx)/(o.maxx-o.minx))/Math.LN2,a=Math.log((s.maxy-s.miny)/(o.maxy-o.miny))/Math.LN2,f=t.zoom-Math.max(u,a),l=i.MetersToLatLon((s.minx+s.maxx)/2,(s.miny+s.maxy)/2),c=new v((e.position+t.position)/2,l.lat,l.lng,f);return c},f.prototype.getRealWorldPixel=function(e,t){var n=i.LatLonToPixels(this.background.lat,this.background.lng,this.background.zoom),s=i.LatLonToPixels(e,t,this.background.zoom);return s.x-=n.x,s.y-=n.y,s.x*=r,s.y*=-r,s},f.prototype.pixelsToLatLon=function(e,t){var n=i.LatLonToPixels(this.background.lat,this.background.lng,this.background.zoom);e/=r,t/=-r,e+=n.x,t+=n.y;var s=i.PixelsToLatLon(e,t,this.background.zoom);return s},f.prototype.getRealWorldScale=function(e){return Math.pow(2,e-this.background.zoom)},f.prototype.positionSlide=function(e){var t=e.$container;t.css(s),t.children().css(s);var n=this.getRealWorldPixel(e.lat,e.lng),r=Math.pow(2,this.background.zoom-e.zoom);t.css({position:"absolute","z-index":Math.ceil(e.zoom)}),o(t,n.x,n.y,r,e.zoom*50),e.world={x:-n.x,y:-n.y,scale:1/r},t.appendTo(this.$container)},f.prototype.render=function(){for(var e in this.slides){var t=this.slides[e];this.positionSlide(t)}},f.prototype.moveTo=function(e,t,n){var s=i.LatLonToPixels(this.background.lat,this.background.lng,this.background.zoom),o=i.LatLonToPixels(e,t,this.background.zoom);o.x-=s.x,o.y-=s.y,o.x*=r,o.y*=r;var u=Math.pow(2,n-this.background.zoom);this.moveToPixel(-o.x,o.y,u)},f.prototype.moveToPixel=function(e,t,n){this.viewx=e,this.viewy=t,this.viewscale=n,e*=n,t*=n,o(this.$container,e,t,n);var r=Math.log(n)/Math.LN2+this.background.zoom;for(var i in this.slides){var s=this.slides[i];this.renderSlide(s)}this.trigger("mapchange",{x:e,y:t,scale:n})},f.prototype.renderSlide=function(e){var t=this.getZoom(),r=e.$container,i=t>=e.zoom-.5;i&&this.isSlideInView(e,this.viewx,this.viewy,this.viewscale)?n.fadeIn(e.$container):n.fadeOut(e.$container)},f.prototype.getZoom=function(){return Math.log(this.viewscale)/Math.LN2+this.background.zoom},f.prototype.isSlideInView=function(e,t,n,r){var i=this.viewportWidth/2/r,s=this.viewportHeight/2/r,o=e.real;return l(o.xmin,o.ymin,o.xmax,o.ymax,t-i,n-s,t+i,n+s)};var d=function(){var e=function(e,t,n,i,s){this.center={lat:this.lat,lng:this.lng},this.lat=e,this.lng=t,this.zoom=Math.floor(n);var o=Math.pow(2,this.zoom-n);this.width=i*o,this.height=s*o,this.tl=h(this.center,n,-this.width/(2*r),-this.height/(2*r)),this.br=h(this.center,n,this.width/(2*r),this.height/(2*r)),this.minLat=this.tl.lat,this.minLng=this.tl.lng,this.maxLat=this.br.lat,this.maxLng=this.br.lng,this.$container=$('<div class="slide"></div>')};return e.prototype.load=function(e){function N(e,n,r){var i=p(e,C),s=$('<div class="tile"></div>'),u=n*y*2-t.width/2,a=r*b*2-t.height/2;return s.css({overflow:"hidden",position:"absolute",border:"1px solid transparent","margin-left":-1,"margin-top":-1,width:y*2+2,height:b*2+2}),o(s,u,a,1),s.append(i),s}function C(){T--,T===0&&e&&e.apply(this)}var t=this,n={lat:this.lat,lng:this.lng},i=this.width,s=this.height,u=this.zoom,a=639,f=25,l=a-f,d=Math.ceil(i/r),v=Math.ceil(s/r),m=Math.ceil(d/a),g=Math.ceil(v/l),y=Math.ceil(d/m),b=Math.ceil(v/g),w=this.$container;w.html("");var E,S,x,T=0;T=m*g;var k,L;for(var A=0;A<m;A++)for(var O=0;O<g;O++)k=-(m-1)/2+A,L=-(g-1)/2+O,S=h(n,u,k*y,L*b+f/2),x=c(S,u,y+1,b+f),E=N(x,A,O),w.append(E)},e}(),v=function(){var e=0,t=function(t,n,r,i){this.id=++e,this.position=t,this.lat=n,this.lng=r,this.zoom=i};return t.prototype.getMeterBounds=function(e,t){e/=r,t/=r;var n=i.LatLonToPixels(this.lat,this.lng,this.zoom),s=i.PixelsToMeters(n.x-e/2,n.y+t/2,this.zoom),o=i.PixelsToMeters(n.x+e/2,n.y-t/2,this.zoom);return{minx:s.x<o.x?s.x:o.x,miny:s.y<o.y?s.y:o.y,maxx:s.x>o.x?s.x:o.x,maxy:s.y>o.y?s.y:o.y}},t.prototype.clone=function(){return new t(this.position,this.lat,this.lng,this.zoom)},t}();return f}),define("hv/animation/Easing",[],function(){function e(){}return e.backIn=function(e,t,n,r,i){return i==null&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},e.backOut=function(e,t,n,r,i){return i==null&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},e.backInOut=function(e,t,n,r,i){return i==null&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},e.bounceOut=function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},e.bounceIn=function(t,n,r,i){return r-e.bounceOut(i-t,0,r,i)+n},e.bounceInOut=function(t,n,r,i){return t<i/2?e.bounceIn(t*2,0,r,i)*.5+n:e.bounceOut(t*2-i,0,r,i)*.5+r*.5+n},e.circIn=function(e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},e.circOut=function(e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},e.circInOut=function(e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},e.cubicIn=function(e,t,n,r){return n*(e/=r)*e*e+t},e.cubicOut=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},e.cubicInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},e.elasticOut=function(e,t,n,r,i,s){var o;return i==null&&(i=null),s==null&&(s=null),e===0?t:(e/=r)===1?t+n:(s==null&&(s=r*.3),i==null||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},e.elasticIn=function(e,t,n,r,i,s){var o;return i==null&&(i=null),s==null&&(s=null),e===0?t:(e/=r)===1?t+n:(s==null&&(s=r*.3),i==null||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e-=1,-(i*Math.pow(2,10*e))*Math.sin((e*r-o)*2*Math.PI/s)+t)},e.elasticInOut=function(e,t,n,r,i,s){var o;return i==null&&(i=null),s==null&&(s=null),e===0?t:(e/=r/2)===2?t+n:(s==null&&(s=r*.3*1.5),i==null||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*(2*Math.PI/s))+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},e.expoIn=function(e,t,n,r){return e===0?t:n*Math.pow(2,10*(e/r-1))+t},e.expoOut=function(e,t,n,r){return e===r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},e.expoInOut=function(e,t,n,r){return e===0?t:e===r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*(e-1))+2)+t},e.linearNone=function(e,t,n,r){return n*e/r+t},e.linearIn=function(t,n,r,i){return e.linearNone(t,n,r,i)},e.linearOut=function(t,n,r,i){return e.linearNone(t,n,r,i)},e.linearInOut=function(t,n,r,i){return e.linearNone(t,n,r,i)},e.quadIn=function(e,t,n,r){return n*(e/=r)*e+t},e.quadOut=function(e,t,n,r){return-n*(e/=r)*(e-2)+t},e.quadInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*((e-=1)*(e-2)-1)+t},e.quartIn=function(e,t,n,r){return n*(e/=r)*e*e*e+t},e.quartOut=function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},e.quartInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},e.quintIn=function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},e.quintOut=function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},e.quintInOut=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},e.sineIn=function(e,t,n,r){return-n*Math.cos(e/r*(Math.PI/2))+n+t},e.sineOut=function(e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},e.sineInOut=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},e.ease=function(t,n){var r=e[t],i=r(n,0,1,1);return i},e}),function(e){var t="0.3.4",n="hasOwnProperty",r=/[\.\/]/,i="*",s=function(){},o=function(e,t){return e-t},u,a,f={n:{}},l=function(e,t){var n=f,r=a,i=Array.prototype.slice.call(arguments,2),s=l.listeners(e),c=0,h=!1,p,d=[],v={},m=[],g=u,y=[];u=e,a=0;for(var b=0,w=s.length;b<w;b++)"zIndex"in s[b]&&(d.push(s[b].zIndex),s[b].zIndex<0&&(v[s[b].zIndex]=s[b]));d.sort(o);while(d[c]<0){p=v[d[c++]],m.push(p.apply(t,i));if(a)return a=r,m}for(b=0;b<w;b++){p=s[b];if("zIndex"in p)if(p.zIndex==d[c]){m.push(p.apply(t,i));if(a)break;do{c++,p=v[d[c]],p&&m.push(p.apply(t,i));if(a)break}while(p)}else v[p.zIndex]=p;else{m.push(p.apply(t,i));if(a)break}}return a=r,u=g,m.length?m:null};l.listeners=function(e){var t=e.split(r),n=f,s,o,u,a,l,c,h,p,d=[n],v=[];for(a=0,l=t.length;a<l;a++){p=[];for(c=0,h=d.length;c<h;c++){n=d[c].n,o=[n[t[a]],n[i]],u=2;while(u--)s=o[u],s&&(p.push(s),v=v.concat(s.f||[]))}d=p}return v},l.on=function(e,t){var n=e.split(r),i=f;for(var o=0,u=n.length;o<u;o++)i=i.n,!i[n[o]]&&(i[n[o]]={n:{}}),i=i[n[o]];i.f=i.f||[];for(o=0,u=i.f.length;o<u;o++)if(i.f[o]==t)return s;return i.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},l.stop=function(){a=1},l.nt=function(e){return e?(new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)")).test(u):u},l.off=l.unbind=function(e,t){var s=e.split(r),o,u,a,l,c,h,p,d=[f];for(l=0,c=s.length;l<c;l++)for(h=0;h<d.length;h+=a.length-2){a=[h,1],o=d[h].n;if(s[l]!=i)o[s[l]]&&a.push(o[s[l]]);else for(u in o)o[n](u)&&a.push(o[u]);d.splice.apply(d,a)}for(l=0,c=d.length;l<c;l++){o=d[l];while(o.n){if(t){if(o.f){for(h=0,p=o.f.length;h<p;h++)if(o.f[h]==t){o.f.splice(h,1);break}!o.f.length&&delete o.f}for(u in o.n)if(o.n[n](u)&&o.n[u].f){var v=o.n[u].f;for(h=0,p=v.length;h<p;h++)if(v[h]==t){v.splice(h,1);break}!v.length&&delete o.n[u].f}}else{delete o.f;for(u in o.n)o.n[n](u)&&o.n[u].f&&delete o.n[u].f}o=o.n}}},l.once=function(e,t){var n=function(){var r=t.apply(this,arguments);return l.unbind(e,n),r};return l.on(e,n)},l.version=t,l.toString=function(){return"You are running Eve "+t},e.eve=l}(this),function(){function e(n){if(e.is(n,"function"))return t?n():eve.on("raphael.DOMload",n);if(e.is(n,O))return e._engine.create[h](e,n.splice(0,3+e.is(n[0],L))).add(n);var r=Array.prototype.slice.call(arguments,0);if(e.is(r[r.length-1],"function")){var i=r.pop();return t?i.call(e._engine.create[h](e,r)):eve.on("raphael.DOMload",function(){i.call(e._engine.create[h](e,r))})}return e._engine.create[h](e,arguments)}function ht(e){if(Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[o](n)&&(t[n]=ht(e[n]));return t}function wt(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function Et(e,t,n){function r(){var i=Array.prototype.slice.call(arguments,0),s=i.join("␀"),u=r.cache=r.cache||{},a=r.count=r.count||[];return u[o](s)?(wt(a,s),n?n(u[s]):u[s]):(a.length>=1e3&&delete u[a.shift()],a.push(s),u[s]=e[h](t,i),n?n(u[s]):u[s])}return r}function xt(){return this.hex}function Tt(e,t){var n=[];for(var r=0,i=e.length;i-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?s[3]={x:+e[0],y:+e[1]}:i-2==r&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}function Ct(e,t,n,r,i){var s=-3*t+9*n-9*r+3*i,o=e*s+6*t-12*n+6*r;return e*o-3*t+3*n}function kt(e,t,n,r,i,s,o,u,a){a==null&&(a=1),a=a>1?1:a<0?0:a;var f=a/2,l=12,c=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;for(var d=0;d<l;d++){var v=f*c[d]+f,m=Ct(v,e,n,i,o),g=Ct(v,t,r,s,u),y=m*m+g*g;p+=h[d]*S.sqrt(y)}return f*p}function Lt(e,t,n,r,i,s,o,u,a){if(a<0||kt(e,t,n,r,i,s,o,u)<a)return;var f=1,l=f/2,c=f-l,h,p=.01;h=kt(e,t,n,r,i,s,o,u,c);while(N(h-a)>p)l/=2,c+=(h<a?1:-1)*l,h=kt(e,t,n,r,i,s,o,u,c);return c}function At(e,t,n,r,i,s,o,u){if(x(e,n)<T(i,o)||T(e,n)>x(i,o)||x(t,r)<T(s,u)||T(t,r)>x(s,u))return;var a=(e*r-t*n)*(i-o)-(e-n)*(i*u-s*o),f=(e*r-t*n)*(s-u)-(t-r)*(i*u-s*o),l=(e-n)*(s-u)-(t-r)*(i-o);if(!l)return;var c=a/l,h=f/l,p=+c.toFixed(2),d=+h.toFixed(2);if(p<+T(e,n).toFixed(2)||p>+x(e,n).toFixed(2)||p<+T(i,o).toFixed(2)||p>+x(i,o).toFixed(2)||d<+T(t,r).toFixed(2)||d>+x(t,r).toFixed(2)||d<+T(s,u).toFixed(2)||d>+x(s,u).toFixed(2))return;return{x:c,y:h}}function Ot(e,t){return _t(e,t)}function Mt(e,t){return _t(e,t,1)}function _t(t,n,r){var i=e.bezierBBox(t),s=e.bezierBBox(n);if(!e.isBBoxIntersect(i,s))return r?0:[];var o=kt.apply(0,t),u=kt.apply(0,n),a=~~(o/5),f=~~(u/5),l=[],c=[],h={},p=r?0:[];for(var d=0;d<a+1;d++){var v=e.findDotsAtSegment.apply(e,t.concat(d/a));l.push({x:v.x,y:v.y,t:d/a})}for(d=0;d<f+1;d++)v=e.findDotsAtSegment.apply(e,n.concat(d/f)),c.push({x:v.x,y:v.y,t:d/f});for(d=0;d<a;d++)for(var m=0;m<f;m++){var g=l[d],y=l[d+1],b=c[m],w=c[m+1],E=N(y.x-g.x)<.001?"y":"x",S=N(w.x-b.x)<.001?"y":"x",x=At(g.x,g.y,y.x,y.y,b.x,b.y,w.x,w.y);if(x){if(h[x.x.toFixed(4)]==x.y.toFixed(4))continue;h[x.x.toFixed(4)]=x.y.toFixed(4);var T=g.t+N((x[E]-g[E])/(y[E]-g[E]))*(y.t-g.t),C=b.t+N((x[S]-b[S])/(w[S]-b[S]))*(w.t-b.t);T>=0&&T<=1&&C>=0&&C<=1&&(r?p++:p.push({x:x.x,y:x.y,t1:T,t2:C}))}}return p}function Dt(t,n,r){t=e._path2curve(t),n=e._path2curve(n);var i,s,o,u,a,f,l,c,h,p,d=r?0:[];for(var v=0,m=t.length;v<m;v++){var g=t[v];if(g[0]=="M")i=a=g[1],s=f=g[2];else{g[0]=="C"?(h=[i,s].concat(g.slice(1)),i=h[6],s=h[7]):(h=[i,s,i,s,a,f,a,f],i=a,s=f);for(var y=0,b=n.length;y<b;y++){var w=n[y];if(w[0]=="M")o=l=w[1],u=c=w[2];else{w[0]=="C"?(p=[o,u].concat(w.slice(1)),o=p[6],u=p[7]):(p=[o,u,o,u,l,c,l,c],o=l,u=c);var E=_t(h,p,r);if(r)d+=E;else{for(var S=0,x=E.length;S<x;S++)E[S].segment1=v,E[S].segment2=y,E[S].bez1=h,E[S].bez2=p;d=d.concat(E)}}}}}return d}function tn(e,t,n,r,i,s){e!=null?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function mn(){return this.x+m+this.y}function gn(){return this.x+m+this.y+m+this.width+" × "+this.height}function An(e,t,n,r,i,s){function h(e){return((a*e+u)*e+o)*e}function p(e,t){var n=d(e,t);return((c*n+l)*n+f)*n}function d(e,t){var n,r,i,s,f,l;for(i=e,l=0;l<8;l++){s=h(i)-e;if(N(s)<t)return i;f=(3*a*i+2*u)*i+o;if(N(f)<1e-6)break;i-=s/f}n=0,r=1,i=e;if(i<n)return n;if(i>r)return r;while(n<r){s=h(i);if(N(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)/2+n}return i}var o=3*t,u=3*(r-t)-o,a=1-o-u,f=3*n,l=3*(i-n)-f,c=1-f-l;return p(e,1/(200*s))}function On(e,t){var n=[],r={};this.ms=t,this.times=1;if(e){for(var i in e)e[o](i)&&(r[U(i)]=e[i],n.push(U(i)));n.sort(rt)}this.anim=r,this.top=n[n.length-1],this.percents=n}function Mn(t,r,i,s,u,a){i=U(i);var f,l,c,h=[],d,v,m,b=t.ms,w={},E={},S={};if(s)for(T=0,N=Nn.length;T<N;T++){var x=Nn[T];if(x.el.id==r.id&&x.anim==t){x.percent!=i?(Nn.splice(T,1),c=1):l=x,r.attr(x.totalOrigin);break}}else s=+E;for(var T=0,N=t.percents.length;T<N;T++){if(t.percents[T]==i||t.percents[T]>s*t.top){i=t.percents[T],v=t.percents[T-1]||0,b=b/t.top*(i-v),d=t.percents[T+1],f=t.anim[i];break}s&&r.attr(t.anim[t.percents[T]])}if(!f)return;if(!l){for(var C in f)if(f[o](C))if(V[o](C)||r.paper.customAttributes[o](C)){w[C]=r.attr(C),w[C]==null&&(w[C]=X[C]),E[C]=f[C];switch(V[C]){case L:S[C]=(E[C]-w[C])/b;break;case"colour":w[C]=e.getRGB(w[C]);var k=e.getRGB(E[C]);S[C]={r:(k.r-w[C].r)/b,g:(k.g-w[C].g)/b,b:(k.b-w[C].b)/b};break;case"path":var A=zt(w[C],E[C]),O=A[1];w[C]=A[0],S[C]=[];for(T=0,N=w[C].length;T<N;T++){S[C][T]=[0];for(var M=1,_=w[C][T].length;M<_;M++)S[C][T][M]=(O[T][M]-w[C][T][M])/b}break;case"transform":var D=r._,P=en(D[C],E[C]);if(P){w[C]=P.from,E[C]=P.to,S[C]=[],S[C].real=!0;for(T=0,N=w[C].length;T<N;T++){S[C][T]=[w[C][T][0]];for(M=1,_=w[C][T].length;M<_;M++)S[C][T][M]=(E[C][T][M]-w[C][T][M])/b}}else{var H=r.matrix||new tn,B={_:{transform:D.transform},getBBox:function(){return r.getBBox(1)}};w[C]=[H.a,H.b,H.c,H.d,H.e,H.f],Yt(B,E[C]),E[C]=B._.transform,S[C]=[(B.matrix.a-H.a)/b,(B.matrix.b-H.b)/b,(B.matrix.c-H.c)/b,(B.matrix.d-H.d)/b,(B.matrix.e-H.e)/b,(B.matrix.f-H.f)/b]}break;case"csv":var j=g(f[C])[y](n),F=g(w[C])[y](n);if(C=="clip-rect"){w[C]=F,S[C]=[],T=F.length;while(T--)S[C][T]=(j[T]-w[C][T])/b}E[C]=j;break;default:j=[][p](f[C]),F=[][p](w[C]),S[C]=[],T=r.paper.customAttributes[C].length;while(T--)S[C][T]=((j[T]||0)-(F[T]||0))/b}}var q=f.easing,R=e.easing_formulas[q];if(!R){R=g(q).match(I);if(R&&R.length==5){var z=R;R=function(e){return An(e,+z[1],+z[2],+z[3],+z[4],b)}}else R=st}m=f.start||t.start||+(new Date),x={anim:t,percent:i,timestamp:m,start:m+(t.del||0),status:0,initstatus:s||0,stop:!1,ms:b,easing:R,from:w,diff:S,to:E,el:r,callback:f.callback,prev:v,next:d,repeat:a||t.times,origin:r.attr(),totalOrigin:u},Nn.push(x);if(s&&!l&&!c){x.stop=!0,x.start=new Date-b*s;if(Nn.length==1)return kn()}c&&(x.start=new Date-x.ms*s),Nn.length==1&&Cn(kn)}else l.initstatus=s,l.start=new Date-l.ms*s;eve("raphael.anim.start."+r.id,r,t)}function _n(e){for(var t=0;t<Nn.length;t++)Nn[t].el.paper==e&&Nn.splice(t--,1)}e.version="2.1.0",e.eve=eve;var t,n=/[, ]+/,r={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},i=/\{(\d+)\}/g,s="prototype",o="hasOwnProperty",u={doc:document,win:window},a={was:Object.prototype[o].call(u.win,"Raphael"),is:u.win.Raphael},f=function(){this.ca=this.customAttributes={}},l,c="appendChild",h="apply",p="concat",d="createTouch"in u.doc,v="",m=" ",g=String,y="split",b="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[y](m),w={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},E=g.prototype.toLowerCase,S=Math,x=S.max,T=S.min,N=S.abs,C=S.pow,k=S.PI,L="number",A="string",O="array",M="toString",_="fill",D=Object.prototype.toString,P={},H="push",B=e._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,j=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,F={NaN:1,Infinity:1,"-Infinity":1},I=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,q=S.round,R="setAttribute",U=parseFloat,z=parseInt,W=g.prototype.toUpperCase,X=e._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},V=e._availableAnimAttrs={blur:L,"clip-rect":"csv",cx:L,cy:L,fill:"colour","fill-opacity":L,"font-size":L,height:L,opacity:L,path:"path",r:L,rx:L,ry:L,stroke:"colour","stroke-opacity":L,"stroke-width":L,transform:"transform",width:L,x:L,y:L},$=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,J=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,K={hs:1,rg:1},Q=/,?([achlmqrstvxz]),?/gi,G=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Y=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Z=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,et=e._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,tt={},nt=function(e,t){return e.key-t.key},rt=function(e,t){return U(e)-U(t)},it=function(){},st=function(e){return e},ot=e._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-n,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},ut=function(e,t,n,r){return r==null&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},at=e._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return ut(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return ut(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ot(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return ot(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ot(t.x,t.y,t.width,t.height)}},ft=e.mapPath=function(e,t){if(!t)return e;var n,r,i,s,o,u,a;e=zt(e);for(i=0,o=e.length;i<o;i++){a=e[i];for(s=1,u=a.length;s<u;s+=2)n=t.x(a[s],a[s+1]),r=t.y(a[s],a[s+1]),a[s]=n,a[s+1]=r}return e};e._g=u,e.type=u.win.SVGAngle||u.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(e.type=="VML"){var lt=u.doc.createElement("div"),ct;lt.innerHTML='<v:shape adj="1"/>',ct=lt.firstChild,ct.style.behavior="url(#default#VML)";if(!ct||typeof ct.adj!="object")return e.type=v;lt=null}e.svg=!(e.vml=e.type=="VML"),e._Paper=f,e.fn=l=f.prototype=e.prototype,e._id=0,e._oid=0,e.is=function(e,t){return t=E.call(t),t=="finite"?!F[o](+e):t=="array"?e instanceof Array:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||t=="array"&&Array.isArray&&Array.isArray(e)||D.call(e).slice(8,-1).toLowerCase()==t},e.angle=function(t,n,r,i,s,o){if(s==null){var u=t-r,a=n-i;return!u&&!a?0:(180+S.atan2(-a,-u)*180/k+360)%360}return e.angle(t,n,s,o)-e.angle(r,i,s,o)},e.rad=function(e){return e%360*k/180},e.deg=function(e){return e*180/k%360},e.snapTo=function(t,n,r){r=e.is(r,"finite")?r:10;if(e.is(t,O)){var i=t.length;while(i--)if(N(t[i]-n)<=r)return t[i]}else{t=+t;var s=n%t;if(s<r)return n-s;if(s>t-r)return n-s+t}return n};var pt=e.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=S.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)});e.setWindow=function(t){eve("raphael.setWindow",e,u.win,t),u.win=t,u.doc=u.win.document,e._engine.initWin&&e._engine.initWin(u.win)};var dt=function(t){if(e.vml){var n=/^\s+|\s+$/g,r;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),r=i.body}catch(s){r=createPopup().document.body}var o=r.createTextRange();dt=Et(function(e){try{r.style.color=g(e).replace(n,v);var t=o.queryCommandValue("ForeColor");return t=(t&255)<<16|t&65280|(t&16711680)>>>16,"#"+("000000"+t.toString(16)).slice(-6)}catch(i){return"none"}})}else{var a=u.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",u.doc.body.appendChild(a),dt=Et(function(e){return a.style.color=e,u.doc.defaultView.getComputedStyle(a,v).getPropertyValue("color")})}return dt(t)},vt=function(){return"hsb("+[this.h,this.s,this.b]+")"},mt=function(){return"hsl("+[this.h,this.s,this.l]+")"},gt=function(){return this.hex},yt=function(t,n,r){n==null&&e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,n=t.g,t=t.r);if(n==null&&e.is(t,A)){var i=e.getRGB(t);t=i.r,n=i.g,r=i.b}if(t>1||n>1||r>1)t/=255,n/=255,r/=255;return[t,n,r]},bt=function(t,n,r,i){t*=255,n*=255,r*=255;var s={r:t,g:n,b:r,hex:e.rgb(t,n,r),toString:gt};return e.is(i,"finite")&&(s.opacity=i),s};e.color=function(t){var n;return e.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(n=e.hsb2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):e.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(n=e.hsl2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.hex=n.hex):(e.is(t,"string")&&(t=e.getRGB(t)),e.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(n=e.rgb2hsl(t),t.h=n.h,t.s=n.s,t.l=n.l,n=e.rgb2hsb(t),t.v=n.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=gt,t},e.hsb2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,r=e.o),e*=360;var i,s,o,u,a;return e=e%360/60,a=n*t,u=a*(1-N(e%2-1)),i=s=o=n-a,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],bt(i,s,o,r)},e.hsl2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h);if(e>1||t>1||n>1)e/=360,t/=100,n/=100;e*=360;var i,s,o,u,a;return e=e%360/60,a=2*t*(n<.5?n:1-n),u=a*(1-N(e%2-1)),i=s=o=n-a/2,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],bt(i,s,o,r)},e.rgb2hsb=function(e,t,n){n=yt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o;return s=x(e,t,n),o=s-T(e,t,n),r=o==0?null:s==e?(t-n)/o:s==t?(n-e)/o+2:(e-t)/o+4,r=(r+360)%6*60/360,i=o==0?0:o/s,{h:r,s:i,b:s,toString:vt}},e.rgb2hsl=function(e,t,n){n=yt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o,u,a;return o=x(e,t,n),u=T(e,t,n),a=o-u,r=a==0?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,s=(o+u)/2,i=a==0?0:s<.5?a/(2*s):a/(2-2*s),{h:r,s:i,l:s,toString:mt}},e._path2string=function(){return this.join(",").replace(Q,"$1")};var St=e._preload=function(e,t){var n=u.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,u.doc.body.removeChild(this)},n.onerror=function(){u.doc.body.removeChild(this)},u.doc.body.appendChild(n),n.src=e};e.getRGB=Et(function(t){if(!t||!!((t=g(t)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:xt};if(t=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:xt};!K[o](t.toLowerCase().substring(0,2))&&t.charAt()!="#"&&(t=dt(t));var n,r,i,s,u,a,f,l=t.match(j);return l?(l[2]&&(s=z(l[2].substring(5),16),i=z(l[2].substring(3,5),16),r=z(l[2].substring(1,3),16)),l[3]&&(s=z((a=l[3].charAt(3))+a,16),i=z((a=l[3].charAt(2))+a,16),r=z((a=l[3].charAt(1))+a,16)),l[4]&&(f=l[4][y](J),r=U(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=U(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=U(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),l[1].toLowerCase().slice(0,4)=="rgba"&&(u=U(f[3])),f[3]&&f[3].slice(-1)=="%"&&(u/=100)),l[5]?(f=l[5][y](J),r=U(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=U(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=U(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(r/=360),l[1].toLowerCase().slice(0,4)=="hsba"&&(u=U(f[3])),f[3]&&f[3].slice(-1)=="%"&&(u/=100),e.hsb2rgb(r,i,s,u)):l[6]?(f=l[6][y](J),r=U(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=U(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=U(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(r/=360),l[1].toLowerCase().slice(0,4)=="hsla"&&(u=U(f[3])),f[3]&&f[3].slice(-1)=="%"&&(u/=100),e.hsl2rgb(r,i,s,u)):(l={r:r,g:i,b:s,toString:xt},l.hex="#"+(16777216|s|i<<8|r<<16).toString(16).slice(1),e.is(u,"finite")&&(l.opacity=u),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:xt}},e),e.hsb=Et(function(t,n,r){return e.hsb2rgb(t,n,r).hex}),e.hsl=Et(function(t,n,r){return e.hsl2rgb(t,n,r).hex}),e.rgb=Et(function(e,t,n){return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)}),e.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},e.getColor.reset=function(){delete this.start},e.parsePathString=function(t){if(!t)return null;var n=Nt(t);if(n.arr)return Ht(n.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return e.is(t,O)&&e.is(t[0],O)&&(i=Ht(t)),i.length||g(t).replace(G,function(e,t,n){var s=[],o=t.toLowerCase();n.replace(Z,function(e,t){t&&s.push(+t)}),o=="m"&&s.length>2&&(i.push([t][p](s.splice(0,2))),o="l",t=t=="m"?"l":"L");if(o=="r")i.push([t][p](s));else while(s.length>=r[o]){i.push([t][p](s.splice(0,r[o])));if(!r[o])break}}),i.toString=e._path2string,n.arr=Ht(i),i},e.parseTransformString=Et(function(t){if(!t)return null;var n={r:3,s:4,t:2,m:6},r=[];return e.is(t,O)&&e.is(t[0],O)&&(r=Ht(t)),r.length||g(t).replace(Y,function(e,t,n){var i=[],s=E.call(t);n.replace(Z,function(e,t){t&&i.push(+t)}),r.push([t][p](i))}),r.toString=e._path2string,r});var Nt=function(e){var t=Nt.ps=Nt.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[o](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};e.findDotsAtSegment=function(e,t,n,r,i,s,o,u,a){var f=1-a,l=C(f,3),c=C(f,2),h=a*a,p=h*a,d=l*e+c*3*a*n+f*3*a*a*i+p*o,v=l*t+c*3*a*r+f*3*a*a*s+p*u,m=e+2*a*(n-e)+h*(i-2*n+e),g=t+2*a*(r-t)+h*(s-2*r+t),y=n+2*a*(i-n)+h*(o-2*i+n),b=r+2*a*(s-r)+h*(u-2*s+r),w=f*e+a*n,E=f*t+a*r,x=f*i+a*o,T=f*s+a*u,N=90-S.atan2(m-y,g-b)*180/k;return(m>y||g<b)&&(N+=180),{x:d,y:v,m:{x:m,y:g},n:{x:y,y:b},start:{x:w,y:E},end:{x:x,y:T},alpha:N}},e.bezierBBox=function(t,n,r,i,s,o,u,a){e.is(t,"array")||(t=[t,n,r,i,s,o,u,a]);var f=Ut.apply(null,t);return{x:f.min.x,y:f.min.y,x2:f.max.x,y2:f.max.y,width:f.max.x-f.min.x,height:f.max.y-f.min.y}},e.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},e.isBBoxIntersect=function(t,n){var r=e.isPointInsideBBox;return r(n,t.x,t.y)||r(n,t.x2,t.y)||r(n,t.x,t.y2)||r(n,t.x2,t.y2)||r(t,n.x,n.y)||r(t,n.x2,n.y)||r(t,n.x,n.y2)||r(t,n.x2,n.y2)||(t.x<n.x2&&t.x>n.x||n.x<t.x2&&n.x>t.x)&&(t.y<n.y2&&t.y>n.y||n.y<t.y2&&n.y>t.y)},e.pathIntersection=function(e,t){return Dt(e,t)},e.pathIntersectionNumber=function(e,t){return Dt(e,t,1)},e.isPointInsidePath=function(t,n,r){var i=e.pathBBox(t);return e.isPointInsideBBox(i,n,r)&&Dt(t,[["M",n,r],["H",i.x2+10]],1)%2==1},e._removedFactory=function(e){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Pt=e.pathBBox=function(e){var t=Nt(e);if(t.bbox)return t.bbox;if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=zt(e);var n=0,r=0,i=[],s=[],o;for(var u=0,a=e.length;u<a;u++){o=e[u];if(o[0]=="M")n=o[1],r=o[2],i.push(n),s.push(r);else{var f=Ut(n,r,o[1],o[2],o[3],o[4],o[5],o[6]);i=i[p](f.min.x,f.max.x),s=s[p](f.min.y,f.max.y),n=o[5],r=o[6]}}var l=T[h](0,i),c=T[h](0,s),d=x[h](0,i),v=x[h](0,s),m={x:l,y:c,x2:d,y2:v,width:d-l,height:v-c};return t.bbox=ht(m),m},Ht=function(t){var n=ht(t);return n.toString=e._path2string,n},Bt=e._pathToRelative=function(t){var n=Nt(t);if(n.rel)return Ht(n.rel);if(!e.is(t,O)||!e.is(t&&t[0],O))t=e.parsePathString(t);var r=[],i=0,s=0,o=0,u=0,a=0;t[0][0]=="M"&&(i=t[0][1],s=t[0][2],o=i,u=s,a++,r.push(["M",i,s]));for(var f=a,l=t.length;f<l;f++){var c=r[f]=[],h=t[f];if(h[0]!=E.call(h[0])){c[0]=E.call(h[0]);switch(c[0]){case"a":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+(h[6]-i).toFixed(3),c[7]=+(h[7]-s).toFixed(3);break;case"v":c[1]=+(h[1]-s).toFixed(3);break;case"m":o=h[1],u=h[2];default:for(var p=1,d=h.length;p<d;p++)c[p]=+(h[p]-(p%2?i:s)).toFixed(3)}}else{c=r[f]=[],h[0]=="m"&&(o=h[1]+i,u=h[2]+s);for(var v=0,m=h.length;v<m;v++)r[f][v]=h[v]}var g=r[f].length;switch(r[f][0]){case"z":i=o,s=u;break;case"h":i+=+r[f][g-1];break;case"v":s+=+r[f][g-1];break;default:i+=+r[f][g-2],s+=+r[f][g-1]}}return r.toString=e._path2string,n.rel=Ht(r),r},jt=e._pathToAbsolute=function(t){var n=Nt(t);if(n.abs)return Ht(n.abs);if(!e.is(t,O)||!e.is(t&&t[0],O))t=e.parsePathString(t);if(!t||!t.length)return[["M",0,0]];var r=[],i=0,s=0,o=0,u=0,a=0;t[0][0]=="M"&&(i=+t[0][1],s=+t[0][2],o=i,u=s,a++,r[0]=["M",i,s]);var f=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z";for(var l,c,h=a,d=t.length;h<d;h++){r.push(l=[]),c=t[h];if(c[0]!=W.call(c[0])){l[0]=W.call(c[0]);switch(l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+(c[6]+i),l[7]=+(c[7]+s);break;case"V":l[1]=+c[1]+s;break;case"H":l[1]=+c[1]+i;break;case"R":var v=[i,s][p](c.slice(1));for(var m=2,g=v.length;m<g;m++)v[m]=+v[m]+i,v[++m]=+v[m]+s;r.pop(),r=r[p](Tt(v,f));break;case"M":o=+c[1]+i,u=+c[2]+s;default:for(m=1,g=c.length;m<g;m++)l[m]=+c[m]+(m%2?i:s)}}else if(c[0]=="R")v=[i,s][p](c.slice(1)),r.pop(),r=r[p](Tt(v,f)),l=["R"][p](c.slice(-2));else for(var y=0,b=c.length;y<b;y++)l[y]=c[y];switch(l[0]){case"Z":i=o,s=u;break;case"H":i=l[1];break;case"V":s=l[1];break;case"M":o=l[l.length-2],u=l[l.length-1];default:i=l[l.length-2],s=l[l.length-1]}}return r.toString=e._path2string,n.abs=Ht(r),r},Ft=function(e,t,n,r){return[e,t,n,r,n,r]},It=function(e,t,n,r,i,s){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*s+u*r,i,s]},qt=function(e,t,n,r,i,s,o,u,a,f){var l=k*120/180,c=k/180*(+i||0),h=[],d,v=Et(function(e,t,n){var r=e*S.cos(n)-t*S.sin(n),i=e*S.sin(n)+t*S.cos(n);return{x:r,y:i}});if(!f){d=v(e,t,-c),e=d.x,t=d.y,d=v(u,a,-c),u=d.x,a=d.y;var m=S.cos(k/180*i),g=S.sin(k/180*i),b=(e-u)/2,w=(t-a)/2,E=b*b/(n*n)+w*w/(r*r);E>1&&(E=S.sqrt(E),n=E*n,r=E*r);var x=n*n,T=r*r,C=(s==o?-1:1)*S.sqrt(N((x*T-x*w*w-T*b*b)/(x*w*w+T*b*b))),L=C*n*w/r+(e+u)/2,A=C*-r*b/n+(t+a)/2,O=S.asin(((t-A)/r).toFixed(9)),M=S.asin(((a-A)/r).toFixed(9));O=e<L?k-O:O,M=u<L?k-M:M,O<0&&(O=k*2+O),M<0&&(M=k*2+M),o&&O>M&&(O-=k*2),!o&&M>O&&(M-=k*2)}else O=f[0],M=f[1],L=f[2],A=f[3];var _=M-O;if(N(_)>l){var D=M,P=u,H=a;M=O+l*(o&&M>O?1:-1),u=L+n*S.cos(M),a=A+r*S.sin(M),h=qt(u,a,n,r,i,0,o,P,H,[M,D,L,A])}_=M-O;var B=S.cos(O),j=S.sin(O),F=S.cos(M),I=S.sin(M),q=S.tan(_/4),R=4/3*n*q,U=4/3*r*q,z=[e,t],W=[e+R*j,t-U*B],X=[u+R*I,a-U*F],V=[u,a];W[0]=2*z[0]-W[0],W[1]=2*z[1]-W[1];if(f)return[W,X,V][p](h);h=[W,X,V][p](h).join()[y](",");var $=[];for(var J=0,K=h.length;J<K;J++)$[J]=J%2?v(h[J-1],h[J],c).y:v(h[J],h[J+1],c).x;return $},Rt=function(e,t,n,r,i,s,o,u,a){var f=1-a;return{x:C(f,3)*e+C(f,2)*3*a*n+f*3*a*a*i+C(a,3)*o,y:C(f,3)*t+C(f,2)*3*a*r+f*3*a*a*s+C(a,3)*u}},Ut=Et(function(e,t,n,r,i,s,o,u){var a=i-2*n+e-(o-2*i+n),f=2*(n-e)-2*(i-n),l=e-n,c=(-f+S.sqrt(f*f-4*a*l))/2/a,p=(-f-S.sqrt(f*f-4*a*l))/2/a,d=[t,u],v=[e,o],m;return N(c)>"1e12"&&(c=.5),N(p)>"1e12"&&(p=.5),c>0&&c<1&&(m=Rt(e,t,n,r,i,s,o,u,c),v.push(m.x),d.push(m.y)),p>0&&p<1&&(m=Rt(e,t,n,r,i,s,o,u,p),v.push(m.x),d.push(m.y)),a=s-2*r+t-(u-2*s+r),f=2*(r-t)-2*(s-r),l=t-r,c=(-f+S.sqrt(f*f-4*a*l))/2/a,p=(-f-S.sqrt(f*f-4*a*l))/2/a,N(c)>"1e12"&&(c=.5),N(p)>"1e12"&&(p=.5),c>0&&c<1&&(m=Rt(e,t,n,r,i,s,o,u,c),v.push(m.x),d.push(m.y)),p>0&&p<1&&(m=Rt(e,t,n,r,i,s,o,u,p),v.push(m.x),d.push(m.y)),{min:{x:T[h](0,v),y:T[h](0,d)},max:{x:x[h](0,v),y:x[h](0,d)}}}),zt=e._path2curve=Et(function(e,t){var n=!t&&Nt(e);if(!t&&n.curve)return Ht(n.curve);var r=jt(e),i=t&&jt(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(e,t){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][p](qt[h](0,[t.x,t.y][p](e.slice(1))));break;case"S":n=t.x+(t.x-(t.bx||t.x)),r=t.y+(t.y-(t.by||t.y)),e=["C",n,r][p](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][p](It(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][p](It(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][p](Ft(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][p](Ft(t.x,t.y,e[1],t.y));break;case"V":e=["C"][p](Ft(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][p](Ft(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t].length>7){e[t].shift();var n=e[t];while(n.length)e.splice(t++,0,["C"][p](n.splice(0,6)));e.splice(t,1),c=x(r.length,i&&i.length||0)}},f=function(e,t,n,s,o){e&&t&&e[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],c=x(r.length,i&&i.length||0))};for(var l=0,c=x(r.length,i&&i.length||0);l<c;l++){r[l]=u(r[l],s),a(r,l),i&&(i[l]=u(i[l],o)),i&&a(i,l),f(r,i,s,o,l),f(i,r,o,s,l);var d=r[l],v=i&&i[l],m=d.length,g=i&&v.length;s.x=d[m-2],s.y=d[m-1],s.bx=U(d[m-4])||s.x,s.by=U(d[m-3])||s.y,o.bx=i&&(U(v[g-4])||o.x),o.by=i&&(U(v[g-3])||o.y),o.x=i&&v[g-2],o.y=i&&v[g-1]}return i||(n.curve=Ht(r)),i?[r,i]:r},null,Ht),Wt=e._parseDots=Et(function(t){var n=[];for(var r=0,i=t.length;r<i;r++){var s={},o=t[r].match(/^([^:]*):?([\d\.]*)/);s.color=e.getRGB(o[1]);if(s.color.error)return null;s.color=s.color.hex,o[2]&&(s.offset=o[2]+"%"),n.push(s)}for(r=1,i=n.length-1;r<i;r++)if(!n[r].offset){var u=U(n[r-1].offset||0),a=0;for(var f=r+1;f<i;f++)if(n[f].offset){a=n[f].offset;break}a||(a=100,f=i),a=U(a);var l=(a-u)/(f-r+1);for(;r<f;r++)u+=l,n[r].offset=u+"%"}return n}),Xt=e._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},Vt=e._tofront=function(e,t){if(t.top===e)return;Xt(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e},$t=e._toback=function(e,t){if(t.bottom===e)return;Xt(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e},Jt=e._insertafter=function(e,t,n){Xt(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Kt=e._insertbefore=function(e,t,n){Xt(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Qt=e.toMatrix=function(e,t){var n=Pt(e),r={_:{transform:v},getBBox:function(){return n}};return Yt(r,t),r.matrix},Gt=e.transformPath=function(e,t){return ft(e,Qt(e,t))},Yt=e._extractTransform=function(t,n){if(n==null)return t._.transform;n=g(n).replace(/\.{3}|\u2026/g,t._.transform||v);var r=e.parseTransformString(n),i=0,s=0,o=0,u=1,a=1,f=t._,l=new tn;f.transform=r||[];if(r)for(var c=0,h=r.length;c<h;c++){var p=r[c],d=p.length,m=g(p[0]).toLowerCase(),y=p[0]!=m,b=y?l.invert():0,w,E,S,x,T;m=="t"&&d==3?y?(w=b.x(0,0),E=b.y(0,0),S=b.x(p[1],p[2]),x=b.y(p[1],p[2]),l.translate(S-w,x-E)):l.translate(p[1],p[2]):m=="r"?d==2?(T=T||t.getBBox(1),l.rotate(p[1],T.x+T.width/2,T.y+T.height/2),i+=p[1]):d==4&&(y?(S=b.x(p[2],p[3]),x=b.y(p[2],p[3]),l.rotate(p[1],S,x)):l.rotate(p[1],p[2],p[3]),i+=p[1]):m=="s"?d==2||d==3?(T=T||t.getBBox(1),l.scale(p[1],p[d-1],T.x+T.width/2,T.y+T.height/2),u*=p[1],a*=p[d-1]):d==5&&(y?(S=b.x(p[3],p[4]),x=b.y(p[3],p[4]),l.scale(p[1],p[2],S,x)):l.scale(p[1],p[2],p[3],p[4]),u*=p[1],a*=p[2]):m=="m"&&d==7&&l.add(p[1],p[2],p[3],p[4],p[5],p[6]),f.dirtyT=1,t.matrix=l}t.matrix=l,f.sx=u,f.sy=a,f.deg=i,f.dx=s=l.e,f.dy=o=l.f,u==1&&a==1&&!i&&f.bbox?(f.bbox.x+=+s,f.bbox.y+=+o):f.dirtyT=1},Zt=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},en=e._equaliseTransform=function(t,n){n=g(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];var r=x(t.length,n.length),i=[],s=[],o=0,u,a,f,l;for(;o<r;o++){f=t[o]||Zt(n[o]),l=n[o]||Zt(f);if(f[0]!=l[0]||f[0].toLowerCase()=="r"&&(f[2]!=l[2]||f[3]!=l[3])||f[0].toLowerCase()=="s"&&(f[3]!=l[3]||f[4]!=l[4]))return;i[o]=[],s[o]=[];for(u=0,a=x(f.length,l.length);u<a;u++)u in f&&(i[o][u]=f[u]),u in l&&(s[o][u]=l[u])}return{from:i,to:s}};e._getContainer=function(t,n,r,i){var s;s=i==null&&!e.is(t,"object")?u.doc.getElementById(t):t;if(s==null)return;return s.tagName?n==null?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:n,height:r}:{container:1,x:t,y:n,width:r,height:i}},e.pathToRelative=Bt,e._engine={},e.path2curve=zt,e.matrix=function(e,t,n,r,i,s){return new tn(e,t,n,r,i,s)},function(t){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=S.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}t.add=function(e,t,n,r,i,s){var o=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],a=[[e,n,i],[t,r,s],[0,0,1]],f,l,c,h;e&&e instanceof tn&&(a=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]);for(f=0;f<3;f++)for(l=0;l<3;l++){h=0;for(c=0;c<3;c++)h+=u[f][c]*a[c][l];o[f][l]=h}this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2]},t.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new tn(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},t.clone=function(){return new tn(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(e,t){this.add(1,0,0,1,e,t)},t.scale=function(e,t,n,r){t==null&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},t.rotate=function(t,n,r){t=e.rad(t),n=n||0,r=r||0;var i=+S.cos(t).toFixed(9),s=+S.sin(t).toFixed(9);this.add(i,s,-s,i,n,r),this.add(1,0,0,1,-n,-r)},t.x=function(e,t){return e*this.a+t*this.c+this.e},t.y=function(e,t){return e*this.b+t*this.d+this.f},t.get=function(e){return+this[g.fromCharCode(97+e)].toFixed(4)},t.toString=function(){return e.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=S.sqrt(n(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=S.sqrt(n(i[1])),r(i[1]),t.shear/=t.scaley;var s=-i[0][1],o=i[1][1];return o<0?(t.rotate=e.deg(S.acos(o)),s<0&&(t.rotate=360-t.rotate)):t.rotate=e.deg(S.asin(s)),t.isSimple=!+t.shear.toFixed(9)&&(t.scalex.toFixed(9)==t.scaley.toFixed(9)||!t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(e){var t=e||this[y]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:v)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:v)+(t.rotate?"r"+[t.rotate,0,0]:v)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(tn.prototype);var nn=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(nn&&nn[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&nn&&nn[1]<8?l.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:l.safari=it;var rn=function(){this.returnValue=!1},sn=function(){return this.originalEvent.preventDefault()},on=function(){this.cancelBubble=!0},un=function(){return this.originalEvent.stopPropagation()},an=function(){if(u.doc.addEventListener)return function(e,t,n,r){var i=d&&w[t]?w[t]:t,s=function(i){var s=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,a=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,f=i.clientX+a,l=i.clientY+s;if(d&&w[o](t))for(var c=0,h=i.targetTouches&&i.targetTouches.length;c<h;c++)if(i.targetTouches[c].target==e){var p=i;i=i.targetTouches[c],i.originalEvent=p,i.preventDefault=sn,i.stopPropagation=un;break}return n.call(r,i,f,l)};return e.addEventListener(i,s,!1),function(){return e.removeEventListener(i,s,!1),!0}};if(u.doc.attachEvent)return function(e,t,n,r){var i=function(e){e=e||u.win.event;var t=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,i=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,s=e.clientX+i,o=e.clientY+t;return e.preventDefault=e.preventDefault||rn,e.stopPropagation=e.stopPropagation||on,n.call(r,e,s,o)};e.attachEvent("on"+t,i);var s=function(){return e.detachEvent("on"+t,i),!0};return s}}(),fn=[],ln=function(e){var t=e.clientX,n=e.clientY,r=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,i=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,s,o=fn.length;while(o--){s=fn[o];if(d){var a=e.touches.length,f;while(a--){f=e.touches[a];if(f.identifier==s.el._drag.id){t=f.clientX,n=f.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else e.preventDefault();var l=s.el.node,c,h=l.nextSibling,p=l.parentNode,v=l.style.display;u.win.opera&&p.removeChild(l),l.style.display="none",c=s.el.paper.getElementByPoint(t,n),l.style.display=v,u.win.opera&&(h?p.insertBefore(l,h):p.appendChild(l)),c&&eve("raphael.drag.over."+s.el.id,s.el,c),t+=i,n+=r,eve("raphael.drag.move."+s.el.id,s.move_scope||s.el,t-s.el._drag.x,n-s.el._drag.y,t,n,e)}},cn=function(t){e.unmousemove(ln).unmouseup(cn);var n=fn.length,r;while(n--)r=fn[n],r.el._drag={},eve("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,t);fn=[]},hn=e.el={};for(var pn=b.length;pn--;)(function(t){e[t]=hn[t]=function(n,r){return e.is(n,"function")&&(this.events=this.events||[],this.events.push({name:t,f:n,unbind:an(this.shape||this.node||u.doc,t,n,r||this)})),this},e["un"+t]=hn["un"+t]=function(e){var n=this.events||[],r=n.length;while(r--)if(n[r].name==t&&n[r].f==e)return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}})(b[pn]);hn.data=function(t,n){var r=tt[this.id]=tt[this.id]||{};if(arguments.length==1){if(e.is(t,"object")){for(var i in t)t[o](i)&&this.data(i,t[i]);return this}return eve("raphael.data.get."+this.id,this,r[t],t),r[t]}return r[t]=n,eve("raphael.data.set."+this.id,this,n,t),this},hn.removeData=function(e){return e==null?tt[this.id]={}:tt[this.id]&&delete tt[this.id][e],this},hn.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},hn.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var dn=[];hn.drag=function(t,n,r,i,s,o){function a(a){(a.originalEvent||a).preventDefault();var f=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,l=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft;this._drag.x=a.clientX+l,this._drag.y=a.clientY+f,this._drag.id=a.identifier,!fn.length&&e.mousemove(ln).mouseup(cn),fn.push({el:this,move_scope:i,start_scope:s,end_scope:o}),n&&eve.on("raphael.drag.start."+this.id,n),t&&eve.on("raphael.drag.move."+this.id,t),r&&eve.on("raphael.drag.end."+this.id,r),eve("raphael.drag.start."+this.id,s||i||this,a.clientX+l,a.clientY+f,a)}return this._drag={},dn.push({el:this,start:a}),this.mousedown(a),this},hn.onDragOver=function(e){e?eve.on("raphael.drag.over."+this.id,e):eve.unbind("raphael.drag.over."+this.id)},hn.undrag=function(){var t=dn.length;while(t--)dn[t].el==this&&(this.unmousedown(dn[t].start),dn.splice(t,1),eve.unbind("raphael.drag.*."+this.id));!dn.length&&e.unmousemove(ln).unmouseup(cn)},l.circle=function(t,n,r){var i=e._engine.circle(this,t||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},l.rect=function(t,n,r,i,s){var o=e._engine.rect(this,t||0,n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(o),o},l.ellipse=function(t,n,r,i){var s=e._engine.ellipse(this,t||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},l.path=function(t){t&&!e.is(t,A)&&!e.is(t[0],O)&&(t+=v);var n=e._engine.path(e.format[h](e,arguments),this);return this.__set__&&this.__set__.push(n),n},l.image=function(t,n,r,i,s){var o=e._engine.image(this,t||"about:blank",n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(o),o},l.text=function(t,n,r){var i=e._engine.text(this,t||0,n||0,g(r));return this.__set__&&this.__set__.push(i),i},l.set=function(t){!e.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var n=new Dn(t);return this.__set__&&this.__set__.push(n),n},l.setStart=function(e){this.__set__=e||this.set()},l.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},l.setSize=function(t,n){return e._engine.setSize.call(this,t,n)},l.setViewBox=function(t,n,r,i,s){return e._engine.setViewBox.call(this,t,n,r,i,s)},l.top=l.bottom=null,l.raphael=e;var vn=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,a=t.top+(u.win.pageYOffset||i.scrollTop||r.scrollTop)-s,f=t.left+(u.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o;return{y:a,x:f}};l.getElementByPoint=function(e,t){var n=this,r=n.canvas,i=u.doc.elementFromPoint(e,t);if(u.win.opera&&i.tagName=="svg"){var s=vn(r),o=r.createSVGRect();o.x=e-s.x,o.y=t-s.y,o.width=o.height=1;var a=r.getIntersectionList(o,null);a.length&&(i=a[a.length-1])}if(!i)return null;while(i.parentNode&&i!=r.parentNode&&!i.raphael)i=i.parentNode;return i==n.canvas.parentNode&&(i=r),i=i&&i.raphael?n.getById(i.raphaelid):null,i},l.getById=function(e){var t=this.bottom;while(t){if(t.id==e)return t;t=t.next}return null},l.forEach=function(e,t){var n=this.bottom;while(n){if(e.call(t,n)===!1)return this;n=n.next}return this},l.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(r){r.isPointInside(e,t)&&n.push(r)}),n},hn.isPointInside=function(t,n){var r=this.realPath=this.realPath||at[this.type](this);return e.isPointInsidePath(r,t,n)},hn.getBBox=function(e){if(this.removed)return{};var t=this._;if(e){if(t.dirty||!t.bboxwt)this.realPath=at[this.type](this),t.bboxwt=Pt(this.realPath),t.bboxwt.toString=gn,t.dirty=0;return t.bboxwt}if(t.dirty||t.dirtyT||!t.bbox){if(t.dirty||!this.realPath)t.bboxwt=0,this.realPath=at[this.type](this);t.bbox=Pt(ft(this.realPath,this.matrix)),t.bbox.toString=gn,t.dirty=t.dirtyT=0}return t.bbox},hn.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},hn.glow=function(e){if(this.type=="text")return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),s=this.realPath||at[this.type](this);s=this.matrix?ft(s,this.matrix):s;for(var o=1;o<n+1;o++)i.push(r.path(s).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*o).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var yn={},bn=function(t,n,r,i,s,o,u,a,f){return f==null?kt(t,n,r,i,s,o,u,a):e.findDotsAtSegment(t,n,r,i,s,o,u,a,Lt(t,n,r,i,s,o,u,a,f))},wn=function(t,n){return function(r,i,s){r=zt(r);var o,u,a,f,l="",c={},h,p=0;for(var d=0,v=r.length;d<v;d++){a=r[d];if(a[0]=="M")o=+a[1],u=+a[2];else{f=bn(o,u,a[1],a[2],a[3],a[4],a[5],a[6]);if(p+f>i){if(n&&!c.start){h=bn(o,u,a[1],a[2],a[3],a[4],a[5],a[6],i-p),l+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y];if(s)return l;c.start=l,l=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,a[5],a[6]].join(),p+=f,o=+a[5],u=+a[6];continue}if(!t&&!n)return h=bn(o,u,a[1],a[2],a[3],a[4],a[5],a[6],i-p),{x:h.x,y:h.y,alpha:h.alpha}}p+=f,o=+a[5],u=+a[6]}l+=a.shift()+a}return c.end=l,h=t?p:n?c:e.findDotsAtSegment(o,u,a[0],a[1],a[2],a[3],a[4],a[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},En=wn(1),Sn=wn(),xn=wn(0,1);e.getTotalLength=En,e.getPointAtLength=Sn,e.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return xn(e,t).end;var r=xn(e,n,1);return t?xn(r,t).end:r},hn.getTotalLength=function(){if(this.type!="path")return;return this.node.getTotalLength?this.node.getTotalLength():En(this.attrs.path)},hn.getPointAtLength=function(e){if(this.type!="path")return;return Sn(this.attrs.path,e)},hn.getSubpath=function(t,n){if(this.type!="path")return;return e.getSubpath(this.attrs.path,t,n)};var Tn=e.easing_formulas={linear:function(e){return e},"<":function(e){return C(e,1.7)},">":function(e){return C(e,.48)},"<>":function(e){var t=.48-e/1.04,n=S.sqrt(.1734+t*t),r=n-t,i=C(N(r),1/3)*(r<0?-1:1),s=-n-t,o=C(N(s),1/3)*(s<0?-1:1),u=i+o+.5;return(1-u)*3*u*u+u*u*u},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:C(2,-10*e)*S.sin((e-.075)*2*k/.3)+1},bounce:function(e){var t=7.5625,n=2.75,r;return e<1/n?r=t*e*e:e<2/n?(e-=1.5/n,r=t*e*e+.75):e<2.5/n?(e-=2.25/n,r=t*e*e+.9375):(e-=2.625/n,r=t*e*e+.984375),r}};Tn.easeIn=Tn["ease-in"]=Tn["<"],Tn.easeOut=Tn["ease-out"]=Tn[">"],Tn.easeInOut=Tn["ease-in-out"]=Tn["<>"],Tn["back-in"]=Tn.backIn,Tn["back-out"]=Tn.backOut;var Nn=[],Cn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},kn=function(){var t=+(new Date),n=0;for(;n<Nn.length;n++){var r=Nn[n];if(r.el.removed||r.paused)continue;var i=t-r.start,s=r.ms,u=r.easing,a=r.from,f=r.diff,l=r.to,c=r.t,h=r.el,d={},v,g={},y;r.initstatus?(i=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*s,r.status=r.initstatus,delete r.initstatus,r.stop&&Nn.splice(n--,1)):r.status=(r.prev+(r.percent-r.prev)*(i/s))/r.anim.top;if(i<0)continue;if(i<s){var b=u(i/s);for(var w in a)if(a[o](w)){switch(V[w]){case L:v=+a[w]+b*s*f[w];break;case"colour":v="rgb("+[Ln(q(a[w].r+b*s*f[w].r)),Ln(q(a[w].g+b*s*f[w].g)),Ln(q(a[w].b+b*s*f[w].b))].join(",")+")";break;case"path":v=[];for(var E=0,S=a[w].length;E<S;E++){v[E]=[a[w][E][0]];for(var x=1,T=a[w][E].length;x<T;x++)v[E][x]=+a[w][E][x]+b*s*f[w][E][x];v[E]=v[E].join(m)}v=v.join(m);break;case"transform":if(f[w].real){v=[];for(E=0,S=a[w].length;E<S;E++){v[E]=[a[w][E][0]];for(x=1,T=a[w][E].length;x<T;x++)v[E][x]=a[w][E][x]+b*s*f[w][E][x]}}else{var N=function(e){return+a[w][e]+b*s*f[w][e]};v=[["m",N(0),N(1),N(2),N(3),N(4),N(5)]]}break;case"csv":if(w=="clip-rect"){v=[],E=4;while(E--)v[E]=+a[w][E]+b*s*f[w][E]}break;default:var C=[][p](a[w]);v=[],E=h.paper.customAttributes[w].length;while(E--)v[E]=+C[E]+b*s*f[w][E]}d[w]=v}h.attr(d),function(e,t,n){setTimeout(function(){eve("raphael.anim.frame."+e,t,n)})}(h.id,h,r.anim)}else{(function(t,n,r){setTimeout(function(){eve("raphael.anim.frame."+n.id,n,r),eve("raphael.anim.finish."+n.id,n,r),e.is(t,"function")&&t.call(n)})})(r.callback,h,r.anim),h.attr(l),Nn.splice(n--,1);if(r.repeat>1&&!r.next){for(y in l)l[o](y)&&(g[y]=r.totalOrigin[y]);r.el.attr(g),Mn(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&Mn(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat)}}e.svg&&h&&h.paper&&h.paper.safari(),Nn.length&&Cn(kn)},Ln=function(e){return e>255?255:e<0?0:e};hn.animateWith=function(t,n,r,i,s,o){var u=this;if(u.removed)return o&&o.call(u),u;var a=r instanceof On?r:e.animation(r,i,s,o),f,l;Mn(a,u,a.percents[0],null,u.attr());for(var c=0,h=Nn.length;c<h;c++)if(Nn[c].anim==n&&Nn[c].el==t){Nn[h-1].start=Nn[c].start;break}return u},hn.onAnimation=function(e){return e?eve.on("raphael.anim.frame."+this.id,e):eve.unbind("raphael.anim.frame."+this.id),this},On.prototype.delay=function(e){var t=new On(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},On.prototype.repeat=function(e){var t=new On(this.anim,this.ms);return t.del=this.del,t.times=S.floor(x(e,0))||1,t},e.animation=function(t,n,r,i){if(t instanceof On)return t;if(e.is(r,"function")||!r)i=i||r||null,r=null;t=Object(t),n=+n||0;var s={},u,a;for(a in t)t[o](a)&&U(a)!=a&&U(a)+"%"!=a&&(u=!0,s[a]=t[a]);return u?(r&&(s.easing=r),i&&(s.callback=i),new On({100:s},n)):new On(t,n)},hn.animate=function(t,n,r,i){var s=this;if(s.removed)return i&&i.call(s),s;var o=t instanceof On?t:e.animation(t,n,r,i);return Mn(o,s,o.percents[0],null,s.attr()),s},hn.setTime=function(e,t){return e&&t!=null&&this.status(e,T(t,e.ms)/e.ms),this},hn.status=function(e,t){var n=[],r=0,i,s;if(t!=null)return Mn(e,this,-1,T(t,1)),this;i=Nn.length;for(;r<i;r++){s=Nn[r];if(s.el.id==this.id&&(!e||s.anim==e)){if(e)return s.status;n.push({anim:s.anim,status:s.status})}}return e?0:n},hn.pause=function(e){for(var t=0;t<Nn.length;t++)Nn[t].el.id==this.id&&(!e||Nn[t].anim==e)&&eve("raphael.anim.pause."+this.id,this,Nn[t].anim)!==!1&&(Nn[t].paused=!0);return this},hn.resume=function(e){for(var t=0;t<Nn.length;t++)if(Nn[t].el.id==this.id&&(!e||Nn[t].anim==e)){var n=Nn[t];eve("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},hn.stop=function(e){for(var t=0;t<Nn.length;t++)Nn[t].el.id==this.id&&(!e||Nn[t].anim==e)&&eve("raphael.anim.stop."+this.id,this,Nn[t].anim)!==!1&&Nn.splice(t--,1);return this},eve.on("raphael.remove",_n),eve.on("raphael.clear",_n),hn.toString=function(){return"Raphaël’s object"};var Dn=function(e){this.items=[],this.length=0,this.type="set";if(e)for(var t=0,n=e.length;t<n;t++)e[t]&&(e[t].constructor==hn.constructor||e[t].constructor==Dn)&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},Pn=Dn.prototype;Pn.push=function(){var e,t;for(var n=0,r=arguments.length;n<r;n++)e=arguments[n],e&&(e.constructor==hn.constructor||e.constructor==Dn)&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},Pn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Pn.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(e.call(t,this.items[n],n)===!1)return this;return this};for(var Hn in hn)hn[o](Hn)&&(Pn[Hn]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][h](n,t)})}}(Hn));Pn.attr=function(t,n){if(t&&e.is(t,O)&&e.is(t[0],"object"))for(var r=0,i=t.length;r<i;r++)this.items[r].attr(t[r]);else for(var s=0,o=this.items.length;s<o;s++)this.items[s].attr(t,n);return this},Pn.clear=function(){while(this.length)this.pop()},Pn.splice=function(e,t,n){e=e<0?x(this.length+e,0):e,t=x(0,T(this.length-e,t));var r=[],i=[],s=[],o;for(o=2;o<arguments.length;o++)s.push(arguments[o]);for(o=0;o<t;o++)i.push(this[e+o]);for(;o<this.length-e;o++)r.push(this[e+o]);var u=s.length;for(o=0;o<u+r.length;o++)this.items[e+o]=this[e+o]=o<u?s[o]:r[o-u];o=this.items.length=this.length-=t-u;while(this[o])delete this[o++];return new Dn(i)},Pn.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},Pn.animate=function(t,n,r,i){(e.is(r,"function")||!r)&&(i=r||null);var s=this.items.length,o=s,u,a=this,f;if(!s)return this;i&&(f=function(){!--s&&i.call(a)}),r=e.is(r,A)?r:f;var l=e.animation(t,n,r,f);u=this.items[--o].animate(l);while(o--)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(u,l,l);return this},Pn.insertAfter=function(e){var t=this.items.length;while(t--)this.items[t].insertAfter(e);return this},Pn.getBBox=function(){var e=[],t=[],n=[],r=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var s=this.items[i].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),r.push(s.y+s.height)}return e=T[h](0,e),t=T[h](0,t),n=x[h](0,n),r=x[h](0,r),{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t}},Pn.clone=function(e){e=new Dn;for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},Pn.toString=function(){return"Raphaël‘s set"},e.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[o](r)&&(t.face[r]=e.face[r]);this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t];if(!e.svg){t.face["units-per-em"]=z(e.face["units-per-em"],10);for(var i in e.glyphs)if(e.glyphs[o](i)){var s=e.glyphs[i];t.glyphs[i]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"};if(s.k)for(var u in s.k)s[o](u)&&(t.glyphs[i].k[u]=s.k[u])}}return e},l.getFont=function(t,n,r,i){i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400;if(!e.fonts)return;var s=e.fonts[t];if(!s){var u=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,v)+"(\\s|$)","i");for(var a in e.fonts)if(e.fonts[o](a)&&u.test(a)){s=e.fonts[a];break}}var f;if(s)for(var l=0,c=s.length;l<c;l++){f=s[l];if(f.face["font-weight"]==n&&(f.face["font-style"]==r||!f.face["font-style"])&&f.face["font-stretch"]==i)break}return f},l.print=function(t,r,i,s,o,u,a){u=u||"middle",a=x(T(a||0,1),-1);var f=g(i)[y](v),l=0,c=0,h=v,p;e.is(s,i)&&(s=this.getFont(s));if(s){p=(o||16)/s.face["units-per-em"];var d=s.face.bbox[y](n),m=+d[0],b=d[3]-d[1],w=0,E=+d[1]+(u=="baseline"?b+ +s.face.descent:b/2);for(var S=0,N=f.length;S<N;S++){if(f[S]=="\n")l=0,k=0,c=0,w+=b;else{var C=c&&s.glyphs[f[S-1]]||{},k=s.glyphs[f[S]];l+=c?(C.w||s.w)+(C.k&&C.k[f[S]]||0)+s.w*a:0,c=1}k&&k.d&&(h+=e.transformPath(k.d,["t",l*p,w*p,"s",p,p,m,E,"t",(t-m)/p,(r-E)/p]))}}return this.path(h).attr({fill:"#000",stroke:"none"})},l.add=function(t){if(e.is(t,"array")){var n=this.set(),i=0,s=t.length,u;for(;i<s;i++)u=t[i]||{},r[o](u.type)&&n.push(this[u.type]().attr(u))}return n},e.format=function(t,n){var r=e.is(n,O)?[0][p](n):arguments;return t&&e.is(t,A)&&r.length-1&&(t=t.replace(i,function(e,t){return r[++t]==null?v:r[t]})),t||v},e.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,s){t=t||r,i&&(t in i&&(i=i[t]),typeof i=="function"&&s&&(i=i()))}),i=(i==null||i==r?e:i)+"",i};return function(t,r){return String(t).replace(e,function(e,t){return n(e,t,r)})}}(),e.ninja=function(){return a.was?u.win.Raphael=a.is:delete Raphael,e},e.st=Pn,function(t,n,r){function i(){/in/.test(t.readyState)?setTimeout(i,9):e.eve("raphael.DOMload")}t.readyState==null&&t.addEventListener&&(t.addEventListener(n,r=function(){t.removeEventListener(n,r,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),a.was?u.win.Raphael=e:Raphael=e,eve.on("raphael.DOMload",function(){t=!0})}(),window.Raphael.svg&&function(e){var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,s=Math,o=s.max,u=s.abs,a=s.pow,f=/[, ]+/,l=e.eve,c="",h=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},v={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,i){if(i){typeof r=="string"&&(r=m(r));for(var s in i)i[t](s)&&(s.substring(0,6)=="xlink:"?r.setAttributeNS(p,s.substring(6),n(i[s])):r.setAttribute(s,n(i[s])))}else r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},g=function(t,i){var f="linear",l=t.id+i,h=.5,p=.5,d=t.node,v=t.paper,g=d.style,y=e._g.doc.getElementById(l);if(!y){i=n(i).replace(e._radial_gradient,function(e,t,n){f="radial";if(t&&n){h=r(t),p=r(n);var i=(p>.5)*2-1;a(h-.5,2)+a(p-.5,2)>.25&&(p=s.sqrt(.25-a(h-.5,2))*i+.5)&&p!=.5&&(p=p.toFixed(5)-1e-5*i)}return c}),i=i.split(/\s*\-\s*/);if(f=="linear"){var b=i.shift();b=-r(b);if(isNaN(b))return null;var w=[0,0,s.cos(e.rad(b)),s.sin(e.rad(b))],E=1/(o(u(w[2]),u(w[3]))||1);w[2]*=E,w[3]*=E,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var S=e._parseDots(i);if(!S)return null;l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(v.defs.removeChild(t.gradient),delete t.gradient);if(!t.gradient){y=m(f+"Gradient",{id:l}),t.gradient=y,m(y,f=="radial"?{fx:h,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),v.defs.appendChild(y);for(var x=0,T=S.length;x<T;x++)y.appendChild(m("stop",{offset:S[x].offset?S[x].offset:x?"100%":"0%","stop-color":S[x].color||"#fff"}))}}return m(d,{fill:"url(#"+l+")",opacity:1,"fill-opacity":1}),g.fill=c,g.opacity=1,g.fillOpacity=1,1},y=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(r,i,s){if(r.type=="path"){var o=n(i).toLowerCase().split("-"),u=r.paper,a=s?"end":"start",f=r.node,l=r.attrs,h=l["stroke-width"],p=o.length,g="classic",y,b,w,E,S,x=3,T=3,N=5;while(p--)switch(o[p]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=o[p];break;case"wide":T=5;break;case"narrow":T=2;break;case"long":x=5;break;case"short":x=2}g=="open"?(x+=2,T+=2,N+=2,w=1,E=s?4:1,S={fill:"none",stroke:l.stroke}):(E=w=x/2,S={fill:l.stroke,stroke:"none"}),r._.arrows?s?(r._.arrows.endPath&&v[r._.arrows.endPath]--,r._.arrows.endMarker&&v[r._.arrows.endMarker]--):(r._.arrows.startPath&&v[r._.arrows.startPath]--,r._.arrows.startMarker&&v[r._.arrows.startMarker]--):r._.arrows={};if(g!="none"){var C="raphael-marker-"+g,k="raphael-marker-"+a+g+x+T;e._g.doc.getElementById(C)?v[C]++:(u.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:d[g],id:C})),v[C]=1);var L=e._g.doc.getElementById(k),A;L?(v[k]++,A=L.getElementsByTagName("use")[0]):(L=m(m("marker"),{id:k,markerHeight:T,markerWidth:x,orient:"auto",refX:E,refY:T/2}),A=m(m("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+x/2+" "+T/2+") ":c)+"scale("+x/N+","+T/N+")","stroke-width":(1/((x/N+T/N)/2)).toFixed(4)}),L.appendChild(A),u.defs.appendChild(L),v[k]=1),m(A,S);var O=w*(g!="diamond"&&g!="oval");s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-O*h):(y=O*h,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),S={},S["marker-"+a]="url(#"+k+")";if(b||y)S.d=Raphael.getSubpath(l.path,y,b);m(f,S),r._.arrows[a+"Path"]=C,r._.arrows[a+"Marker"]=k,r._.arrows[a+"dx"]=O,r._.arrows[a+"Type"]=g,r._.arrows[a+"String"]=i}else s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-y):(y=0,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),r._.arrows[a+"Path"]&&m(f,{d:Raphael.getSubpath(l.path,y,b)}),delete r._.arrows[a+"Path"],delete r._.arrows[a+"Marker"],delete r._.arrows[a+"dx"],delete r._.arrows[a+"Type"],delete r._.arrows[a+"String"];for(S in v)if(v[t](S)&&!v[S]){var M=e._g.doc.getElementById(S);M&&M.parentNode.removeChild(M)}}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},E=function(e,t,r){t=w[n(t).toLowerCase()];if(t){var i=e.attrs["stroke-width"]||"1",s={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],u=t.length;while(u--)o[u]=t[u]*i+(u%2?1:-1)*s;m(e.node,{"stroke-dasharray":o.join(",")})}},S=function(r,s){var a=r.node,l=r.attrs,h=a.style.visibility;a.style.visibility="hidden";for(var d in s)if(s[t](d)){if(!e._availableAttrs[t](d))continue;var v=s[d];l[d]=v;switch(d){case"blur":r.blur(v);break;case"href":case"title":case"target":var w=a.parentNode;if(w.tagName.toLowerCase()!="a"){var S=m("a");w.insertBefore(S,a),S.appendChild(a),w=S}d=="target"?w.setAttributeNS(p,"show",v=="blank"?"new":v):w.setAttributeNS(p,d,v);break;case"cursor":a.style.cursor=v;break;case"transform":r.transform(v);break;case"arrow-start":b(r,v);break;case"arrow-end":b(r,v,1);break;case"clip-rect":var x=n(v).split(f);if(x.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var N=m("clipPath"),C=m("rect");N.id=e.createUUID(),m(C,{x:x[0],y:x[1],width:x[2],height:x[3]}),N.appendChild(C),r.paper.defs.appendChild(N),m(a,{"clip-path":"url(#"+N.id+")"}),r.clip=C}if(!v){var k=a.getAttribute("clip-path");if(k){var L=e._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,c));L&&L.parentNode.removeChild(L),m(a,{"clip-path":c}),delete r.clip}}break;case"path":r.type=="path"&&(m(a,{d:v?l.path=e._pathToAbsolute(v):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1)));break;case"width":a.setAttribute(d,v),r._.dirty=1;if(!l.fx)break;d="x",v=l.x;case"x":l.fx&&(v=-l.x-(l.width||0));case"rx":if(d=="rx"&&r.type=="rect")break;case"cx":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"height":a.setAttribute(d,v),r._.dirty=1;if(!l.fy)break;d="y",v=l.y;case"y":l.fy&&(v=-l.y-(l.height||0));case"ry":if(d=="ry"&&r.type=="rect")break;case"cy":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"r":r.type=="rect"?m(a,{rx:v,ry:v}):a.setAttribute(d,v),r._.dirty=1;break;case"src":r.type=="image"&&a.setAttributeNS(p,"href",v);break;case"stroke-width":if(r._.sx!=1||r._.sy!=1)v/=o(u(r._.sx),u(r._.sy))||1;r.paper._vbSize&&(v*=r.paper._vbSize),a.setAttribute(d,v),l["stroke-dasharray"]&&E(r,l["stroke-dasharray"],s),r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"stroke-dasharray":E(r,v,s);break;case"fill":var A=n(v).match(e._ISURL);if(A){N=m("pattern");var O=m("image");N.id=e.createUUID(),m(N,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(O,{x:0,y:0,"xlink:href":A[1]}),N.appendChild(O),function(t){e._preload(A[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(O,{width:e,height:n}),r.paper.safari()})}(N),r.paper.defs.appendChild(N),m(a,{fill:"url(#"+N.id+")"}),r.pattern=N,r.pattern&&y(r);break}var M=e.getRGB(v);if(!M.error)delete s.gradient,delete l.gradient,!e.is(l.opacity,"undefined")&&e.is(s.opacity,"undefined")&&m(a,{opacity:l.opacity}),!e.is(l["fill-opacity"],"undefined")&&e.is(s["fill-opacity"],"undefined")&&m(a,{"fill-opacity":l["fill-opacity"]});else if((r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v)){if("opacity"in l||"fill-opacity"in l){var _=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(_){var D=_.getElementsByTagName("stop");m(D[D.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=v,l.fill="none";break}M[t]("opacity")&&m(a,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=e.getRGB(v),a.setAttribute(d,M.hex),d=="stroke"&&M[t]("opacity")&&m(a,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity}),d=="stroke"&&r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v);break;case"opacity":l.gradient&&!l[t]("stroke-opacity")&&m(a,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(l.gradient){_=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c)),_&&(D=_.getElementsByTagName("stop"),m(D[D.length-1],{"stop-opacity":v}));break};default:d=="font-size"&&(v=i(v,10)+"px");var P=d.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});a.style[P]=v,r._.dirty=1,a.setAttribute(d,v)}}T(r,s),a.style.visibility=h},x=1.2,T=function(r,s){if(r.type!="text"||!(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y")))return;var o=r.attrs,u=r.node,a=u.firstChild?i(e._g.doc.defaultView.getComputedStyle(u.firstChild,c).getPropertyValue("font-size"),10):10;if(s[t]("text")){o.text=s.text;while(u.firstChild)u.removeChild(u.firstChild);var f=n(s.text).split("\n"),l=[],h;for(var p=0,d=f.length;p<d;p++)h=m("tspan"),p&&m(h,{dy:a*x,x:o.x}),h.appendChild(e._g.doc.createTextNode(f[p])),u.appendChild(h),l[p]=h}else{l=u.getElementsByTagName("tspan");for(p=0,d=l.length;p<d;p++)p?m(l[p],{dy:a*x,x:o.x}):m(l[0],{dy:0})}m(u,{x:o.x,y:o.y}),r._.dirty=1;var v=r._getBBox(),g=o.y-(v.y+v.height/2);g&&e.is(g,"finite")&&m(l[0],{dy:g})},N=function(t,n){var r=0,i=0;this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},C=e.el;N.prototype=C,C.constructor=N,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new N(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},C.rotate=function(e,t,i){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},C.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3])),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this},C.translate=function(e,t){return this.removed?this:(e=n(e).split(f),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},C.transform=function(n){var r=this._;if(n==null)return r.transform;e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix});if(r.sx!=1||r.sy!=1){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},C.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},C.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},C.remove=function(){if(this.removed||!this.node.parentNode)return;var t=this.paper;t.__set__&&t.__set__.exclude(this),l.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),e._tear(this,t),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]=typeof this[n]=="function"?e._removedFactory(n):null;this.removed=!0},C._getBBox=function(){if(this.node.style.display=="none"){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(n){}finally{t=t||{}}return e&&this.hide(),t},C.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;var o=n.split(f),u={};for(var a=0,c=o.length;a<c;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return c-1?u:u[o[0]]}if(r==null&&e.is(n,"array")){u={};for(a=0,c=n.length;a<c;a++)u[n[a]]=this.attr(n[a]);return u}if(r!=null){var h={};h[n]=r}else n!=null&&e.is(n,"object")&&(h=n);for(var p in h)l("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var v in d)d[t](v)&&(h[v]=d[v])}return S(this,h),this},C.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&e._tofront(this,t),this},C.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;t.tagName.toLowerCase()=="a"?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper);var n=this.paper;return this},C.insertAfter=function(t){if(this.removed)return this;var n=t.node||t[t.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this},C.insertBefore=function(t){if(this.removed)return this;var n=t.node||t[0].node;return n.parentNode.insertBefore(this.node,n),e._insertbefore(this,t,this.paper),this},C.blur=function(t){var n=this;if(+t!==0){var r=m("filter"),i=m("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,m(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},e._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var s=new N(i,e);return s.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},s.type="circle",m(i,s.attrs),s},e._engine.rect=function(e,t,n,r,i,s){var o=m("rect");e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:t,y:n,width:r,height:i,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},u.type="rect",m(o,u.attrs),u},e._engine.ellipse=function(e,t,n,r,i){var s=m("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new N(s,e);return o.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},o.type="ellipse",m(s,o.attrs),o},e._engine.image=function(e,t,n,r,i,s){var o=m("image");m(o,{x:n,y:r,width:i,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:n,y:r,width:i,height:s,src:t},u.type="image",u},e._engine.text=function(t,n,r,i){var s=m("text");t.canvas&&t.canvas.appendChild(s);var o=new N(s,t);return o.attrs={x:n,y:r,"text-anchor":"middle",text:i,font:e._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",S(o,o.attrs),o},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container,r=t.x,i=t.y,s=t.width,o=t.height;if(!n)throw new Error("SVG container not found.");var u=m("svg"),a="overflow:hidden;",f;return r=r||0,i=i||0,s=s||512,o=o||342,m(u,{height:o,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),n==1?(u.style.cssText=a+"position:absolute;left:"+r+"px;top:"+i+"px",e._g.doc.body.appendChild(u),f=1):(u.style.cssText=a+"position:relative",n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u)),n=new e._Paper,n.width=s,n.height=o,n.canvas=u,n.clear(),n._left=n._top=0,f&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){l("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var s=o(n/this.width,r/this.height),u=this.top,a=i?"meet":"xMinYMin",f,c;e==null?(this._vbSize&&(s=1),delete this._vbSize,f="0 0 "+this.width+h+this.height):(this._vbSize=s,f=e+h+t+h+n+h+r),m(this.canvas,{viewBox:f,preserveAspectRatio:a});while(s&&u)c="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":c}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e=this.canvas,t=e.style,n;try{n=e.getScreenCTM()||e.createSVGMatrix()}catch(r){n=e.createSVGMatrix()}var i=-n.e%1,s=-n.f%1;if(i||s)i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),s&&(this._top=(this._top+s)%1,t.top=this._top+"px")},e.prototype.clear=function(){e.eve("raphael.clear",this);var t=this.canvas;while(t.firstChild)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){l("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null};var k=e.st;for(var L in C)C[t](L)&&!k[t](L)&&(k[L]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(L))}(window.Raphael),window.Raphael.vml&&function(e){var t="hasOwnProperty",n=String,r=parseFloat,i=Math,s=i.round,o=i.max,u=i.min,a=i.abs,f="fill",l=/[, ]+/,c=e.eve,h=" progid:DXImageTransform.Microsoft",p=" ",d="",v={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",w=21600,E={path:1,rect:1,image:1},S={circle:1,ellipse:1},x=function(t){var r=/[ahqstv]/ig,i=e._pathToAbsolute;n(t).match(r)&&(i=e._path2curve),r=/[clmz]/g;if(i==e._pathToAbsolute&&!n(t).match(r)){var o=n(t).replace(m,function(e,t,n){var r=[],i=t.toLowerCase()=="m",o=v[t];return n.replace(y,function(e){i&&r.length==2&&(o+=r+v[t=="m"?"l":"L"],r=[]),r.push(s(e*w))}),o+r});return o}var u=i(t),a,f;o=[];for(var l=0,c=u.length;l<c;l++){a=u[l],f=u[l][0].toLowerCase(),f=="z"&&(f="x");for(var h=1,g=a.length;h<g;h++)f+=s(a[h]*w)+(h!=g-1?",":d);o.push(f)}return o.join(p)},T=function(t,n,r){var i=e.matrix();return i.rotate(-t,.5,.5),{dx:i.x(n,r),dy:i.y(n,r)}},N=function(e,t,n,r,i,s){var o=e._,u=e.matrix,l=o.fillpos,c=e.node,h=c.style,d=1,v="",m,g=w/t,y=w/n;h.visibility="hidden";if(!t||!n)return;c.coordsize=a(g)+p+a(y),h.rotation=s*(t*n<0?-1:1);if(s){var b=T(s,r,i);r=b.dx,i=b.dy}t<0&&(v+="x"),n<0&&(v+=" y")&&(d=-1),h.flip=v,c.coordorigin=r*-g+p+i*-y;if(l||o.fillsize){var E=c.getElementsByTagName(f);E=E&&E[0],c.removeChild(E),l&&(b=T(s,u.x(l[0],l[1]),u.y(l[0],l[1])),E.position=b.dx*d+p+b.dy*d),o.fillsize&&(E.size=o.fillsize[0]*a(t)+p+o.fillsize[1]*a(n)),c.appendChild(E)}h.visibility="visible"};e.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var C=function(e,t,r){var i=n(t).toLowerCase().split("-"),s=r?"end":"start",o=i.length,u="classic",a="medium",f="medium";while(o--)switch(i[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":u=i[o];break;case"wide":case"narrow":f=i[o];break;case"long":case"short":a=i[o]}var l=e.node.getElementsByTagName("stroke")[0];l[s+"arrow"]=u,l[s+"arrowlength"]=a,l[s+"arrowwidth"]=f},k=function(i,a){i.attrs=i.attrs||{};var c=i.node,h=i.attrs,v=c.style,m,g=E[i.type]&&(a.x!=h.x||a.y!=h.y||a.width!=h.width||a.height!=h.height||a.cx!=h.cx||a.cy!=h.cy||a.rx!=h.rx||a.ry!=h.ry||a.r!=h.r),y=S[i.type]&&(h.cx!=a.cx||h.cy!=a.cy||h.r!=a.r||h.rx!=a.rx||h.ry!=a.ry),b=i;for(var T in a)a[t](T)&&(h[T]=a[T]);g&&(h.path=e._getPath[i.type](i),i._.dirty=1),a.href&&(c.href=a.href),a.title&&(c.title=a.title),a.target&&(c.target=a.target),a.cursor&&(v.cursor=a.cursor),"blur"in a&&i.blur(a.blur);if(a.path&&i.type=="path"||g)c.path=x(~n(h.path).toLowerCase().indexOf("r")?e._pathToAbsolute(h.path):h.path),i.type=="image"&&(i._.fillpos=[h.x,h.y],i._.fillsize=[h.width,h.height],N(i,1,1,0,0,0));"transform"in a&&i.transform(a.transform);if(y){var k=+h.cx,A=+h.cy,O=+h.rx||+h.r||0,_=+h.ry||+h.r||0;c.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((k-O)*w),s((A-_)*w),s((k+O)*w),s((A+_)*w),s(k*w))}if("clip-rect"in a){var D=n(a["clip-rect"]).split(l);if(D.length==4){D[2]=+D[2]+ +D[0],D[3]=+D[3]+ +D[1];var P=c.clipRect||e._g.doc.createElement("div"),H=P.style;H.clip=e.format("rect({1}px {2}px {3}px {0}px)",D),c.clipRect||(H.position="absolute",H.top=0,H.left=0,H.width=i.paper.width+"px",H.height=i.paper.height+"px",c.parentNode.insertBefore(P,c),P.appendChild(c),c.clipRect=P)}a["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(i.textpath){var B=i.textpath.style;a.font&&(B.font=a.font),a["font-family"]&&(B.fontFamily='"'+a["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,d)+'"'),a["font-size"]&&(B.fontSize=a["font-size"]),a["font-weight"]&&(B.fontWeight=a["font-weight"]),a["font-style"]&&(B.fontStyle=a["font-style"])}"arrow-start"in a&&C(b,a["arrow-start"]),"arrow-end"in a&&C(b,a["arrow-end"],1);if(a.opacity!=null||a["stroke-width"]!=null||a.fill!=null||a.src!=null||a.stroke!=null||a["stroke-width"]!=null||a["stroke-opacity"]!=null||a["fill-opacity"]!=null||a["stroke-dasharray"]!=null||a["stroke-miterlimit"]!=null||a["stroke-linejoin"]!=null||a["stroke-linecap"]!=null){var j=c.getElementsByTagName(f),F=!1;j=j&&j[0],!j&&(F=j=M(f)),i.type=="image"&&a.src&&(j.src=a.src),a.fill&&(j.on=!0);if(j.on==null||a.fill=="none"||a.fill===null)j.on=!1;if(j.on&&a.fill){var I=n(a.fill).match(e._ISURL);if(I){j.parentNode==c&&c.removeChild(j),j.rotate=!0,j.src=I[1],j.type="tile";var q=i.getBBox(1);j.position=q.x+p+q.y,i._.fillpos=[q.x,q.y],e._preload(I[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else j.color=e.getRGB(a.fill).hex,j.src=d,j.type="solid",e.getRGB(a.fill).error&&(b.type in{circle:1,ellipse:1}||n(a.fill).charAt()!="r")&&L(b,a.fill,j)&&(h.fill="none",h.gradient=a.fill,j.rotate=!1)}if("fill-opacity"in a||"opacity"in a){var U=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+e.getRGB(a.fill).o+1||2)-1);U=u(o(U,0),1),j.opacity=U,j.src&&(j.color="none")}c.appendChild(j);var z=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],W=!1;!z&&(W=z=M("stroke"));if(a.stroke&&a.stroke!="none"||a["stroke-width"]||a["stroke-opacity"]!=null||a["stroke-dasharray"]||a["stroke-miterlimit"]||a["stroke-linejoin"]||a["stroke-linecap"])z.on=!0;(a.stroke=="none"||a.stroke===null||z.on==null||a.stroke==0||a["stroke-width"]==0)&&(z.on=!1);var X=e.getRGB(a.stroke);z.on&&a.stroke&&(z.color=X.hex),U=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+X.o+1||2)-1);var V=(r(a["stroke-width"])||1)*.75;U=u(o(U,0),1),a["stroke-width"]==null&&(V=h["stroke-width"]),a["stroke-width"]&&(z.weight=V),V&&V<1&&(U*=V)&&(z.weight=1),z.opacity=U,a["stroke-linejoin"]&&(z.joinstyle=a["stroke-linejoin"]||"miter"),z.miterlimit=a["stroke-miterlimit"]||8,a["stroke-linecap"]&&(z.endcap=a["stroke-linecap"]=="butt"?"flat":a["stroke-linecap"]=="square"?"square":"round");if(a["stroke-dasharray"]){var $={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};z.dashstyle=$[t](a["stroke-dasharray"])?$[a["stroke-dasharray"]]:d}W&&c.appendChild(z)}if(b.type=="text"){b.paper.canvas.style.display=d;var J=b.paper.span,K=100,Q=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);v=J.style,h.font&&(v.font=h.font),h["font-family"]&&(v.fontFamily=h["font-family"]),h["font-weight"]&&(v.fontWeight=h["font-weight"]),h["font-style"]&&(v.fontStyle=h["font-style"]),Q=r(h["font-size"]||Q&&Q[0])||10,v.fontSize=Q*K+"px",b.textpath.string&&(J.innerHTML=n(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=J.getBoundingClientRect();b.W=h.w=(G.right-G.left)/K,b.H=h.h=(G.bottom-G.top)/K,b.X=h.x,b.Y=h.y+b.H/2,("x"in a||"y"in a)&&(b.path.v=e.format("m{0},{1}l{2},{1}",s(h.x*w),s(h.y*w),s(h.x*w)+1));var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var Z=0,et=Y.length;Z<et;Z++)if(Y[Z]in a){b._.dirty=1;break}switch(h["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},L=function(t,s,o){t.attrs=t.attrs||{};var u=t.attrs,a=Math.pow,f,l,c="linear",h=".5 .5";t.attrs.gradient=s,s=n(s).replace(e._radial_gradient,function(e,t,n){return c="radial",t&&n&&(t=r(t),n=r(n),a(t-.5,2)+a(n-.5,2)>.25&&(n=i.sqrt(.25-a(t-.5,2))*((n>.5)*2-1)+.5),h=t+p+n),d}),s=s.split(/\s*\-\s*/);if(c=="linear"){var v=s.shift();v=-r(v);if(isNaN(v))return null}var m=e._parseDots(s);if(!m)return null;t=t.shape||t.node;if(m.length){t.removeChild(o),o.on=!0,o.method="none",o.color=m[0].color,o.color2=m[m.length-1].color;var g=[];for(var y=0,b=m.length;y<b;y++)m[y].offset&&g.push(m[y].offset+p+m[y].color);o.colors=g.length?g.join():"0% "+o.color,c=="radial"?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=h,o.angle=0):(o.type="gradient",o.angle=(270-v)%360),t.appendChild(o)}return 1},A=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},O=e.el;A.prototype=O,O.constructor=A,O.transform=function(t){if(t==null)return this._.transform;var r=this.paper._viewBoxShift,i=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:d,s;r&&(s=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||d)),e._extractTransform(this,i+t);var o=this.matrix.clone(),u=this.skew,a=this.node,f,l=~n(this.attrs.fill).indexOf("-"),c=!n(this.attrs.fill).indexOf("url(");o.translate(-0.5,-0.5);if(c||l||this.type=="image"){u.matrix="1 0 0 1",u.offset="0 0",f=o.split();if(l&&f.noRotation||!f.isSimple){a.style.filter=o.toFilter();var h=this.getBBox(),v=this.getBBox(1),m=h.x-v.x,g=h.y-v.y;a.coordorigin=m*-w+p+g*-w,N(this,1,1,m,g,0)}else a.style.filter=d,N(this,f.scalex,f.scaley,f.dx,f.dy,f.rotate)}else a.style.filter=d,u.matrix=n(o),u.offset=o.offset();return s&&(this._.transform=s),this},O.rotate=function(e,t,i){if(this.removed)return this;if(e==null)return;e=n(e).split(l),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this},O.translate=function(e,t){return this.removed?this:(e=n(e).split(l),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},O.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(l),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3]),isNaN(i)&&(i=null),isNaN(s)&&(s=null)),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this._.dirtyT=1,this},O.hide=function(){return!this.removed&&(this.node.style.display="none"),this},O.show=function(){return!this.removed&&(this.node.style.display=d),this},O._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},O.remove=function(){if(this.removed||!this.node.parentNode)return;this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null;this.removed=!0},O.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n==f&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var o=n.split(l),u={};for(var a=0,h=o.length;a<h;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return h-1?u:u[o[0]]}if(this.attrs&&r==null&&e.is(n,"array")){u={};for(a=0,h=n.length;a<h;a++)u[n[a]]=this.attr(n[a]);return u}var p;r!=null&&(p={},p[n]=r),r==null&&e.is(n,"object")&&(p=n);for(var d in p)c("raphael.attr."+d+"."+this.id,this,p[d]);if(p){for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&p[t](d)&&e.is(this.paper.customAttributes[d],"function")){var v=this.paper.customAttributes[d].apply(this,[].concat(p[d]));this.attrs[d]=p[d];for(var m in v)v[t](m)&&(p[m]=v[m])}p.text&&this.type=="text"&&(this.textpath.string=p.text),k(this,p)}return this},O.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},O.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this)},O.insertAfter=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this)},O.insertBefore=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper),this)},O.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;r=r.replace(g,d),+t!==0?(this.attrs.blur=t,n.filter=r+p+h+".Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",s(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur)},e._engine.path=function(e,t){var n=M("shape");n.style.cssText=b,n.coordsize=w+p+w,n.coordorigin=t.coordorigin;var r=new A(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=d,k(r,i),t.canvas.appendChild(n);var s=M("skew");return s.on=!0,n.appendChild(s),r.skew=s,r.transform(d),r},e._engine.rect=function(t,n,r,i,s,o){var u=e._rectPath(n,r,i,s,o),a=t.path(u),f=a.attrs;return a.X=f.x=n,a.Y=f.y=r,a.W=f.width=i,a.H=f.height=s,f.r=o,f.path=u,a.type="rect",a},e._engine.ellipse=function(e,t,n,r,i){var s=e.path(),o=s.attrs;return s.X=t-r,s.Y=n-i,s.W=r*2,s.H=i*2,s.type="ellipse",k(s,{cx:t,cy:n,rx:r,ry:i}),s},e._engine.circle=function(e,t,n,r){var i=e.path(),s=i.attrs;return i.X=t-r,i.Y=n-r,i.W=i.H=r*2,i.type="circle",k(i,{cx:t,cy:n,r:r}),i},e._engine.image=function(t,n,r,i,s,o){var u=e._rectPath(r,i,s,o),a=t.path(u).attr({stroke:"none"}),l=a.attrs,c=a.node,h=c.getElementsByTagName(f)[0];return l.src=n,a.X=l.x=r,a.Y=l.y=i,a.W=l.width=s,a.H=l.height=o,l.path=u,a.type="image",h.parentNode==c&&c.removeChild(h),h.rotate=!0,h.src=n,h.type="tile",a._.fillpos=[r,i],a._.fillsize=[s,o],c.appendChild(h),N(a,1,1,0,0,0),a},e._engine.text=function(t,r,i,o){var u=M("shape"),a=M("path"),f=M("textpath");r=r||0,i=i||0,o=o||"",a.v=e.format("m{0},{1}l{2},{1}",s(r*w),s(i*w),s(r*w)+1),a.textpathok=!0,f.string=n(o),f.on=!0,u.style.cssText=b,u.coordsize=w+p+w,u.coordorigin="0 0";var l=new A(u,t),c={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:o};l.shape=u,l.path=a,l.textpath=f,l.type="text",l.attrs.text=n(o),l.attrs.x=r,l.attrs.y=i,l.attrs.w=1,l.attrs.h=1,k(l,c),u.appendChild(f),u.appendChild(a),t.canvas.appendChild(u);var h=M("skew");return h.on=!0,u.appendChild(h),l.skew=h,l.transform(d),l},e._engine.setSize=function(t,n){var r=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),r.width=t,r.height=n,r.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,r,i,s){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,r,i,s]);var u=this.width,a=this.height,f=1/o(r/u,i/a),l,c;return s&&(l=a/i,c=u/r,r*l<u&&(t-=(u-r*l)/2/l),i*c<a&&(n-=(a-i*c)/2/c)),this._viewBox=[t,n,r,i,!!s],this._viewBoxShift={dx:-t,dy:-n,scale:f},this.forEach(function(e){e.transform("...")}),this};var M;e._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),M=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){M=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,r=t.height,i,s=t.width,o=t.x,u=t.y;if(!n)throw new Error("VML container not found.");var a=new e._Paper,f=a.canvas=e._g.doc.createElement("div"),l=f.style;return o=o||0,u=u||0,s=s||512,r=r||342,a.width=s,a.height=r,s==+s&&(s+="px"),r==+r&&(r+="px"),a.coordsize=w*1e3+p+w*1e3,a.coordorigin="0 0",a.span=e._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",f.appendChild(a.span),l.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,r),n==1?(e._g.doc.body.appendChild(f),l.left=o+"px",l.top=u+"px",l.position="absolute"):n.firstChild?n.insertBefore(f,n.firstChild):n.appendChild(f),a.renderfix=function(){},a},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=d,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null;return!0};var _=e.st;for(var D in O)O[t](D)&&!_[t](D)&&(_[D]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(D))}(window.Raphael),define("libs/raphael",[],function(){}),define("map/CleverMapTweener",["hv/animation/Easing","hv/animation/AnimationFrame","libs/raphael"],function(e,t){function i(e){this.map=e,this.currentProgress=0,this.targetPos=null,this.currentPos={x:0,y:0,scale:1.8},this.posSpeed={x:0,y:0,scale:0};var t=this;this.myAnimate=function(){t.animate()}}function s(t,n,r){return e.quintInOut(r,t,n-t,1)}function o(t,n,r){return e.sineInOut(r,t,n-t,1)}var n=t.request,r=t.cancel;return i.prototype.setProgress=function(e){var t=this.map,n=this.getClosestWaypointBelow(e),r=this.getClosestWaypointAbove(e),i=t.getCoveringWaypoint(n,r),u=(e-n.position)/(r.position-n.position);if(!u||u==Number.POSITIVE_INFINITY)u=0;Math.floor(i.zoom*100)==Math.floor(n.zoom*100)||Math.floor(i.zoom*100)==Math.floor(r.zoom*100)?i.zoom=(n.zoom+r.zoom)/2:i.zoom=t.getOverall().zoom+1;var a=t.getRealWorldPixel(n.lat,n.lng),f=t.getRealWorldPixel(r.lat,r.lng),l=s(a.x,f.x,u),c=s(a.y,f.y,u),h=u<.5?o(n.zoom,i.zoom,u*2):o(i.zoom,r.zoom,u*2-1),p=t.getRealWorldScale(h);this.targetPos={x:-l,y:-c,scale:p},this.startAnimation()},i.prototype.animate=function(){var e=this.map,t=this.currentPos,r=this.targetPos,i=this.posSpeed;if(r&&(Math.abs(r.x*r.scale-t.x*t.scale)>5||Math.abs(r.y*r.scale-t.y*t.scale)>5||Math.abs(r.scale-t.scale)>.001)){var s=t.x+(r.x-t.x)/10,o=t.y+(r.y-t.y)/10,u=(t.y-o)*(t.y-o)+(t.x-s)*(t.x-s);u=Math.sqrt(u);var a=Math.max(0,6/Math.sqrt(u)),f=Math.log(t.scale)/Math.LN2||.01,l=Math.log(r.scale)/Math.LN2;l=Math.min(a,l);var c=f+(l-f)/10,h=c-f,p=Math.max((c+7)*(c+7)*4e-4,.001);Math.abs(h)>p&&(c=f+p*(h/Math.abs(h)));var d=Math.pow(2,c),v=10/d;u>v&&(s=t.x+(s-t.x)/u*v,o=t.y+(o-t.y)/u*v),i.x+=(s-t.x-i.x)/5,i.y+=(o-t.y-i.y)/5,d<t.scale||i.scale<0?i.scale+=(d-t.scale-i.scale)/5:i.scale=d-t.scale,t.x+=i.x,t.y+=i.y,t.scale+=i.scale,this.map.moveToPixel(t.x,t.y,t.scale)}this.animation=n(this.myAnimate)},i.prototype.stopAnimation=function(){r(this.animation),this.animation=null},i.prototype.startAnimation=function(){this.animation||(this.animation=n(this.myAnimate))},i.prototype.getClosestWaypointBelow=function(e){var t,n,r,i=Number.MAX_VALUE,s=this.map.waypoints;for(var o=0;o<s.length;o++)t=s[o],n=Math.abs(t.position-e),n<i&&e>=t.position&&(r=t,i=n);return r||this.map.getOverall()},i.prototype.getClosestWaypointAbove=function(e){var t,n,r,i=Number.MAX_VALUE,s=this.map.waypoints;for(var o=0;o<s.length;o++)t=s[o],n=Math.abs(t.position-e),n<i&&e<=t.position&&(r=t,i=n);return r||s[s.length-1]},i}),define("map/MarkerMap.class",["map/GraphicsUtil"],function(e){function r(e){var n=this;e.addEventListener("mapchange",function(e){n.handleMapChange()}),this.map=e,this.$container=$('<div class="map-markers"></div>'),this.$container.css(t),this.layers={},this.markers=[]}function i(e,t,n){this.elem=e,this.x=t,this.y=n,this.layer=null,this.visible=!0,this.active=!0}function s(e,t,n){this.elem=e,this.minScale=t,this.maxScale=n,this.active=!0}var t=e.getDefaultTransform(),n=e.transform;return r.prototype.handleMapChange=function(e){this.render()},r.prototype.render=function(){var e=this.map.viewx,t=this.map.viewy,n=this.map.viewscale,r,i;for(i=0;i<this.markers.length;i++)r=this.markers[i],this.renderMarker(r)},r.prototype.addMarker=function(n,r,s){var o=$(n),u=this.layers[s],a=u?u.elem:this.$container;a.append(n),o.css({position:"absolute",top:0,left:0}),o.css(t);if(r.lat||r.lng)r=map.getRealWorldPixel(r.lat,r.lng);var f=new i(o,r.x,r.y);return f.layer=u,e.hide(f.elem),f.visible=!1,this.markers.push(f),this.renderMarker(f),f},r.prototype.addLayer=function(e,r,i,o){o=o||0;var u=$('<div class="map-marker-layer"></div>');return u.css(t),u.appendTo(this.$container),n(u,0,0,1,o+1e4),this.layers[e]=new s(u,map.getRealWorldScale(r),map.getRealWorldScale(i)),u},r.prototype.renderMarker=function(t){var r=this.map.viewx,i=this.map.viewy,s=this.map.viewscale,o=t.layer;if(o){var u=o.minScale<s&&o.maxScale>=s;u!=t.visible&&(u?e.fadeIn(t.elem):e.fadeOut(t.elem),t.visible=u)}t.active&&n(t.elem,(t.x+r)*s,(t.y+i)*s,1,1e3)},r}),define("map/MapRoute",["map/GraphicsUtil","hv/animation/AnimationFrame","hv/animation/Easing","libs/raphael"],function(e,t,s){function o(e,t,n){var r=this;this.map=e,e.addEventListener("mapchange",function(e){r.handleMapChange()}),this.progress=0,this.targetProgress=0,this.$container=$('<div class="map-route"></div>'),this.paper=Raphael(this.$container[0],t,n),this.setSize(t,n)}function u(e){return s.quintInOut(e,0,1,1)}function f(e){var t=[],n=[],r;for(r=0;r<e.length;r++)t[r]=e[r].x,n[r]=e[r].y;var i=l(t),s=l(n),o="M"+[e[0].x,e[0].y];for(r=0;r<e.length-1;r++)o+="C"+[i.p1[r],s.p1[r],i.p2[r],s.p2[r],t[r+1],n[r+1]].join(" ");return o}function l(e){p1=[],p2=[],n=e.length-1,a=[],b=[],c=[],r=[],a[0]=0,b[0]=2,c[0]=1,r[0]=e[0]+2*e[1];for(i=1;i<n-1;i++)a[i]=1,b[i]=4,c[i]=1,r[i]=4*e[i]+2*e[i+1];a[n-1]=2,b[n-1]=7,c[n-1]=0,r[n-1]=8*e[n-1]+e[n];for(i=1;i<n;i++)m=a[i]/b[i-1],b[i]=b[i]-m*c[i-1],r[i]=r[i]-m*r[i-1];p1[n-1]=r[n-1]/b[n-1];for(i=n-2;i>=0;--i)p1[i]=(r[i]-c[i]*p1[i+1])/b[i];for(i=0;i<n-1;i++)p2[i]=2*e[i+1]-p1[i+1];return p2[n-1]=.5*(e[n]+p1[n-1]),{p1:p1,p2:p2}}function h(e,t,n,r,i){var s=-3*t+9*n-9*r+3*i,o=e*s+6*t-12*n+6*r;return e*o-3*t+3*n}function p(e,t,n,r,i,s,o,u,a){a==null&&(a=1),a=a>1?1:a<0?0:a;var f=a/2,l=12,c=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0;for(var v=0;v<l;v++){var m=f*c[v]+f,g=h(m,e,n,i,o),y=h(m,t,r,s,u),b=g*g+y*y;d+=p[v]*Math.sqrt(b)}return f*d}o.prototype.setRoutePath=function(e){var t=this.paper.path(e);t.attr({stroke:"#FF6666","stroke-width":3}),this.positionMarker=this.createLocationElement(),this.segments=v(t.attrs.path),this.routeLength=this.segments.total,this.route=t,this.renderRoute(),this.renderProgress()},o.prototype.setRoutePoints=function(e){var t=f(e);return this.setRoutePath(t),t},o.prototype.startLoop=function(){function n(){e.stopLoop(),e.loop()&&(e.animation=t.request(n))}var e=this;this.animation=t.request(n)},o.prototype.stopLoop=function(){t.cancel(this.animation)},o.prototype.getRoute=function(){return this.route},o.prototype.setSize=function(e,t){this.width=e,this.height=t,this.paper.setSize(e,t),this.$container.css({position:"absolute",left:"0%",top:"0%","margin-left":-e/2,"margin-top":-t/2})},o.prototype.transform=function(e,t,n){var r=this.width/2,i=this.height/2,s="",o=","+[r,i].join(",");s+="s"+n+","+n+o,s+="t"+(r+e)+","+(i+t),this.route.transform(s)},o.prototype.setProgress=function(e){e!=this.targetProgress&&(this.targetProgress=e,this.startLoop())},o.prototype.handleMapChange=function(){this.renderRoute(),this.renderProgress()},o.prototype.loop=function(){if(Math.round(this.progress*1e4)==Math.round(this.targetProgress*1e4))return this.progress=this.targetProgress,this.renderProgress(),!1;var e=Math.sqrt(this.map.viewscale)+5,t=Math.pow(2,e),n=this.targetProgress-this.progress,r=n/Math.abs(n),i=Math.abs(n/25),s=1/(this.map.viewscale+10);return i<5e-5&&(i=Math.min(5e-5,Math.abs(n))),i=Math.min(s,i),this.progress+=i*r,this.renderProgress(),!0},o.prototype.renderRoute=function(){var e=this.map.viewx,t=this.map.viewy,n=this.map.viewscale;this.transform(e,t,n)},o.prototype.renderProgress=function(){var e=this.map.viewx,t=this.map.viewy,n=this.map.viewscale,r=this.width/2,i=this.height/2,s=this.progressToLength(this.progress),o=this.route.getPointAtLength(s);console.log(o.x,o.y),this.positionMarker.transform("t"+[r+(o.x+e)*n,i+(o.y+t)*n]),this.onProgress&&this.onProgress(this.progress)},o.prototype.progressToLength=function(e){var t=e,n=Math.floor(t),r=t-n,i=0;for(var s=0;s<n;s++)i+=this.segments[s];return i+=this.segments[s]*r,i},o.prototype.createLocationElement=function(e){var t=this.paper.set();return t.push(this.paper.circle(0,0,18).attr({fill:"#ff6666",opacity:.3})),t.push(this.paper.circle(0,0,8).attr({fill:"black"})),t.push(this.paper.circle(0,0,5).attr({fill:"#ff6666"})),t.attr({stroke:"none"}),t};var d=function(e,t,n,r,i,s,o,u,a){return a==null?p(e,t,n,r,i,s,o,u):Raphael.findDotsAtSegment(e,t,n,r,i,s,o,u,getTatLen(e,t,n,r,i,s,o,u,a))},v=function(e){var t=[];e=Raphael._path2curve(e);var n,r,i,s,o="",u={},a,f=0;for(var l=0,c=e.length;l<c;l++)i=e[l],i[0]=="M"?(n=+i[1],r=+i[2]):(s=d(n,r,i[1],i[2],i[3],i[4],i[5],i[6]),t.push(s),f+=s,n=+i[5],r=+i[6]);return t.total=f,t};return o}),define("map/RouteStats",["jquery","libs/raphael"],function(e){function s(){e("#route-stats > li").each(function(){var n=e(this).attr("id").split("-")[0];t[n]=new f(this)})}function o(e){r||u();var s=a(e,!0),o=a(e,!1);s===!1&&(s=o),o===!1&&(o=s);var f=n[s],l=n[o],c=o==s?0:(e-s)/(o-s);for(var h in f){var p=t[h],d=f[h]+(l[h]-f[h])*c;p.setValue(d,r[h],i[h])}}function u(){r={},i={};var e=n[0],t,s,o;for(var u in e){t=1e5,s=-1e5;for(var a in n)o=n[a][u],o<t&&(t=o),o>s&&(s=o);r[u]=t,i[u]=s}}function a(e,t){var r,i,s;i=!1;if(t)for(r in n)s=r-0,(s>i||i===!1)&&s<=e&&(i=r);else for(r in n)s=r-0,(s<i||i===!1)&&s>e&&(i=r);return i}function c(e,t,n,r){var i=360/t*e,s=(90-i)*Math.PI/180,o=r+n*Math.cos(s),u=r-n*Math.sin(s),a;return t==e?a=[["M",r,r-n],["A",n,n,0,1,1,r-.01,r-n]]:a=[["M",r,r-n],["A",n,n,0,+(i>180),1,o,u]],{path:a}}var t={},n={},r,i,f=function(t){this.canvas=new l(e(t).children(".canvas")[0]),this.$value=e(t).children(".value"),this.text=null};f.prototype.setValue=function(e,t,n){var r=Math.round(e);this.text!=r&&this.$value.text(r),this.canvas.setValue((e-t)/(n-t))};var l=function(t){this.value=0,this.renderedValue=-1;var n=e(t).width(),r=e(t).height();this.paper=Raphael(t,n,r),this.paper.customAttributes.arc=c,this.paper.path().attr({arc:[100,100,18,21]}).attr({stroke:"#ffffff","stroke-width":5,"stroke-opacity":.2}),this.path=this.paper.path().attr({arc:[0,100,18,21]}).attr({stroke:"#ffffff","stroke-width":5,"stroke-opacity":.8}),this.setValue(.4)};return l.prototype.render=function(){Math.floor(this.renderedValue*360)!=Math.floor(this.value*360)&&(this.path.attr({arc:[this.value,1,18,21]}),this.renderedValue=this.value)},l.prototype.setValue=function(e){e=Math.max(0,Math.min(1,e));var t=this.value;e!=t&&(this.value=e,this.render())},{init:s,add:function(e,t){n[e]=t},setProgress:o}}),define("map/SeidenMap",["app/Config","map/FluidMap.class","map/CleverMapTweener","map/MarkerMap.class","map/MapRoute","map/RouteStats","map/GraphicsUtil","libs/modernizr.custom"],function(e,t,n,r,i,s,o){function E(e){e&&this.init(e),this.originx=-0.5}function S(e){var t={};for(var n in e)t[n]=e[n];return t}function x(e){var t=e-Math.floor(e),n=Math.floor(e),r=Math.ceil(e);return n==r?T(e):(n=T(n),r=T(r),n+(r-n)*t)}function T(e){var t=-1,n;for(var r=0;r<=e;r++){n=l[r];if(!n||n.routeIndex<0)continue;n.ignore&&e++,t++}return!n||n.routeIndex<0?t+1:t}function N(e){return!!e.country}function C(e,t,n){return n&&(n=n.split(", ").join("<br>")),$('<a href="#'+t+'" class="marker marker-'+e+'"><span class="icon"></span><span class="text"><span class="line">'+n+"</span></span></a>")}function k(){var e=E,t=e.$container.parent(),n=t.width(),r=t.height();if(n!=e.width||r!=e.height)e.width=n,e.height=r,d.setSize(n*2,r),d.renderRoute(),d.renderProgress(),e.setOriginX(e.originx)}(function(){window.console||(window.console={});var e=["log","error","time","timeEnd"],t=function(){};for(var n=0;n<e.length;n++)console[e[n]]||(console[e[n]]=t)})();var u=o.getDefaultTransform(),a=o.transform,f={lat:42.118031,lng:60.364201},l=e.get("waypoints"),c,h,p,d,v=!1,m=!1,g=0,y,b={x:0,y:0,scale:1},w={x:0,y:0,scale:0};return E.init=function(o){function g(e){return e+a}this.$target=$(o),$(this.$target).css(u),this.$container=$('<div id="map"></div>'),this.$container.css(u),this.$container.css({position:"absolute",top:"50%",left:"50%","z-index":0}),this.setOriginX(0,0),this.$container.appendTo(o),this.width=$(o).width(),this.height=$(o).height(),c=window.map=new t,h=new n(c),p=new r(c),d=new i(c,this.width*2,this.height),c.setViewport(this.width,this.height),c.addEventListener("loadcomplete",function(){E.onLoaded&&E.onLoaded()});var a=this.width/700;a=Math.log(a)/Math.LN2,c.setOverall(f.lat,f.lng,2+a),c.addWaypoint(0,f.lat+10,f.lng,3+a,!1),function(){var t=[];$.each(l,function(e,n){if(!n.lat)return n.routeIndex=-1,!0;n.routeIndex=t.length;var r=c.getRealWorldPixel(n.lat,n.lng);t.push(r)});var n=e.get("routePath");n?function(){var e=n;n="";var r=t[0].x/e[0].numbers[e[0].numbers.length-2];for(var i=0;i<e.length;i++){var s=e[i];for(var o=0;o<s.numbers.length;o++)s.numbers[o]*=r;n+=s.cmd+s.numbers.join(",")}d.setRoutePath(n)}():(console.log(d.setRoutePoints(t)),console.log(JSON.stringify(t)))}();var m;p.addLayer("country",0,6.1+a,2),p.addLayer("normal",6.1+a,100,1),function(){var e=0;$.each(l,function(t,n){if(n.lat)return e++,!0;var r=d.progressToLength(n.route+e),i=d.route.getPointAtLength(r),s=c.pixelsToLatLon(i.x,i.y);n.lat=s.lat,n.lng=s.lng}),$.each(l,function(e,t){if(t.zoom<7||t.ignore)return!0;p.addMarker(C("normal",t.id,t.name),t,"normal"),c.addWaypoint(e+1,t.lat,t.lng,v?g(3):g(t.zoom||9))}),$.each(l,function(e,t){if(t.zoom>=7||t.ignore)return!0;var n=C("country country-"+t.label,t.id,t.name);p.addMarker(n,t,"country"),c.addWaypoint(e+1,t.lat,t.lng,v?g(3):g(t.zoom||6))})}(),s.init(),function(){var e=0;$.each(l,function(t,n){if(!n.stat||n.ignore)return!0;s.add(e,n.stat),e++})}(),d.onProgress=function(e){s.setProgress(e)},m=S(l[1]),m.zoom=8+a,m.width=1.5,c.addSlide(m),m=S(l[1]),m.zoom=11+a,m.width=1.5,c.addSlide(m),m=S(f),m.zoom=4+a,m.width=3,c.addSlide(m),c.addWaypoint(100,f.lat,f.lng,3+a,!1),c.preload({complete:function(){$("#page-loading").addClass("loaded").fadeOut(function(){$(this).remove()}),console.log("complete")}}),this.$container.append(c.$container.css("position","absolute")),this.$container.append('<div id="color-overlay"></div>'),this.$container.append(d.$container.css({position:"absolute",transform:"translateZ(-9000px)"})),this.$container.append(p.$container.css("position","absolute")),$(window).resize(k)},E.setProgress=function(e){g=e,function(e){h.setProgress(e),e===1e3&&(e=0);var t=(e-1+.25)*8,n=Math.min(1,Math.max(0,t));E.setOriginX(n/2)}(m?1e3:e);var t=1-Math.min(1,Math.max(.3,e));$("#color-overlay").css({opacity:t});var n=Math.max(0,x(e-1));d.setProgress(n)},E.setOriginX=function(e,t){this.originx=e,e-=.5;var n=t||0;a(this.$container,e*this.$target.width(),n,1)},E.setViewMode=function(e){var t=e=="full";t!=m&&(m=t,E.setProgress(g))},E}),define("app/Lightbox",["jquery","app/Analytics"],function(e,t){function v(t){n=e(t||"#lightbox"),n.on(d,".prev",T),n.on(d,".next",N),n.on(d,".close",b),n.on(d,"img",function(){w(!E())}),p&&n.on("touchstart",function(e){e.preventDefault()}),e(window).resize(C),e(window).on("keydown",m)}function m(e){if(!l)return;switch(e.keyCode){case 37:T();break;case 39:N();break;case 27:b()}}function g(i,s){n||v(),t.trackMedia("galerie"),l=!0,n.show(),e("body").css("overflow","hidden"),h=-1,c=i,C(!0),r&&r.remove(),S(s),n.find(".next,.prev").css("display",c.length>1?"block":"none")}function y(t){t.preventDefault();var n=e(t.currentTarget),r=[],i=n.parents(".report").find("a[target=lightbox]"),s;return i.each(function(n,i){t.currentTarget==i&&(s=n);var o=e(this),u={src:o.attr("href"),caption:o.find("figcaption").text()};r.push(u)}),g(r,s)}function b(){l=!1,n.hide(),e("body").css("overflow","auto"),e(window).off("keydown",m)}function w(e){if(e==f)return;f=e,k()}function E(){return f}function S(t){t=(t+c.length)%c.length,t=Math.max(0,Math.min(c.length-1,t));if(t==h)return;var o=h;h=t;var u=o>=0&&l,f=c[h];n.addClass("loading"),r&&r.remove(),i&&i.remove(),i=e('<div class="caption">'+f.caption+"</div>"),n.find(".content").append(i),i.hide().fadeIn(),A(f.src,function(){var t=this;n.removeClass("loading"),s=e(t),a={width:t.width,height:t.height},r=e('<div class="figure"></div>'),r.append(t),k(),n.find(".content").append(r)})}function x(){return h}function T(){S(x()-1)}function N(){S(x()+1)}function C(e){if(!l)return;o={width:n.outerWidth(),height:n.outerHeight()};var t=n.find(".figure").first();u={width:t.outerWidth(),height:t.outerHeight()},e!==!0&&k()}function k(){if(!l)return;var e=Math.min(u.width/a.width,u.height/a.height),t=a.width*e,n=a.height*e;s.css({position:"absolute",width:t,height:n,top:"50%",left:"50%",marginLeft:-t/2,marginTop:-n/2});var i=Math.max(o.width/a.width,o.height/a.height),c=i/e;f?r.css("transform","scale("+c+")"):r.css("transform","scale(1)")}function A(t,n){var r=e("<img>")[0];return loadStarted=!0,r.src=t,r.complete?n&&n.apply(r):e(r).load(n),r}var n,r,i,s,o,u,a,f=!1,l=!1,c,h,p="ontouchstart"in window,d=p?"touchend":"click",L={init:v,open:g,close:b,setFullscreen:w,setIndex:S,prev:T,next:N,clickHandler:y};return L}),define("hv/util/OrientationAxis",["util/EventDispatcher"],function(e){var t={landscape:{x:"gamma",y:"beta",z:"alpha"},portrait:{x:"beta",y:"gamma",z:"alpha"}},n=1e3,r={x:0,y:0,z:0},i=new e;i.available=function(){return"ondeviceorientation"in window},i.setPrecision=function(e){n=1/e},i.get=function(e){return r[e]};var s=function(e){var s,o,u;for(var a in r)s=t[i.orientation][a],o=e[s],Math.round(o*n)!=Math.round(r[a]*n)&&(u=!0,r[a]=Math.round(o*n)/n,i.trigger("change"+a,o));u&&i.trigger("change",r)},o=function(e){i.orientation=window.orientation===0?"portrait":"landscape"};return i.available()&&(o(),window.addEventListener("orientationchange",o,!1),window.addEventListener("deviceorientation",s,!1)),i}),define("hv/graphic/PanoramaViewer.class",["jquery","hv/animation/AnimationFrame","hv/util/OrientationAxis"],function(e,t,n){function i(e,t){e&&t&&this.init(e,t)}function o(e){e&&this.init(e)}function u(e){this.viewer=e,this.image1=null,this.image2=null,this.imageSize=null}function a(t,n){this.numSides=n||16,this.viewer=t,this.holder=null,this.perspective=800,this.OVERPRINT=e.browser.mozilla?4:2}function f(t,n){var r=e("<img>")[0];return loadStarted=!0,r.src=t,r.complete?n&&n.apply(r):e(r).load(n),r}var r="MozPerspective"in document.body.style||"WebKitCSSMatrix"in window;i.prototype.init=function(t,n){var i=this;this.target=e(t),this.renderer=r?new a(this):new u(this),this.controller=new o(this),this.loaded=!1,this.load(n),e(window).resize(function(){if(!i.loaded)return;i.renderer.render(i.angle)})},i.prototype.load=function(e){var t=this;this.target.addClass("loading"),f(e,function(){var e=this;t.target.removeClass("loading"),t.setImage(e)})},i.prototype.getWidth=function(){return this.target.outerWidth()},i.prototype.getHeight=function(){return this.target.outerHeight()},i.prototype.setImage=function(e){this.loaded=!0;var t=this;this.angle=0,this.renderer.setup(e),this.renderer.render(this.angle),this.oncomplete&&this.oncomplete()},i.prototype.setAngle=function(e){this.angle=e,this.renderer.render(this.angle)},i.prototype.getAngle=function(){return this.angle},i.prototype.dispose=function(){this.loaded=!1,this.renderer.dispose()};var s="ontouchstart"in window;return o.prototype.init=function(e){var t=this;this.viewer=e,this.animationInterval=null,this.FRICTION=.9925,this.STOPPED_THRESHOLD=4,this._handleStart=function(e){t.handleStart(e)},this._handleMove=function(e){t.handleMove(e)},this._handleEnd=function(e){t.handleEnd(e)},this._handleAxis=function(e){t.handleAxis(e)},this.viewer.target.on("touchstart mousedown",this._handleStart),n.available()&&(this.lastAxisValue=null,this.axisTimer=null,n.addEventListener("changez",this._handleAxis))},o.prototype.handleStart=function(n){n.preventDefault(),n=n.originalEvent,t.cancel(this.decelerationTimer),t.cancel(this.axisTimer),this.axisTimer=null;var r=s?n.touches[0]:n,i=null;this.touchX=this.startX=r.clientX,this.startAngle=this.viewer.getAngle(),this.isMovingByHand=!0,this.history=[],this.history.push(this.touchX,(new Date).getTime()),e(document).on(s?"touchmove":"mousemove",this._handleMove),e(document).on(s?"touchend":"mouseup",this._handleEnd)},o.prototype.handleMove=function(e){e.preventDefault(),e=e.originalEvent;var t=s?e.touches[0]:e;this.touchX=t.clientX,this.history.push(this.touchX,(new Date).getTime());var n=this.touchX-this.startX;this.viewer.setAngle(this.startAngle-n/10)},o.prototype.handleEnd=function(t){t.preventDefault(),e(document).off(s?"touchmove":"mousemove",this._handleMove),e(document).off(s?"touchend":"mouseup",this._handleEnd),this.isMovingByHand=!1;if(this.history.length>=4){var n=this.history.pop();n=(new Date).getTime();var r=this.history.pop(),i=this.history.pop(),o=this.history.pop(),u=(r-o)/(n-i)*1e3;Math.abs(u)>30&&this.startDeceleration(u)}},o.prototype.startDeceleration=function(e){var n=this;t.cancel(this.decelerationTimer),this.decelerationSpeed=e,this.loopTime=(new Date).getTime(),this.decelerationTimer=t.request(function(){n.decelerate()})},o.prototype.decelerate=function(){var e=this,n=(new Date).getTime(),r=(n-this.loopTime)/1e3;this.decelerationSpeed*=.975,this.touchX+=this.decelerationSpeed*r;var i=this.touchX-this.startX;this.viewer.setAngle(this.startAngle-i/10),Math.abs(this.decelerationSpeed)>10?(this.loopTime=n,this.decelerationTimer=t.request(function(){e.decelerate()})):this.decelerationTimer=null},o.prototype.handleAxis=function(e){function s(){var e=r.viewer.getAngle(),n=e;e+=(r.axisAngle-e)/10,r.viewer.setAngle(e),Math.round(e*1e3)!=Math.round(n*1e3)?r.axisTimer=t.request(s):r.axisTimer=null}var r=this;if(this.decelerationTimer||this.isMovingByHand||Math.abs(n.get("x"))<10){this.lastAxisValue=null;return}if(this.lastAxisValue!==null){var i=e-this.lastAxisValue;i>180&&(i-=360),i<-180&&(i+=360);if(this.axisTimer===null||this.axisAngle===null)this.axisAngle=this.viewer.getAngle();this.axisAngle-=i,t.cancel(this.axisTimer),this.axisTimer=t.request(s)}this.lastAxisValue=e},u.prototype.setup=function(t){this.image1=e(t),this.image2=this.image1.clone(),this.imageSize={width:t.width||e(t).width(),height:t.height||e(t).height()},this.viewer.target.append(this.image1),this.viewer.target.append(this.image2)},u.prototype.render=function(e){e=(e%360+360)%360;var t=e/360,n=this.viewer.getWidth(),r=this.viewer.getHeight(),i=r/this.imageSize.height,s=-t*this.imageSize.width*i;this.image1.add(this.image2).css({width:i*this.imageSize.width,height:i*this.imageSize.height,position:"absolute",top:0}),this.image1.css({left:s}),this.image2.css({left:s+this.imageSize.width*i})},u.prototype.dispose=function(){this.viewer.target.children().remove()},a.prototype.setup=function(t){var n=t.width,r=t.height;this.imageSize={width:n,height:r};var i=n/this.numSides,s=this.radius=i/2/Math.tan(Math.PI/this.numSides);this.holder=e("<div></div>"),this.holder.css({perspective:this.perspective+"px"});for(var o=0;o<this.numSides;o++){var u=document.createElement("canvas");u.width=i+2*this.OVERPRINT,u.height=t.height;var a=u.getContext("2d");a.save(),a.drawImage(t,-o*i+this.OVERPRINT,0),o===0&&a.drawImage(t,-n+this.OVERPRINT,0),a.restore(),e(u).css({position:"absolute",left:-i/2-this.OVERPRINT,top:-r/2,transform:"rotateY("+ -360/this.numSides*o+"deg) translateZ("+ -s+"px)",backfaceVisibility:"hidden"}),this.holder.append(u)}this.viewer.target.append(this.holder)},a.prototype.render=function(t){var n=this.viewer.getWidth(),r=this.viewer.getHeight(),i=1+(r/this.imageSize.height-1)/2+.1;i=r/this.imageSize.height+.1;var s=this.imageSize.width/this.numSides*i,o=s/2/Math.tan(Math.PI/this.numSides);o=this.radius;var u,a;for(var f=0;f<this.numSides;f++)a=this.holder.children().eq(f),u=t-360/this.numSides*f,a.css({transform:"translateZ("+o+"px) scale3d("+[i,i,1]+") rotateY("+u+"deg) translateZ("+ -o+"px)"}),e.browser.mozilla&&(u%=360,u>180&&(u-=360),u<-180&&(u+=360),Math.abs(u)>60?a.css("visibility","hidden"):a.css("visibility","visible"));t=0,this.holder.css({position:"absolute",left:"50%",top:"50%"})},a.prototype.dispose=function(){this.viewer.target.children().remove(),this.viewer.target.removeAttr("style")},i}),define("app/PanoramaLightbox",["jquery","hv/graphic/PanoramaViewer.class","app/Analytics"],function(e,t,n){function c(t){r=e(t||"#lightbox-panorama"),r.on("click",".close",v),i=r.find(".figure"),e(window).on("keydown",d)}function h(s){r||c(),n.trackMedia("panorama"),f=!0,r.show();var o=document.getElementById("map-container");o&&(o.style.display="none"),e("body").css("overflow","hidden"),i.children().remove(),l=new t,r.addClass("loading"),l.oncomplete=function(){r.removeClass("loading")},l.init(i[0],s)}function p(t){t.preventDefault();var n=e(t.currentTarget);return h(n.attr("href"))}function d(e){if(!f)return;switch(e.keyCode){case 37:l.setAngle(l.getAngle()-30);break;case 39:l.setAngle(l.getAngle()+30);break;case 27:v()}}function v(){e("body").css("overflow","auto");var t=document.getElementById("map-container");t&&(t.style.display="block"),l.dispose(),f=!1,r.hide()}function g(t,n){var r=e("<img>")[0];return loadStarted=!0,r.src=t,r.complete?n&&n.apply(r):e(r).load(n),r}var r,i,s,o,u,a=!1,f=!1,l,m={init:c,open:h,close:v,clickHandler:p};return m}),define("app/IntroPageRenderer",["map/GraphicsUtil","hv/animation/Easing"],function(e,t){function r(e,r){var i,s,o,u;i=(e+1)/.5,i=Math.min(1,Math.max(0,i)),i<1?(s=1-i,$("#intro-page").css({display:"block",opacity:s}),o=0,u=t.sineIn(i,0,-250,1),$("#intro-page").css("transform","translate("+o+"px,"+u+"px)")):$("#intro-page").css({display:"none"});var a=$(".scroll-intro");a.length&&(i<1?(u=t.sineIn(i,0,-300,1),a.css("transform","translate(0,"+u+"px)"),a.css("opacity",1+u/300)):r<0?(a.css("transform","translate(0,-300px)"),a.css("opacity",0)):e>=0&&a.remove());var f=-0.1;e>=f&&r<f?$(".main-navigation").css("left","50%"):e<f&&r>=f&&$(".main-navigation").css("left","0%"),f=-0.475,e>=f&&r<f?$("#logo-link").css("left","50%"):e<f&&r>=f&&$("#logo-link").css("left","0%"),f=-0.1,e>=f&&r<f?$("#route-stats").css({display:"block",opacity:1,transform:"none"}):(e<f&&r>=f||n)&&$("#route-stats").css({display:"none",opacity:0,transform:"translate(0,100px)"}),n=!1}var n=!0;return r}),define("hv/util/Cookie",[],function(){function t(t){return"[object Date]"==e.call(t)}function n(t){return"[object RegExp]"==e.call(t)}var e=Object.prototype.toString,r={get:function(t){return r.has(t)?r.list()[t]:null},has:function(t){return(new RegExp("(?:;\\s*|^)"+encodeURIComponent(t)+"=")).test(document.cookie)},list:function(t){var r=document.cookie.split(";"),i,s={};for(var o=0,u=r.length;o<u;++o){i=r[o].split("="),i[0]=i[0].replace(/^\s+|\s+$/,"");if(!n(t)||t.test(i[0]))s[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return s},remove:function(t,n){var i={};for(var s in n||{})i[s]=n[s];return i.expires=new Date(0),i.maxAge=-1,r.set(t,null,i)},set:function(n,r,i){i=i||{};var s=[encodeURIComponent(n)+"="+encodeURIComponent(r)];i.path&&s.push("path="+i.path),i.domain&&s.push("domain="+i.domain);var o="maxAge"in i?i.maxAge:"max_age"in i?i.max_age:i["max-age"],u;"undefined"!=typeof o&&"null"!=typeof o&&!isNaN(u=parseFloat(o))&&s.push("max-age="+u);var a=t(i.expires)?i.expires.toUTCString():i.expires;return a&&s.push("expires="+a),i.secure&&s.push("secure"),s=s.join(";"),document.cookie=s,s},test:function(){var t="70ab3d396b85e670f25b93be05e027e4eb655b71",n="Élodie Jaubert";r.remove(t),r.set(t,n);var i=n==r.get(t);return r.remove(t),i}};return r}),define("util/SmoothScroll",["jquery"],function(e){e(document).on("click","a",function(t){var n=e(t.currentTarget),r=n.attr("href");if(r&&r.indexOf("#")>=0){r=r.substr(r.indexOf("#")),t.preventDefault();var i=e(r);if(i.length===0){console.log('Anchor "'+r+'" not found.');return}var s=i.offset().top;e("html, body").animate({scrollTop:s},500)}})}),window.Socialite=function(e,t,n){var r=0,i=[],s={},o={},u=/^($|loaded|complete)/,a=e.encodeURIComponent,f={settings:{},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},hasClass:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},addClass:function(e,t){f.hasClass(e,t)||(e.className=e.className===""?t:e.className+" "+t)},removeClass:function(e,t){e.className=f.trim(" "+e.className+" ".replace(" "+t+" "," "))},extendObject:function(e,t,r){for(var i in t){var s=e[i]!==n;if(s&&typeof t[i]=="object")f.extendObject(e[i],t[i],r);else if(r||!s)e[i]=t[i]}},getElements:function(e,t){var n=0,r=[],i=!!e.getElementsByClassName,s=i?e.getElementsByClassName(t):e.getElementsByTagName("*");for(;n<s.length;n++)(i||f.hasClass(s[n],t))&&r.push(s[n]);return r},getDataAttributes:function(e,t,n){var r=0,i="",s={},o=e.attributes;for(;r<o.length;r++){var u=o[r].name,f=o[r].value;f.length&&u.indexOf("data-")===0&&(t&&(u=u.substring(5)),n?s[u]=f:i+=a(u)+"="+a(f)+"&")}return n?s:i},copyDataAttributes:function(e,t,n,r){var i=f.getDataAttributes(e,n,!0);for(var s in i)t.setAttribute(r?s.replace(/-/g,"_"):s,i[s])},createIframe:function(e,n){var r=t.createElement("iframe");return r.style.cssText="overflow: hidden; border: none;",f.extendObject(r,{src:e,allowtransparency:"true",frameborder:"0",scrolling:"no"},!0),n&&(r.onload=r.onreadystatechange=function(){u.test(r.readyState||"")&&(r.onload=r.onreadystatechange=null,f.activateInstance(n))}),r},networkReady:function(e){return s[e]?s[e].loaded:n},appendNetwork:function(e){if(!e||e.appended)return;if(typeof e.append=="function"&&e.append(e)===!1){e.appended=e.loaded=!0,f.activateAll(e);return}e.script&&(e.el=t.createElement("script"),f.extendObject(e.el,e.script,!0),e.el.async=!0,e.el.onload=e.el.onreadystatechange=function(){if(u.test(e.el.readyState||"")){e.el.onload=e.el.onreadystatechange=null,e.loaded=!0;if(typeof e.onload=="function"&&e.onload(e)===!1)return;f.activateAll(e)}},t.body.appendChild(e.el)),e.appended=!0},removeNetwork:function(e){return f.networkReady(e.name)?(e.el.parentNode.removeChild(e.el),!(e.appended=e.loaded=!1)):!1},reloadNetwork:function(e){var t=s[e];t&&f.removeNetwork(t)&&f.appendNetwork(t)},createInstance:function(e,t){var s=!0,o={el:e,uid:r++,widget:t};return i.push(o),t.process!==n&&(s=typeof t.process=="function"?t.process(o):!1),s&&f.processInstance(o),o.el.setAttribute("data-socialite",o.uid),o.el.className="socialite "+t.name+" socialite-instance",o},processInstance:function(e){var n=e.el;e.el=t.createElement("div"),e.el.className=n.className,f.copyDataAttributes(n,e.el),n.nodeName.toLowerCase()==="a"&&!n.getAttribute("data-default-href")&&e.el.setAttribute("data-default-href",n.getAttribute("href"));var r=n.parentNode;r.insertBefore(e.el,n),r.removeChild(n)},activateInstance:function(e){if(e&&!e.loaded)return e.loaded=!0,typeof e.widget.activate=="function"&&e.widget.activate(e),f.addClass(e.el,"socialite-loaded"),e.onload?e.onload(e.el):null},activateAll:function(e){typeof e=="string"&&(e=s[e]);for(var t=0;t<i.length;t++){var n=i[t];n.init&&n.widget.network===e&&f.activateInstance(n)}},load:function(e,n,r,s,u){e=e&&typeof e=="object"&&e.nodeType===1?e:t;if(!n||typeof n!="object"){f.load(e,f.getElements(e,"socialite"),r,s,u);return}var a;if(/Array/.test(Object.prototype.toString.call(n))){for(a=0;a<n.length;a++)f.load(e,n[a],r,s,u);return}if(n.nodeType!==1)return;if(!r||!o[r]){r=null;var l=n.className.split(" ");for(a=0;a<l.length;a++)if(o[l[a]]){r=l[a];break}if(!r)return}var c,h=o[r],p=parseInt(n.getAttribute("data-socialite"),10);if(!isNaN(p)){for(a=0;a<i.length;a++)if(i[a].uid===p){c=i[a];break}}else c=f.createInstance(n,h);if(u||!c)return;c.init||(c.init=!0,c.onload=typeof s=="function"?s:null,h.init(c)),h.network.appended?f.networkReady(h.network.name)&&f.activateInstance(c):f.appendNetwork(h.network)},activate:function(t,n,r){e.Socialite.load(null,t,n,r)},process:function(t,n,r){e.Socialite.load(t,n,r,null,!0)},network:function(e,t){s[e]={name:e,el:null,appended:!1,loaded:!1,widgets:{}},t&&f.extendObject(s[e],t)},widget:function(e,t,n){n.name=e+"-"+t;if(!s[e]||o[n.name])return;n.network=s[e],s[e].widgets[t]=o[n.name]=n},setup:function(e){f.extendObject(f.settings,e,!0)}};return f}(window,window.document),function(e,n,r,i){r.setup({facebook:{lang:"en_GB",appId:null},twitter:{lang:"en"},googleplus:{lang:"en-GB"}}),r.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(t){var i=n.createElement("div"),s=r.settings.facebook,o={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send"};i.id="fb-root",n.body.appendChild(i),t.script.src=t.script.src.replace("{{language}}",s.lang),e.fbAsyncInit=function(){e.FB.init({appId:s.appId,xfbml:!0});for(var t in o)typeof s[t]=="function"&&e.FB.Event.subscribe(o[t],s[t])}}}),r.widget("facebook","like",{init:function(t){var i=n.createElement("div");i.className="fb-like",r.copyDataAttributes(t.el,i),t.el.appendChild(i),e.FB&&e.FB.XFBML&&e.FB.XFBML.parse(t.el)}}),r.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var n=typeof e.twttr!="object",i=r.settings.twitter,s=["click","tweet","retweet","favorite","follow"];return n&&(e.twttr=t={_e:[],ready:function(e){t._e.push(e)}}),e.twttr.ready(function(e){for(var t=0;t<s.length;t++){var n=s[t];typeof i["on"+n]=="function"&&e.events.bind(n,i["on"+n])}r.activateAll("twitter")}),n}});var s=function(e){var t=n.createElement("a");t.className=e.widget.name+"-button",r.copyDataAttributes(e.el,t),t.setAttribute("href",e.el.getAttribute("data-default-href")),t.setAttribute("data-lang",e.el.getAttribute("data-lang")||r.settings.twitter.lang),e.el.appendChild(t)},o=function(t){e.twttr&&typeof e.twttr.widgets=="object"&&typeof e.twttr.widgets.load=="function"&&e.twttr.widgets.load()};r.widget("twitter","share",{init:s,activate:o}),r.widget("twitter","follow",{init:s,activate:o}),r.widget("twitter","hashtag",{init:s,activate:o}),r.widget("twitter","mention",{init:s,activate:o}),r.widget("twitter","embed",{process:function(e){e.innerEl=e.el,e.innerEl.getAttribute("data-lang")||e.innerEl.setAttribute("data-lang",r.settings.twitter.lang),e.el=n.createElement("div"),e.el.className=e.innerEl.className,e.innerEl.className="",e.innerEl.parentNode.insertBefore(e.el,e.innerEl),e.el.appendChild(e.innerEl)},init:function(e){e.innerEl.className="twitter-tweet"},activate:o}),r.network("googleplus",{script:{src:"//apis.google.com/js/plusone.js"},append:function(t){if(e.gapi)return!1;e.___gcfg={lang:r.settings.googleplus.lang,parsetags:"explicit"}}});var u=function(e){var t=n.createElement("div");t.className="g-"+e.widget.gtype,r.copyDataAttributes(e.el,t),e.el.appendChild(t),e.gplusEl=t},a=function(e,t){return typeof t!="function"?null:function(n){t(e.el,n)}},f=function(t){var n=t.widget.gtype;if(e.gapi&&e.gapi[n]){var i=r.settings.googleplus,s=r.getDataAttributes(t.el,!0,!0),o=["onstartinteraction","onendinteraction","callback"];for(var u=0;u<o.length;u++)s[o[u]]=a(t,i[o[u]]);e.gapi[n].render(t.gplusEl,s)}};r.widget("googleplus","one",{init:u,activate:f,gtype:"plusone"}),r.widget("googleplus","share",{init:u,activate:f,gtype:"plus"}),r.widget("googleplus","badge",{init:u,activate:f,gtype:"plus"}),r.network("linkedin",{script:{src:"//platform.linkedin.com/in.js"}});var l=function(t){var i=n.createElement("script");i.type="IN/"+t.widget.intype,r.copyDataAttributes(t.el,i),t.el.appendChild(i),typeof e.IN=="object"&&typeof e.IN.parse=="function"&&(e.IN.parse(t.el),r.activateInstance(t))};r.widget("linkedin","share",{init:l,intype:"Share"}),r.widget("linkedin","recommend",{init:l,intype:"RecommendProduct"})}(window,window.document,window.Socialite),function(){var e=window._socialite;if(/Array/.test(Object.prototype.toString.call(e)))for(var t=0,n=e.length;t<n;t++)typeof e[t]=="function"&&e[t]()}(),define("libs/socialite",[],function(){}),requirejs.config({paths:{async:"libs/requirejs-plugins/async",depend:"libs/requirejs-plugins/depend",font:"libs/requirejs-plugins/font",goog:"libs/requirejs-plugins/goog",image:"libs/requirejs-plugins/image",json:"libs/requirejs-plugins/json",noext:"libs/requirejs-plugins/noext",propertyParser:"libs/requirejs-plugins/propertyParser"},shim:{"libs/buzz":{exports:"buzz"}}}),window.console||function(){var e=function(){};window.console={log:e,error:e,time:e,timeEnd:e}}(),require(["jquery","app/Config","util/HTMLLoader","app/StoryProgress","app/MediaReplacer","app/PeterGyslin","app/BackgroundAudio","util/LazyImage.class","map/SeidenMap","app/Lightbox","app/PanoramaLightbox","app/IntroPageRenderer","hv/util/Cookie","util/SmoothScroll","libs/socialite"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function m(){e(".zoom-button").hide(),s.init(),o.init(),r.init({onCountryChange:w,onReportChange:E}),i.init(),d.start(),f.init("#lightbox"),e(document).on("click","a[target=lightbox]",f.clickHandler),l.init("#lightbox-panorama"),e(document).on("click","a[target=panolightbox]",l.clickHandler),a.init("#map-container"),e(".social-buttons").on("touchstart mouseenter",function(t){t.preventDefault(),Socialite.load(e(".social-buttons")[0])}),a.onLoaded=function(){},e(document).on("click",".zoom-button",function(e){e.preventDefault(),e.stopImmediatePropagation(),b()})}function y(){g||b()}function b(){g=!g,a.setViewMode(g?"auto":"full"),e("#main-text").css("left",g?"0%":"-45%"),e(".main-content > .country").css("pointer-events",g?"auto":"none"),e(".main-navigation, #logo-link").css("left",g?"50%":"5%"),g?e(".zoom-button").removeClass("active"):e(".zoom-button").addClass("active"),g?e(document).off("click.textcolum","#map .marker, .content-navigation a, .main-content",y):e(document).on("click.textcolum","#map .marker, .content-navigation a, .main-content",y)}function w(t,n){s.setCountry(t),o.setCountry(t),n<-0.1&&t>=-0.1?e(".zoom-button").fadeIn():n>=-0.1&&t<-0.1&&(e(".zoom-button").fadeOut(),g||b())}function E(e,t){c(e,t),a.setProgress(e+1)}e.fx.interval=17;var p=new n,d=new u({selector:".landscape > img, .landscape > video",image:t.get("dummy_image")});e("body").addClass("loading"),p.load(t.get("content_url"),function(n){e("body").removeClass("loading"),n=d.prepareHTML(n);var r=e("<div>"+n+"</div>");t.get("content_url")=="text.html"&&function(){var t=r.find("#italy"),n,i,s=r.find(".content-navigation .content > li > a");for(var o=1;o<15;o++)i=e(s[o%s.length]),n=t.clone(),n.attr("id",i.attr("href").substr(1)),n.children(".background-audio").attr("href","../demo/audio/background"+(o%2?"-italy":"")+".mp3"),n.children(".audio-link").attr("href","../demo/audio/"+(o%2?"turkey":"tadschikistan")+".mp3"),n.find("header h2").first().text(i.text()),t.parent().append(n)}(),d.prepareDOM(r),e("body").prepend(r.children("header")),e("#main-text").append(r.children(".main-content")).css({marginTop:e(window).height()*2}),e("#page-loading").addClass("loading-map"),m();var i=h.get("scroll-position");i&&setTimeout(function(){e("html, body").scrollTop(i)},500),e(window).scroll(function(){h.set("scroll-position",e(window).scrollTop(),{maxAge:300})})});var v="ontouchstart"in window,g=!0}),define("main",[],function(){})
